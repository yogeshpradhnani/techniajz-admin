"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[931,221,534],{5931:(_,C,o)=>{o.r(C),o.d(C,{NotificationModule:()=>P});var d=o(177),h=o(9417),j=o(9631),m=o(6911),T=o(9818),D=o(7960),f=o(7062),t=o(4438),g=o(2616),F=o(7575);function N(n,y){1&n&&t.nrm(0,"mat-progress-bar",1)}let x=(()=>{class n{constructor(e,i){this.sharedService=e,this.cdref=i}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(g.d),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-notification"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(i,s){1&i&&(t.DNE(0,N,1,0,"mat-progress-bar",0),t.nrm(1,"router-outlet")),2&i&&t.Y8G("ngIf",s.isLoading)},dependencies:[d.bT,F.HM,f.n3]})}return n})();var S=o(7673),I=o(6536),L=o(4714),c=o(2221),r=o(5312),a=o(1626);let p=(()=>{class n{constructor(e,i){this.sharedService=e,this.http=i,this.notificationUrl=r.c.adminUrl+"/Employees"}fetchNotification(){return this.sharedService.getRequest(this.notificationUrl+"/notification")}static#t=this.\u0275fac=function(i){return new(i||n)(t.KVO(g.d),t.KVO(a.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const v=["openmodal"],b=()=>["/","admin","leave","list"];function M(n,y){if(1&n){const e=t.RV6();t.j41(0,"div",9)(1,"div",13)(2,"label"),t.EFF(3,"Start Date"),t.k0s(),t.j41(4,"input",14),t.mxI("ngModelChange",function(s){t.eBV(e);const l=t.XpG();return t.DH7(l.startDate,s)||(l.startDate=s),t.Njj(s)}),t.k0s()(),t.j41(5,"div",13)(6,"label"),t.EFF(7,"End Date"),t.k0s(),t.j41(8,"input",15),t.mxI("ngModelChange",function(s){t.eBV(e);const l=t.XpG();return t.DH7(l.endDate,s)||(l.endDate=s),t.Njj(s)}),t.k0s()(),t.j41(9,"div",16),t.nrm(10,"br"),t.j41(11,"input",17),t.mxI("ngModelChange",function(s){t.eBV(e);const l=t.XpG();return t.DH7(l.searchTerm,s)||(l.searchTerm=s),t.Njj(s)}),t.k0s()(),t.j41(12,"div",18),t.nrm(13,"br"),t.j41(14,"button",19),t.nrm(15,"i",20),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("value",e.startDate)("max",e.maxDate),t.R50("ngModel",e.startDate),t.R7$(4),t.Y8G("value",e.endDate)("max",e.maxDate),t.R50("ngModel",e.endDate),t.R7$(3),t.R50("ngModel",e.searchTerm)}}function u(n,y){if(1&n){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,l=t.XpG();return t.Njj(l.redirectToDetails(s.leadId))}),t.nrm(1,"i",26),t.k0s()}}function k(n,y){if(1&n){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,l=t.XpG();return t.Njj(l.redirectToProject(s.projectId))}),t.nrm(1,"i",26),t.k0s()}}function $(n,y){1&n&&(t.j41(0,"button",27),t.nrm(1,"i",26),t.k0s()),2&n&&t.Y8G("routerLink",t.lJ4(1,b))}function R(n,y){if(1&n&&(t.j41(0,"tr")(1,"td"),t.nrm(2,"img",21),t.k0s(),t.j41(3,"td"),t.nrm(4,"ngb-highlight",22),t.k0s(),t.j41(5,"td")(6,"p")(7,"strong"),t.EFF(8,"Title"),t.k0s(),t.EFF(9),t.k0s(),t.j41(10,"p")(11,"strong"),t.EFF(12,"Description"),t.k0s(),t.EFF(13),t.k0s()(),t.j41(14,"td"),t.nrm(15,"ngb-highlight",22),t.k0s(),t.j41(16,"td"),t.nrm(17,"ngb-highlight",22),t.k0s(),t.j41(18,"td"),t.DNE(19,u,2,0,"button",23)(20,k,2,0,"button",23)(21,$,2,2,"button",24),t.k0s()()),2&n){const e=y.$implicit,i=t.XpG();t.R7$(2),t.FS9("src",e.employee_id.profile_pitcture?i.imageFullPath+e.employee_id.profile_pitcture:"assets/images/logo/ic_avatar@3x.png",t.B4B),t.R7$(2),t.Y8G("result",e.employee_id.name)("term",i.service.searchTerm),t.R7$(5),t.SpI(" : ",e.title,""),t.R7$(4),t.SpI(" : ",e.description,""),t.R7$(2),t.Y8G("result",e.type)("term",i.service.searchTerm),t.R7$(2),t.Y8G("result",i.formatDate(e.created))("term",i.service.searchTerm),t.R7$(2),t.Y8G("ngIf",e.leadId),t.R7$(),t.Y8G("ngIf",e.projectId),t.R7$(),t.Y8G("ngIf","Leave Application"===e.type)}}function E(n,y){1&n&&(t.j41(0,"tr",12)(1,"td",28),t.EFF(2,"No records found"),t.k0s()())}const G=[{path:"",component:x,children:[{path:"list",component:(()=>{class n{constructor(e,i,s,l){this.service=e,this.sharedService=i,this.notificationService=s,this.datePipe=l,this.pageIndex=r.k.page,this.pageSize=r.k.pageSize,this.pageItemList=[],this.paginationDisabled=!1,this.imageFullPath=r.c.imageBaseUrl,this.searchTerm="",this.propertyType=0,this.isPermission=!1,this.date=new Date,this.maxDate=new Date,this.startDate=new Date,this.endDate=new Date}ngOnInit(){this.pageItemList=I.g1,this.maxDate=this.sharedService.maxDate,this.isPermission||(this.employeeId=localStorage.getItem("userId")||""),this.fetchNotification()}onRefreshData(){this.service.page=r.k.page,this.service.pageSize=r.k.pageSize,this.pageIndex=r.k.page,this.pageSize=r.k.pageSize,this.fetchNotification()}loadPage(e,i){this.pageSize=i,this.pageIndex=e,this.fetchNotification()}fetchNotification(){this.sharedService.isLoading=!0,this.notificationService.fetchNotification().subscribe(({data:s})=>{s&&s.notification?this.tableData$=(0,S.of)(s.notification):this.sharedService.displayServerMessage("Technical Error Occurred.","error")},e=>{e&&e.error&&("Unauthorized access."===e.error.message?this.sharedService.logOut():this.sharedService.displayServerMessage(e.error.message,"error")),this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1})}formatDate(e){return this.datePipe.transform(e,"dd/MM/yyyy hh:mm a")||""}redirectToDetails(e){try{const i=`admin/lead/lead-detail/${e}`;window.open(i,"_blank")}catch{window.alert("Technical Error Occurred.")}}redirectToProject(e){try{const i=`admin/projects/details/${e}`;window.open(i,"_blank")}catch{window.alert("Technical Error Occurred.")}}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(c.a),t.rXU(g.d),t.rXU(p),t.rXU(d.vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-notofication-list"]],viewQuery:function(i,s){if(1&i&&(t.GBs(v,5),t.GBs(L.f,5)),2&i){let l;t.mGM(l=t.lsd())&&(s.openModalTemplateRef=l.first),t.mGM(l=t.lsd())&&(s.headers=l)}},features:[t.Jv_([c.a,d.QX,d.vh])],decls:33,vars:4,consts:[[1,"card"],[1,"card-body"],[1,"row","justify-content-between","mb-2"],[1,"mx-0","row",2,"width","60%"],[1,"col-md-3","mx-1"],[1,"w-40","text-end"],[1,"btn-group","text-start","mb-2","mx-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"icon-reload"],[1,"row","justify-content-start","mb-3","mt-2"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive","table-striped"],[1,"odd"],[1,"col-md-2"],["id","startDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","value","max","ngModel"],["id","endDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","value","max","ngModel"],[1,"col-md-4"],["type","text","placeholder","Search for Type Of Expense, Payment Paid To and Mode Of Payments...",1,"form-control","list-input","mt-2",3,"ngModelChange","ngModel"],[1,"col-md-1","mx-1"],[1,"btn","btn-outline-primary","mt-2"],[1,"icofont","icofont-search"],["alt","Profile",1,"img-40","img-h-40","me-2","rounded-circle",3,"src"],[3,"result","term"],["class","btn-sm btn-outline-primary mx-1",3,"click",4,"ngIf"],["class","btn-sm btn-outline-primary mx-1",3,"routerLink",4,"ngIf"],[1,"btn-sm","btn-outline-primary","mx-1",3,"click"],["ps-2","","sweet-5","",1,"icofont","icofont-eye-alt"],[1,"btn-sm","btn-outline-primary","mx-1",3,"routerLink"],["colspan","10",1,"dataTables_empty",2,"text-align","center"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"div",4),t.k0s(),t.j41(5,"div",5)(6,"div",6)(7,"button",7),t.bIt("click",function(){return s.onRefreshData()}),t.EFF(8,"Refresh "),t.nrm(9,"i",8),t.k0s()()()(),t.nrm(10,"hr"),t.DNE(11,M,16,7,"div",9),t.j41(12,"form",10)(13,"table",11)(14,"thead")(15,"tr")(16,"th"),t.EFF(17,"Image"),t.k0s(),t.j41(18,"th"),t.EFF(19,"Employee Name"),t.k0s(),t.j41(20,"th"),t.EFF(21,"Notification"),t.k0s(),t.j41(22,"th"),t.EFF(23,"Notification Type"),t.k0s(),t.j41(24,"th"),t.EFF(25,"Time"),t.k0s(),t.j41(26,"th"),t.EFF(27,"Action"),t.k0s()()(),t.j41(28,"tbody"),t.Z7z(29,R,22,12,"tr",null,t.fX1,!1,E,3,0,"tr",12),t.nI1(32,"async"),t.k0s()()()()()),2&i&&(t.R7$(11),t.vxM(11,s.isPermission?11:-1),t.R7$(18),t.Dyx(t.bMT(32,2,s.tableData$)))},dependencies:[d.bT,m.Qr,h.qT,h.me,h.BC,h.cb,h.vS,h.cV,f.Wk,d.Jj]})}return n})(),data:{title:"Notification Board"}}]}];let B=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.$C({type:n});static#i=this.\u0275inj=t.G2t({imports:[f.iI.forChild(G),f.iI]})}return n})(),P=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.$C({type:n});static#i=this.\u0275inj=t.G2t({imports:[d.MD,D.G,m.c9,m.h_,h.YN,h.X1,m.UN,j.fS,T.MQ,m.Pv,B]})}return n})()},4714:(_,C,o)=>{o.d(C,{f:()=>j});var d=o(4438);const h={asc:"desc",desc:"","":"asc"};let j=(()=>{class m{constructor(){this.sortable="",this.direction="",this.sort=new d.bkB}rotate(){this.direction=h[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static#t=this.\u0275fac=function(f){return new(f||m)};static#e=this.\u0275dir=d.FsC({type:m,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(f,t){1&f&&d.bIt("click",function(){return t.rotate()}),2&f&&d.AVh("asc","asc"===t.direction)("desc","desc"===t.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}return m})()},2221:(_,C,o)=>{o.d(C,{a:()=>L});var d=o(4412),h=o(1413),j=o(7673);const m=[];var T=o(8141),D=o(152),f=o(5558),t=o(1986),g=o(5312),F=o(4438),N=o(177);let L=(()=>{class c{constructor(a){this.pipe=a,this._loading$=new d.t(!0),this._search$=new h.B,this._data$=new d.t([]),this._total$=new d.t(0),this._state={page:g.k.page,pageSize:g.k.pageSize,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,T.M)(()=>this._loading$.next(!0)),(0,D.B)(200),(0,f.n)(()=>this._search()),(0,t.c)(200),(0,T.M)(()=>this._loading$.next(!1))).subscribe(p=>{this._data$.next(p.Details),this._total$.next(p.total)}),this._search$.next()}get supportdata$(){return this._data$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(a){this._set({page:a})}set pageSize(a){this._set({pageSize:a})}set searchTerm(a){this._set({searchTerm:a})}set sortColumn(a){this._set({sortColumn:a})}set sortDirection(a){this._set({sortDirection:a})}_set(a){Object.assign(this._state,a),this._search$.next()}_search(){const{sortColumn:a,sortDirection:p,pageSize:v,page:b,searchTerm:M}=this._state;let u=function S(c,r,a){return""===a||""===r?c:[...c].sort((p,v)=>{const b=((c,r)=>c<r?-1:c>r?1:0)(p[r],v[r]);return"asc"===a?b:-b})}(m,a,p);u=u.filter($=>function I(c,r,a){return c.name.toLowerCase().includes(r.toLowerCase())||c.position.toLowerCase().includes(r.toLowerCase())||a.transform(c.salary).includes(r)||c.office.toLowerCase().includes(r.toLowerCase())||a.transform(c.extn).includes(r)||c.email.toLowerCase().includes(r.toLowerCase())}($,M,this.pipe));const k=u.length;return u=u.slice((b-1)*v,(b-1)*v+v),(0,j.of)({Details:u,total:k})}static#t=this.\u0275fac=function(p){return new(p||c)(F.KVO(N.QX))};static#e=this.\u0275prov=F.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);