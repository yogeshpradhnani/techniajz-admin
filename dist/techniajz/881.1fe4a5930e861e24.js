"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[881,221],{1881:(P,F,r)=>{r.r(F),r.d(F,{AssignSubmissionModule:()=>mt});var g=r(177),d=r(9417),w=r(9631),u=r(6911),D=r(9818),x=r(7960),f=r(7062),t=r(4438),v=r(2616),A=r(7575);function E(n,c){1&n&&t.nrm(0,"mat-progress-bar",1)}let M=(()=>{class n{constructor(e,i){this.sharedService=e,this.cdref=i}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(v.d),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-assign-submission"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(i,s){1&i&&(t.DNE(0,E,1,0,"mat-progress-bar",0),t.nrm(1,"router-outlet")),2&i&&t.Y8G("ngIf",s.isLoading)},dependencies:[g.bT,f.n3,A.HM]})}return n})();var C=r(7673),T=r(6536),y=r(2221),l=r(5312),p=r(1626);let m=(()=>{class n{constructor(e,i){this.sharedService=e,this.http=i,this.assignUrl=l.c.adminUrl+"/assignSubmission"}getEmpoyeeList(){return this.sharedService.getRequest(l.c.adminUrl+"/Projects/employeeList")}getAssetList(){return this.sharedService.getRequest(l.c.adminUrl+"/asset/getAssetDropdown")}getAssignAssetList(e){return this.sharedService.getRequest(this.assignUrl+"/fetchAssetList",e)}getAssignAsset(e){return this.sharedService.getRequest(this.assignUrl+"/fetchAsset/"+e)}addAssignSubmission(e){return this.sharedService.postRequest(this.assignUrl+"/addAssetInfo",e)}editAssignSubmission(e,i){return this.sharedService.putRequest(this.assignUrl+"/editAssetInfo/"+i,e)}deleteInventory(e){return this.http.delete(this.assignUrl+"/deleteAsset/"+e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.KVO(v.d),t.KVO(p.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.assetData.assetName.assetName)}}function k(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.assetData.assignTo.name)}}function S(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.changePayloadDateFormat(e.assetData.assignDate))}}function j(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.assetData.assignBy.name)}}function _(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.assetData.quantity)}}function I(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.changePayloadDateFormat(e.assetData.submissionDate))}}function L(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.assetData.submitedTo.name)}}function $(n,c){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.assetData.remark)}}let G=(()=>{class n{constructor(e,i,s,a){this.service=e,this.sharedService=i,this.datePipe=s,this.assignSubmissionService=a,this.closeModal=new t.bkB,this.imageFullPath=l.c.imageBaseUrl,this.assetData={}}ngOnInit(){this.getPaymentData()}closeModel(){this.closeModal.emit()}getPaymentData(){this.assignSubmissionService.getAssignAsset(this.AssetDetails._id).subscribe(e=>{e.success&&(this.assetData=e.data.asset)})}transformDate(e){return this.datePipe.transform(e,"dd/MM/yyyy")||""}openLinkInNewTab(e){e?window.open(e,"_blank"):console.error("Link parameter is required")}changePayloadDateFormat(e){const i=e.slice(0,4),s=e.slice(5,7);return`${e.slice(8,10)}-${s}-${i}`}changeToCurrency(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e).toString()}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(y.a),t.rXU(v.d),t.rXU(g.vh),t.rXU(m))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-assign-submission-detail"]],inputs:{AssetDetails:"AssetDetails"},outputs:{closeModal:"closeModal"},features:[t.Jv_([y.a,g.QX,g.vh])],decls:44,vars:10,consts:[[1,"modal-content"],[1,"modal-toggle-wrapper","text-start","dark-sign-up"],[1,"row","align-items-center"],["type","button","aria-label","Close",1,"btn-close","position-absolute","top-0","end-0","m-2","close-btn",3,"click"],[1,"col-12"],[1,"modal-header","justify-content-center","border-0","pb-0","m-0"],[1,"m-1"],[1,"modal-body"],[1,"row","d-flex"],[1,"row"],[1,"my-2","d-flex","col-md-6"],[1,"my-1","bold"],["class","mx-2 form-label my-1",4,"ngIf"],[1,"my-2","d-flex","col-md-12"],[1,"mx-2","form-label","my-1"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){return s.closeModel()}),t.k0s(),t.j41(4,"div",4)(5,"h3",5)(6,"span",6),t.EFF(7),t.k0s()()()(),t.nrm(8,"hr"),t.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"p",11),t.EFF(14,"Asset Name :"),t.k0s(),t.DNE(15,h,2,1,"p",12),t.k0s(),t.j41(16,"div",10)(17,"p",11),t.EFF(18,"Assigned To :"),t.k0s(),t.DNE(19,k,2,1,"p",12),t.k0s(),t.j41(20,"div",10)(21,"p",11),t.EFF(22,"Date of Assigning :"),t.k0s(),t.DNE(23,S,2,1,"p",12),t.k0s(),t.j41(24,"div",10)(25,"p",11),t.EFF(26,"Assigned By :"),t.k0s(),t.DNE(27,j,2,1,"p",12),t.k0s(),t.j41(28,"div",10)(29,"p",11),t.EFF(30,"Quantity :"),t.k0s(),t.DNE(31,_,2,1,"p",12),t.k0s(),t.j41(32,"div",10)(33,"p",11),t.EFF(34,"Submission Date :"),t.k0s(),t.DNE(35,I,2,1,"p",12),t.k0s(),t.j41(36,"div",10)(37,"p",11),t.EFF(38,"Submited To :"),t.k0s(),t.DNE(39,L,2,1,"p",12),t.k0s(),t.j41(40,"div",13)(41,"p",11),t.EFF(42,"Remark :"),t.k0s(),t.DNE(43,$,2,1,"p",12),t.k0s()()()()()()),2&i&&(t.R7$(7),t.Lme(' Detail of "',s.assetData.assetName.assetName,'" assign on ',s.changePayloadDateFormat(s.assetData.assignDate||""),""),t.R7$(8),t.Y8G("ngIf",s.assetData.assetName),t.R7$(4),t.Y8G("ngIf",s.assetData.assignTo),t.R7$(4),t.Y8G("ngIf",s.assetData.assignDate),t.R7$(4),t.Y8G("ngIf",s.assetData.assignBy),t.R7$(4),t.Y8G("ngIf",s.assetData.quantity),t.R7$(4),t.Y8G("ngIf",s.assetData.submissionDate),t.R7$(4),t.Y8G("ngIf",s.assetData.submitedTo),t.R7$(4),t.Y8G("ngIf",s.assetData.remark))},dependencies:[g.bT],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{color:inherit!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.bold[_ngcontent-%COMP%]{font-weight:700}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd)   td[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd)   th[_ngcontent-%COMP%]{background-color:#33bfbf1a!important;--bs-table-accent-bg: unset !important}.close-btn[_ngcontent-%COMP%]{z-index:3}.badge[_ngcontent-%COMP%]{font-size:16px!important}.icon[_ngcontent-%COMP%]{font-size:large;color:green}"]})}return n})();const N=()=>["/","admin","assign-submission","add-assign-submission"],O=n=>["/","admin","assign-submission","edit-assign-submission",n];function z(n,c){1&n&&(t.j41(0,"div",24)(1,"button",27),t.EFF(2,"Add "),t.nrm(3,"i",28),t.k0s()()),2&n&&(t.R7$(),t.Y8G("routerLink",t.lJ4(1,N)))}function B(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",20)(1,"div",21),t.nrm(2,"div",22),t.k0s(),t.j41(3,"div",23)(4,"div",24)(5,"button",25),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.onRefreshData())}),t.EFF(6,"Refresh "),t.nrm(7,"i",26),t.k0s()(),t.DNE(8,z,4,2,"div",24),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(8),t.vxM(8,e.isPermission?8:-1)}}function X(n,c){1&n&&t.nrm(0,"hr")}function Y(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",5)(1,"label"),t.EFF(2,"Assign To"),t.k0s(),t.j41(3,"ng-select",30),t.mxI("ngModelChange",function(s){t.eBV(e);const a=t.XpG(2);return t.DH7(a.employeeId,s)||(a.employeeId=s),t.Njj(s)}),t.bIt("clear",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onClearType())}),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(3),t.Y8G("items",e.employeeList),t.R50("ngModel",e.employeeId)}}function U(n,c){if(1&n&&t.DNE(0,Y,4,2,"div",29),2&n){const e=t.XpG();t.Y8G("ngIf",!e.isDetailPage)}}function V(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",31)(1,"div",9),t.nrm(2,"br"),t.j41(3,"button",32),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.onRefreshData())}),t.EFF(4,"Refresh "),t.nrm(5,"i",26),t.k0s()()()}}function J(n,c){if(1&n&&(t.j41(0,"button",40),t.nrm(1,"i",41),t.k0s()),2&n){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(1,O,null==e?null:e._id))}}function Q(n,c){if(1&n){const e=t.RV6();t.j41(0,"button",42),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,a=t.XpG();return t.Njj(a.confirmDeleteAsset(s._id))}),t.nrm(1,"i",43),t.k0s()}}function H(n,c){if(1&n){const e=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,a=t.XpG();return t.Njj(a.openLinkInNewTab(a.imageFullPath+s.image))}),t.nrm(1,"i",45),t.k0s()}}function q(n,c){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.nrm(2,"ngb-highlight",33),t.k0s(),t.j41(3,"td"),t.nrm(4,"ngb-highlight",33),t.k0s(),t.j41(5,"td"),t.nrm(6,"ngb-highlight",33),t.k0s(),t.j41(7,"td")(8,"ul",34),t.DNE(9,J,2,3,"button",35)(10,Q,2,0,"button",36),t.j41(11,"button",37),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.openModal(s))}),t.nrm(12,"i",38),t.k0s(),t.DNE(13,H,2,0,"button",39),t.k0s()()()}if(2&n){const e=c.$implicit,i=t.XpG();t.R7$(2),t.Y8G("result",null==e.assetName?null:e.assetName.assetName)("term",i.service.searchTerm),t.R7$(2),t.Y8G("result",i.transformDate(e.assignDate))("term",i.service.searchTerm),t.R7$(2),t.Y8G("result",e.assignTo.name)("term",i.service.searchTerm),t.R7$(3),t.Y8G("ngIf",!i.isDetailPage&&i.isPermission),t.R7$(),t.Y8G("ngIf",!i.isDetailPage&&i.isPermission),t.R7$(3),t.Y8G("ngIf",(null==e?null:e.image)&&""!==e.image)}}function K(n,c){1&n&&(t.j41(0,"tr",15)(1,"td",46),t.EFF(2,"No records found"),t.k0s()())}function W(n,c){if(1&n&&(t.j41(0,"option",47),t.EFF(1),t.k0s()),2&n){const e=c.$implicit;t.Y8G("value",e.value),t.R7$(),t.JRh(e.description+" Items per page")}}let Z=(()=>{class n{onRefreshData(){this.setInitialDates(),this.service.page=l.k.page,this.service.pageSize=l.k.pageSize,this.pageIndex=l.k.page,this.pageSize=l.k.pageSize,this.isDetailPage||(this.employeeId=null),this.getAssignList()}constructor(e,i,s,a,o,b){this.route=e,this.service=i,this.sharedService=s,this.modalService=a,this.assignSubmissionService=o,this.datePipe=b,this.imageFullPath=l.c.imageBaseUrl,this.pageIndex=l.k.page,this.pageSize=l.k.pageSize,this.paginationDisabled=!1,this.isPermission=!1,this.isDetailPage=!1,this.date=new Date,this.maxDate=new Date}ngOnInit(){this.pageItemList=T.g1,this.setInitialDates(),this.getEmployeeList(),this.checkPermission(),this.route.params.subscribe(e=>{e.id?(this.isDetailPage=!0,this.employeeId=e.id):this.sharedService.changeTitle("Assign and Subbmission")}),this.getAssignList()}loadPage(e,i){this.pageSize=i,this.pageIndex=e,this.getAssignList()}onClearType(){this.employeeId=null,this.total$=(0,C.of)(0)}setInitialDates(){const e=this.date.getFullYear(),i=this.date.getMonth()+1,s=this.date.getDate();this.startDate=`${e}-${i<=9?"0"+i:i}-01`,this.endDate=`${e}-${i<=9?"0"+i:i}-${s<=9?"0"+s:s}`}maintainDateRange(){this.endDate<this.startDate&&(this.endDate=null)}getEmployeeList(){this.assignSubmissionService.getEmpoyeeList().subscribe(e=>{let i=[];for(let s of e.data.employee)i.push({_id:s._id,name:s.name+" ( Emp Id : "+s.id+")"});this.employeeList=i})}transformDate(e){return this.datePipe.transform(e,"dd-MM-yyyy")||""}getAssignList(){this.sharedService.isLoading=!0,this.paginationDisabled=!1;const i="Admin"===(localStorage.getItem("role")||""),s=localStorage.getItem("userId");this.assignSubmissionService.getAssignAssetList(i?{page:this.pageIndex,limit:this.pageSize,startDate:this.startDate,endDate:this.endDate,assignTo:this.employeeId||""}:{page:this.pageIndex,limit:this.pageSize,startDate:this.startDate,endDate:this.endDate,assignTo:s}).subscribe(o=>{o.success&&(this.tableData$=(0,C.of)(o.data.assetData),this.total$=(0,C.of)(o.data.total))},o=>{o&&o.error&&("Unauthorized access."===o.error.message?this.sharedService.logOut():this.sharedService.displayServerMessage(o.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}openLinkInNewTab(e){e?window.open(e,"_blank"):console.error("Link parameter is required")}confirmDeleteAsset(e){e&&this.sharedService.confirmBox("Are you sure?","Do you really want to delete this Asset Record?").then(a=>{a&&this.assignSubmissionService.deleteInventory(e).subscribe(o=>{"Asset deleted successfully"===o.message&&(this.sharedService.displayServerMessage(o.message,"success"),this.getAssignList())},o=>this.sharedService.displayServerMessage(o.error.message,"error"))})}onProjectDetailModal(e){const i=this.modalService.open(G,{size:"lg"});i.componentInstance.AssetDetails=e,i.componentInstance.closeModal.subscribe(()=>{i.close()})}openModal(e){const i={...e};this.onProjectDetailModal(i)}checkPermission(){const e=localStorage.getItem("role");e&&(this.isPermission="Admin"===e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(f.nX),t.rXU(y.a),t.rXU(v.d),t.rXU(u.Bq),t.rXU(m),t.rXU(g.vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-assign-submission-list"]],features:[t.Jv_([y.a,g.QX,g.vh])],decls:46,vars:27,consts:[[1,"card"],[1,"card-body"],["class","row justify-content-between mb-2",4,"ngIf"],[4,"ngIf"],[1,"row","mb-3","mt-2"],[1,"col-md-3","col-12"],["id","startDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","change","value","max","ngModel"],["id","endDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","change","value","max","min","ngModel"],[1,"col-md-3","d-flex","col-12",2,"width","fit-content"],[1,"mx-2"],["ngbTooltip","Search",1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"icofont","icofont-search"],["class","col-md-3 d-flex col-12",4,"ngIf"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive","table-striped"],[1,"odd"],[1,"d-flex","justify-content-between","p-2","mb-3"],["name","pageSize",1,"form-select",2,"width","auto","cursor","pointer",3,"change","ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3",3,"pageChange","collectionSize","page","pageSize","disabled","maxSize"],[1,"row","justify-content-between","mb-2"],[1,"mx-0","row","col-md-7"],[1,"text-start","input-group","pb-1",2,"width","70%"],[1,"w-40","text-end"],[1,"btn-group","text-start","mb-2","mx-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"icon-reload"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"icon-plus"],["class","col-md-3 col-12",4,"ngIf"],["id","type","bindLabel","name","bindValue","_id","placeholder","Select Employee",1,"custom-select",3,"ngModelChange","clear","items","ngModel"],[1,"col-md-3","d-flex","col-12"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[3,"result","term"],[1,"action"],["class","btn-sm btn-outline-primary mx-1","ngbTooltip","Edit",3,"routerLink",4,"ngIf"],["class","btn-sm btn-outline-danger mx-1","ngbTooltip","Delete","type","button",3,"click",4,"ngIf"],["ngbTooltip","Details",1,"btn-sm","btn-outline-primary","mx-1",3,"click"],[1,"icofont","icofont-eye-alt","px-1"],["class","btn-sm btn-outline-warning mx-1","ngbTooltip","Image",3,"click",4,"ngIf"],["ngbTooltip","Edit",1,"btn-sm","btn-outline-primary","mx-1",3,"routerLink"],["ps-2","","sweet-5","",1,"icofont","icofont-pencil-alt-2"],["ngbTooltip","Delete","type","button",1,"btn-sm","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash-o","px-1","icon_size"],["ngbTooltip","Image",1,"btn-sm","btn-outline-warning","mx-1",3,"click"],[1,"fa","fa-file-image-o"],["colspan","10",1,"dataTables_empty",2,"text-align","center"],[3,"value"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,B,9,1,"div",2)(3,X,1,0,"hr",3),t.j41(4,"div",4)(5,"div",5)(6,"label"),t.EFF(7,"Start Date"),t.k0s(),t.j41(8,"input",6),t.mxI("ngModelChange",function(o){return t.DH7(s.startDate,o)||(s.startDate=o),o}),t.bIt("change",function(){return s.maintainDateRange()}),t.k0s()(),t.j41(9,"div",5)(10,"label"),t.EFF(11,"End Date"),t.k0s(),t.j41(12,"input",7),t.mxI("ngModelChange",function(o){return t.DH7(s.endDate,o)||(s.endDate=o),o}),t.bIt("change",function(){return s.maintainDateRange()}),t.k0s()(),t.DNE(13,U,1,1,"div",5),t.j41(14,"div",8)(15,"div",9),t.nrm(16,"br"),t.j41(17,"button",10),t.bIt("click",function(){return s.getAssignList()}),t.nrm(18,"i",11),t.k0s()()(),t.DNE(19,V,6,0,"div",12),t.k0s(),t.nrm(20,"hr"),t.j41(21,"form",13)(22,"table",14)(23,"thead")(24,"tr")(25,"th"),t.EFF(26,"Asset Name"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Assign Date"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Assign To"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Action"),t.k0s()()(),t.j41(33,"tbody"),t.Z7z(34,q,14,9,"tr",null,t.fX1,!1,K,3,0,"tr",15),t.nI1(37,"async"),t.k0s()(),t.j41(38,"div",16)(39,"select",17),t.bIt("change",function(){return s.loadPage(s.service.page,s.service.pageSize)}),t.mxI("ngModelChange",function(o){return t.DH7(s.service.pageSize,o)||(s.service.pageSize=o),o}),t.DNE(40,W,2,2,"option",18),t.k0s(),t.j41(41,"span"),t.EFF(42),t.nI1(43,"async"),t.k0s(),t.j41(44,"ngb-pagination",19),t.nI1(45,"async"),t.mxI("pageChange",function(o){return t.DH7(s.service.page,o)||(s.service.page=o),o}),t.bIt("pageChange",function(){return s.loadPage(s.service.page,s.service.pageSize)}),t.k0s()()()()()),2&i&&(t.R7$(2),t.Y8G("ngIf",!s.isDetailPage),t.R7$(),t.Y8G("ngIf",!s.isDetailPage),t.R7$(5),t.Y8G("value",s.startDate)("max",s.maxDate),t.R50("ngModel",s.startDate),t.R7$(4),t.Y8G("value",s.endDate)("max",s.maxDate)("min",s.startDate),t.R50("ngModel",s.endDate),t.R7$(),t.vxM(13,s.isPermission?13:-1),t.R7$(6),t.Y8G("ngIf",s.isDetailPage),t.R7$(15),t.Dyx(t.bMT(37,21,s.tableData$)),t.R7$(5),t.Y8G("disabled",!s.paginationDisabled),t.R50("ngModel",s.service.pageSize),t.R7$(),t.Y8G("ngForOf",s.pageItemList),t.R7$(2),t.SpI("Total: ",t.bMT(43,23,s.total$),""),t.R7$(2),t.Y8G("collectionSize",t.bMT(45,25,s.total$)),t.R50("page",s.service.page),t.Y8G("pageSize",s.service.pageSize)("disabled",!s.paginationDisabled)("maxSize",6))},dependencies:[g.Sq,g.bT,f.Wk,u.s5,u.md,u.Qr,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.vS,d.cV,D.vr,g.Jj],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.w-40[_ngcontent-%COMP%]{width:40%!important}"]})}return n})();class tt{constructor(c){this.formBuilder=c,this.formGroup=this.formBuilder.group({assetName:[null,[d.k0.required]],assignDate:["",[d.k0.required]],assignBy:[null,[d.k0.required]],assignTo:[null],quantity:[""],submissionDate:[""],submitedTo:[null],remark:[""],image:[""]})}}var et=r(5794);const st=n=>({hidediv:n}),it=n=>({show:n}),nt=n=>({"was-validated":n});function ot(n,c){1&n&&(t.j41(0,"div",39),t.EFF(1,"Please select an asset to assign."),t.k0s())}function at(n,c){1&n&&(t.j41(0,"div",39),t.EFF(1,"Please choose the date the asset was assigned."),t.k0s())}function rt(n,c){1&n&&(t.j41(0,"div",39),t.EFF(1,"Please select the employee who is assigning the asset."),t.k0s())}let R=(()=>{class n{constructor(e,i,s,a,o,b){this.formBuilder=e,this.route=i,this.sharedService=s,this.assignSubmissionService=a,this.toastrService=o,this.datePipe=b,this.isError=!1,this.validate=!1,this.btnDissable=!1,this.isEditMode=!1}ngOnInit(){this.addEditAssignSubmissionForm=new tt(this.formBuilder),this.getEmployeeList(),this.getAssetList(),this.sharedService.changeTitle("Assign and Subbmission Form"),this.route.params.subscribe(e=>{e.id&&(this.sharedService.changeTitle("Edit Assign and Subbmission Form"),this.isEditMode=!0,this.assetId=e.id,this.getAssetDeatilsById(this.assetId))})}getAssetDeatilsById(e){this.assignSubmissionService.getAssignAsset(e).subscribe(i=>{if(i?.success&&i.data){const s=i.data.asset||{};this.assetData=s,this.addEditAssignSubmissionForm.formGroup?.patchValue({...s,assetName:s.assetName._id,assignBy:s.assignBy._id,assignTo:s.assignTo._id,submitedTo:s.submitedTo?._id,assignDate:this.transformDate(s.assignDate),submissionDate:this.transformDate(s.submissionDate)})}this.sharedService.isLoading=!1},i=>{this.sharedService.isLoading=!1,i.error&&this.sharedService.displayServerMessage(i.error.message,"error")})}changePayloadDateFormat(e){const i=e.slice(0,4),s=e.slice(5,7);return`${e.slice(8,10)}-${s}-${i}`}close(){this.isError=!1}goBack(){this.sharedService.goBack()}onFileSelected(e){const i=e.target.files;if(i&&i.length>0){this.selectedFiles=[];for(let s=0;s<i.length;s++){const a=i[s],o=new FileReader;o.onload=b=>{this.selectedFiles.push(a)},o.readAsDataURL(a)}}else this.selectedFiles=null}transformDate(e){return this.datePipe.transform(e,"yyyy-MM-dd")||""}getEmployeeList(){this.assignSubmissionService.getEmpoyeeList().subscribe(e=>{let i=[];for(let s of e.data.employee)i.push({_id:s._id,name:s.name+" ( Emp Id : "+s.id+")"});this.employeeList=i})}getAssetList(){this.assignSubmissionService.getAssetList().subscribe(e=>{this.assetList=e.data.assetList})}errorMsgShowed(e){const i=this.addEditAssignSubmissionForm.formGroup?.get(e);return{"error-icon":i?.hasError("required")&&this.validate,"success-icon":!i?.hasError("required")&&this.validate,"error-shadow":i?.hasError("required")&&this.validate,"success-shadow":!i?.hasError("required")&&this.validate}}submit(){this.validate=!0;const e=this.addEditAssignSubmissionForm.formGroup;if(e.valid){this.validate=!1;const i=new FormData;Object.keys(this.addEditAssignSubmissionForm.formGroup.controls).forEach(o=>{e.value[o]&&i.append(o,e.value[o])}),this.selectedFiles&&this.selectedFiles.forEach(o=>{i.append("image",o)}),this.sharedService.isError=!1,this.sharedService.isLoading=!0,this.btnDissable=!0;const s=o=>{o.success&&(this.sharedService.isLoading=!1,this.btnDissable=!1,this.sharedService.goBack())},a=o=>{o.error&&(this.errorMessage=o.error.message),this.btnDissable=!1,this.sharedService.isLoading=!1};this.isEditMode?this.assignSubmissionService.editAssignSubmission(this.assetId,i).subscribe(s,a):this.assignSubmissionService.addAssignSubmission(i).subscribe(s,a)}else this.validate=!0,Object.keys(this.addEditAssignSubmissionForm.formGroup.controls).forEach(i=>{const s=this.addEditAssignSubmissionForm.formGroup.get(i);s?.markAsTouched(),s?.updateValueAndValidity()})}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(d.ok),t.rXU(f.nX),t.rXU(v.d),t.rXU(m),t.rXU(et.tw),t.rXU(g.vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-assign-submission-form"]],features:[t.Jv_([g.vh])],decls:68,vars:27,consts:[[1,"container-fluid"],[1,"card"],[1,"row","justify-content-between","m-3"],[1,"col-md-4","d-flex","justify-content-start"],[1,"col-md-2","btn-group","text-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"icofont","icofont-arrow-left"],[1,"card-body"],[1,"card-body","toast-rtl",3,"ngClass"],[1,"toast","default-show-toast","align-items-center","text-light","bg-danger","border-0","fade",3,"ngClass"],[1,"d-flex","justify-content-between"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],["novalidate","",1,"row","g-3","needs-validation","custom-input",3,"formGroup","ngClass"],[1,"col-md-6"],["for","assetName",1,"form-label"],[1,"text-danger"],["id","assetName","bindLabel","assetName","bindValue","_id","placeholder","Select Asset","formControlName","assetName",3,"items","clearable","ngClass"],["class","error-msg",4,"ngIf"],["for","assignDate",1,"form-label"],["id","assignDate","type","date","placeholder","Assign Date","formControlName","assignDate","required","",1,"form-control"],["for","assignBy",1,"form-label"],["id","assignBy","bindLabel","name","bindValue","_id","placeholder","Assign By","formControlName","assignBy",3,"items","clearable","ngClass"],["for","assignTo",1,"form-label"],["id","assignTo","bindLabel","name","bindValue","_id","placeholder","Assign To","formControlName","assignTo",3,"items","clearable","ngClass"],["for","quantity",1,"form-label"],["id","quantity","type","number","placeholder","Quantity","formControlName","quantity",1,"form-control"],["for","submissionDate",1,"form-label"],["id","submissionDate","type","date","placeholder","Submission Date","formControlName","submissionDate",1,"form-control"],["for","submitedTo",1,"form-label"],["id","submitedTo","bindLabel","name","bindValue","_id","placeholder","Submited To","formControlName","submitedTo",3,"items","clearable","ngClass"],["for","photo",1,"form-label"],["id","photo","type","file","accept",".jpg, .jpeg, .png","placeholder","Add Asset Image",1,"form-control",3,"change"],[1,"col-md-12"],["for","remark",1,"form-label"],["id","remark","formControlName","remark","placeholder","Remark",1,"form-control"],[1,"mt-3","d-flex","justify-content-end"],[1,"col-md-1","mx-1","text-end"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"error-msg"]],template:function(i,s){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"h3"),t.k0s(),t.j41(5,"div",4)(6,"button",5),t.bIt("click",function(){return s.goBack()}),t.nrm(7,"i",6),t.EFF(8," Back"),t.k0s()()(),t.nrm(9,"hr"),t.j41(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11),t.EFF(15),t.k0s(),t.j41(16,"button",12),t.bIt("click",function(){return s.close()}),t.k0s()()()(),t.j41(17,"form",13)(18,"div",14)(19,"label",15),t.EFF(20,"Asset Name"),t.j41(21,"a",16),t.EFF(22,"*"),t.k0s()(),t.nrm(23,"ng-select",17),t.DNE(24,ot,2,0,"div",18),t.k0s(),t.j41(25,"div",14)(26,"label",19),t.EFF(27,"Assign Date"),t.j41(28,"a",16),t.EFF(29,"*"),t.k0s()(),t.nrm(30,"input",20),t.DNE(31,at,2,0,"div",18),t.k0s(),t.j41(32,"div",14)(33,"label",21),t.EFF(34,"Assign By"),t.j41(35,"a",16),t.EFF(36,"*"),t.k0s()(),t.nrm(37,"ng-select",22),t.DNE(38,rt,2,0,"div",18),t.k0s(),t.j41(39,"div",14)(40,"label",23),t.EFF(41,"Assign To"),t.k0s(),t.nrm(42,"ng-select",24),t.k0s(),t.j41(43,"div",14)(44,"label",25),t.EFF(45,"Quantity"),t.k0s(),t.nrm(46,"input",26),t.k0s(),t.j41(47,"div",14)(48,"label",27),t.EFF(49,"Submission Date"),t.k0s(),t.nrm(50,"input",28),t.k0s(),t.j41(51,"div",14)(52,"label",29),t.EFF(53,"Submited To"),t.k0s(),t.nrm(54,"ng-select",30),t.k0s(),t.j41(55,"div",14)(56,"label",31),t.EFF(57,"Asset Image"),t.k0s(),t.j41(58,"input",32),t.bIt("change",function(o){return s.onFileSelected(o)}),t.k0s()(),t.j41(59,"div",33)(60,"label",34),t.EFF(61,"Remark"),t.k0s(),t.j41(62,"textarea",35),t.EFF(63," "),t.k0s()(),t.j41(64,"div",36)(65,"div",37)(66,"button",38),t.bIt("click",function(){return s.submit()}),t.EFF(67),t.k0s()()()()()()()),2&i){let a,o,b;t.R7$(11),t.Y8G("ngClass",t.eq3(21,st,!s.isError)),t.R7$(),t.Y8G("ngClass",t.eq3(23,it,s.isError)),t.R7$(3),t.JRh(s.errorMessage),t.R7$(2),t.Y8G("formGroup",s.addEditAssignSubmissionForm.formGroup)("ngClass",t.eq3(25,nt,s.validate)),t.R7$(6),t.Y8G("items",s.assetList)("clearable",!1)("ngClass",s.errorMsgShowed("assetName")),t.R7$(),t.Y8G("ngIf",(null==(a=s.addEditAssignSubmissionForm.formGroup.get("assetName"))?null:a.touched)&&(null==(a=s.addEditAssignSubmissionForm.formGroup.get("assetName"))?null:a.hasError("required"))),t.R7$(7),t.Y8G("ngIf",(null==(o=s.addEditAssignSubmissionForm.formGroup.get("assignDate"))?null:o.touched)&&(null==(o=s.addEditAssignSubmissionForm.formGroup.get("assignDate"))?null:o.hasError("required"))),t.R7$(6),t.Y8G("items",s.employeeList)("clearable",!1)("ngClass",s.errorMsgShowed("assignBy")),t.R7$(),t.Y8G("ngIf",(null==(b=s.addEditAssignSubmissionForm.formGroup.get("assignBy"))?null:b.touched)&&(null==(b=s.addEditAssignSubmissionForm.formGroup.get("assignBy"))?null:b.hasError("required"))),t.R7$(4),t.Y8G("items",s.employeeList)("clearable",!1)("ngClass",s.errorMsgShowed("assignTo")),t.R7$(12),t.Y8G("items",s.employeeList)("clearable",!1)("ngClass",s.errorMsgShowed("submitedTo")),t.R7$(13),t.JRh(s.isEditMode?"Update":"Save")}},dependencies:[g.YU,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.j4,d.JD,D.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.aling-center[_ngcontent-%COMP%]{align-items:center}.w-40[_ngcontent-%COMP%]{width:40%!important}.fix-width[_ngcontent-%COMP%]{width:auto;height:100%}.lead-Card[_ngcontent-%COMP%]{border:1px black solid}.img-bg[_ngcontent-%COMP%]{background-color:#fff}.card-height[_ngcontent-%COMP%]{min-height:30rem}.icon[_ngcontent-%COMP%]{font-size:large;color:green}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.imageSize[_ngcontent-%COMP%]{height:8rem;width:13rem}.img_delete[_ngcontent-%COMP%]{display:inline-flex;position:absolute;right:1px;top:4px;padding:4px 9px;border-radius:20px}.img_div[_ngcontent-%COMP%]{border:1px solid black;width:16rem;height:13rem}.img_hr[_ngcontent-%COMP%]{border-top:2px solid black!important;margin-bottom:.5rem}.hidediv[_ngcontent-%COMP%]{display:none}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}"]})}return n})();const lt=[{path:"",component:M,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Z,data:{title:"Assign Submission Manager"}},{path:"add-assign-submission",component:R,data:{title:"Add Assign-Submission",breadcrumb:"Add Assign-Submission"}},{path:"edit-assign-submission/:id",component:R,data:{title:"Edit Assign-Submission",breadcrumb:"Edit Assign-Submission"}}]}];let ct=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.$C({type:n});static#s=this.\u0275inj=t.G2t({imports:[f.iI.forChild(lt),f.iI]})}return n})(),mt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.$C({type:n});static#s=this.\u0275inj=t.G2t({imports:[g.MD,ct,x.G,u.c9,u.h_,d.YN,d.X1,u.UN,w.fS,D.MQ,u.Pv]})}return n})()},2221:(P,F,r)=>{r.d(F,{a:()=>y});var g=r(4412),d=r(1413),w=r(7673);const u=[];var D=r(8141),x=r(152),f=r(5558),t=r(1986),v=r(5312),A=r(4438),E=r(177);let y=(()=>{class l{constructor(m){this.pipe=m,this._loading$=new g.t(!0),this._search$=new d.B,this._data$=new g.t([]),this._total$=new g.t(0),this._state={page:v.k.page,pageSize:v.k.pageSize,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,D.M)(()=>this._loading$.next(!0)),(0,x.B)(200),(0,f.n)(()=>this._search()),(0,t.c)(200),(0,D.M)(()=>this._loading$.next(!1))).subscribe(h=>{this._data$.next(h.Details),this._total$.next(h.total)}),this._search$.next()}get supportdata$(){return this._data$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(m){this._set({page:m})}set pageSize(m){this._set({pageSize:m})}set searchTerm(m){this._set({searchTerm:m})}set sortColumn(m){this._set({sortColumn:m})}set sortDirection(m){this._set({sortDirection:m})}_set(m){Object.assign(this._state,m),this._search$.next()}_search(){const{sortColumn:m,sortDirection:h,pageSize:k,page:S,searchTerm:j}=this._state;let _=function C(l,p,m){return""===m||""===p?l:[...l].sort((h,k)=>{const S=((l,p)=>l<p?-1:l>p?1:0)(h[p],k[p]);return"asc"===m?S:-S})}(u,m,h);_=_.filter(L=>function T(l,p,m){return l.name.toLowerCase().includes(p.toLowerCase())||l.position.toLowerCase().includes(p.toLowerCase())||m.transform(l.salary).includes(p)||l.office.toLowerCase().includes(p.toLowerCase())||m.transform(l.extn).includes(p)||l.email.toLowerCase().includes(p.toLowerCase())}(L,j,this.pipe));const I=_.length;return _=_.slice((S-1)*k,(S-1)*k+k),(0,w.of)({Details:_,total:I})}static#t=this.\u0275fac=function(h){return new(h||l)(A.KVO(E.QX))};static#e=this.\u0275prov=A.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);