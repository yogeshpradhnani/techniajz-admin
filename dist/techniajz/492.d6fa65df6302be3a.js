"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[492,221],{1492:(V,M,m)=>{m.r(M),m.d(M,{LeadModule:()=>gt});var p=m(177),l=m(9417),I=m(9631),u=m(6911),b=m(9818),S=m(7960),k=m(7062),e=m(4438),v=m(2616),E=m(7575);function R(o,s){1&o&&e.nrm(0,"mat-progress-bar",1)}let w=(()=>{class o{constructor(t,i){this.sharedService=t,this.cdref=i}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(v.d),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-lead"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(i,n){1&i&&(e.DNE(0,R,1,0,"mat-progress-bar",0),e.nrm(1,"router-outlet")),2&i&&e.Y8G("ngIf",n.isLoading)},dependencies:[p.bT,k.n3,E.HM]})}return o})();var F=m(7673),y=m(2221),x=m(6536),c=m(5312);class f{constructor(s){this.formBuilder=s,this.formGroup=this.formBuilder.group({name:[null,[l.k0.required]],phone:[null,[l.k0.pattern("^[0-9]{10}$"),l.k0.required]],projectId:[null]})}}var g=m(1626);let h=(()=>{class o{constructor(t,i){this.sharedService=t,this.http=i}getLeadList(t){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/leadList",t,Headers)}getRemarkList(){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/remarkList")}leadFilter(t){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/leadFilter",t)}addEditLeadDetails(t,i){return this.sharedService.postRequest(i?c.c.adminUrl+"/Lead/editLead/"+i:c.c.adminUrl+"/Lead/createLead",t)}getLeadSourceList(){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/leadSourceList")}getleadLabelList(){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/leadLabel")}getProjectList(){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/projectList")}getPropertyTypeList(){return this.sharedService.getRequest(c.c.adminUrl+"/Projects/propertyType")}getLocationPreferenceList(){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/locationPreference")}getDropDroneList(){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/dropdrone")}getTimeLineList(){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/timeline")}getLeadDeatilsById(t){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/leadDetail/"+t)}getLeadActivity(t){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/leadTimelineList/"+t)}assignLead(t){return this.sharedService.postRequest(c.c.adminUrl+"/Lead/assignLead",t)}getEmpoyeeList(){return this.sharedService.getRequest(c.c.adminUrl+"/Projects/employeeList")}getAssignedEmployee(t){return this.sharedService.getRequest(c.c.adminUrl+"/Lead/assignedToEmployeeList/"+t)}closeLead(t){return this.sharedService.postRequest(c.c.adminUrl+"/salary/leadClose_addIncentive",t)}shuffleLead(t){return this.sharedService.postRequest(c.c.adminUrl+"/Lead/shuffleLead",t)}removeAssignedEmployee(t){return this.http.delete(c.c.adminUrl+"/Lead/deleteAssignedToEmployee/"+t)}changeStatus(t){return this.sharedService.postRequest(c.c.adminUrl+"/Lead/leadStatus/"+t)}addRemark(t){return this.sharedService.postRequest(c.c.adminUrl+"/Lead/addLeadTimeline",t)}createExcelLead(t){return this.sharedService.postRequest(c.c.adminUrl+"/Lead/createExcelLead",t)}getProjectDetail(t){return this.sharedService.getRequest(c.c.adminUrl+"/Projects/getProject/"+t)}getProjectDocuments(t,i){return this.sharedService.getRequest(c.c.adminUrl+"/Projects/projectImageList/"+t,i)}createLeadShareLink(t){return this.sharedService.postRequest(c.c.adminUrl+"/Lead/shareLead",t)}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(v.d),e.KVO(g.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function C(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",10),e.EFF(1),e.j41(2,"button",11),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.close())}),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}function j(o,s){1&o&&(e.j41(0,"div",24),e.EFF(1,"Name is required."),e.k0s())}function P(o,s){1&o&&(e.j41(0,"div",24),e.EFF(1,"Contact Number is required."),e.k0s())}function L(o,s){1&o&&(e.j41(0,"div",24),e.EFF(1,"Please enter a valid contact number."),e.k0s())}function T(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",9)(1,"div",12)(2,"div",13)(3,"label",14),e.EFF(4,"Select Project"),e.k0s(),e.nrm(5,"ng-select",15),e.k0s(),e.j41(6,"div",13)(7,"label",16),e.EFF(8," Name"),e.j41(9,"a",17),e.EFF(10,"*"),e.k0s()(),e.nrm(11,"input",18),e.DNE(12,j,2,0,"div",19),e.k0s(),e.j41(13,"div",13)(14,"label",20),e.EFF(15,"Contact Number"),e.j41(16,"a",17),e.EFF(17,"*"),e.k0s()(),e.nrm(18,"input",21),e.DNE(19,P,2,0,"div",19)(20,L,2,0,"div",19),e.k0s()(),e.j41(21,"div",22)(22,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createRemark())}),e.EFF(23,"Add Lead"),e.k0s()()()}if(2&o){let t,i,n;const a=e.XpG();e.Y8G("formGroup",a.addQuickLeadForm.formGroup),e.R7$(5),e.Y8G("items",a.projectList),e.R7$(7),e.Y8G("ngIf",(null==(t=a.addQuickLeadForm.formGroup.get("name"))?null:t.touched)&&(null==(t=a.addQuickLeadForm.formGroup.get("name"))||null==t.errors?null:t.errors.required)),e.R7$(7),e.Y8G("ngIf",(null==(i=a.addQuickLeadForm.formGroup.get("phone"))?null:i.touched)&&(null==(i=a.addQuickLeadForm.formGroup.get("phone"))||null==i.errors?null:i.errors.required)),e.R7$(),e.Y8G("ngIf",(null==(n=a.addQuickLeadForm.formGroup.get("phone"))?null:n.touched)&&(null==(n=a.addQuickLeadForm.formGroup.get("phone"))||null==n.errors?null:n.errors.pattern))}}function D(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",25),e.bIt("submit",function(n){e.eBV(t);const a=e.sdS(5);return e.XpG().addExcel(a),e.Njj(n.preventDefault())}),e.j41(1,"div",26)(2,"label",27),e.EFF(3,"Choose Image"),e.k0s(),e.nrm(4,"input",28,0),e.k0s(),e.j41(6,"div",29)(7,"a",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.downloadFile("Nirman.xlsx"))}),e.EFF(8,"Download Template"),e.k0s()(),e.j41(9,"div",31)(10,"button",32),e.EFF(11,"Import "),e.nrm(12,"i",33),e.k0s()()()}}let A=(()=>{class o{constructor(t,i,n,a,r){this.formBuilder=t,this.sharedService=i,this.leadService=n,this.datePipe=a,this.http=r,this.closeModal=new e.bkB,this.remarkList=[],this.projectList=[]}ngOnInit(){this.addQuickLeadForm=new f(this.formBuilder),this.getProjectList()}getProjectList(){this.leadService.getProjectList().subscribe(t=>{t&&t.success&&t.data&&(this.projectList=t&&t.data&&t.data.project?t.data.project:[])})}closeModel(){this.closeModal.emit()}close(){this.errorMessage=null}formatDate(t){return this.datePipe.transform(t,"dd/MM/yyyy HH:mm")||""}createRemark(){if(this.addQuickLeadForm.formGroup.valid){let t=0,i=this.addQuickLeadForm.formGroup.value;const n=new FormData;i=this.addQuickLeadForm.formGroup.value,Object.keys(this.addQuickLeadForm.formGroup.controls).forEach(a=>{i[a]&&n.append(a,i[a])}),this.sharedService.isError=!1,this.sharedService.isLoading=!0,this.leadService.addEditLeadDetails(n,t).subscribe(a=>{a&&a.success&&(this.sharedService.isLoading=!1,this.closeModel())},a=>{a.error&&(this.errorMessage=a.error.message),this.sharedService.isLoading=!1})}else this.errorMessage="Please fill out the required fields before submitting.",Object.keys(this.addQuickLeadForm.formGroup.controls).forEach(t=>{const i=this.addQuickLeadForm.formGroup.get(t);i?.markAsTouched(),i?.updateValueAndValidity()})}addExcel(t){const i=t.files?.[0]||null;if(this.sharedService.isLoading=!0,!i)return this.errorMessage="Please upload a file before submitting.",void(this.sharedService.isLoading=!1);const n=new FormData;n.append("leadFile",i),this.leadService.createExcelLead(n).subscribe(a=>{a.success?this.closeModel():this.errorMessage="Failed to upload data.",this.sharedService.isLoading=!1},a=>{this.errorMessage=a?.error?.message||"An error occurred while uploading data.",this.sharedService.isError=!0,this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1})}downloadFile(t){this.http.get(`assets/images/${t}`,{responseType:"blob"}).subscribe(n=>{const a=window.URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)},n=>{console.error("Download error:",n)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(l.ok),e.rXU(v.d),e.rXU(h),e.rXU(p.vh),e.rXU(g.Qq))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-add-quick-lead"]],inputs:{ProjectDetails:"ProjectDetails"},outputs:{closeModal:"closeModal"},features:[e.Jv_([p.vh])],decls:12,vars:3,consts:[["fileInput",""],[1,"modal-content"],[1,"modal-toggle-wrapper","text-start","dark-sign-up"],[1,"row","align-items-center"],["type","button","aria-label","Close",1,"btn-close","position-absolute","top-0","end-0","m-2","close-btn",3,"click"],[1,"col-12"],[1,"modal-header","justify-content-center","border-0","pb-0","m-0"],[1,"modal-body"],["class","alert alert-danger d-flex justify-content-between align-items-center",4,"ngIf"],[1,"table-responsive","theme-scroollbar",3,"formGroup"],[1,"alert","alert-danger","d-flex","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"justify-content-start","row","mx-0","mb-2"],[1,"form-group","mb-3"],["for","projectId",1,"form-label","btn-font"],["id","projectId","formControlName","projectId","bindLabel","name","bindValue","_id","placeholder","Select Project",1,"",3,"items"],["for","name",1,"form-label","btn-font"],[1,"font-danger"],["type","text","placeholder","Name","autocomplete","off","formControlName","name","id","name",1,"form-control"],["class","text text-danger mt-1",4,"ngIf"],["for","phone",1,"form-label","btn-font"],["type","number","placeholder","Contact Number","autocomplete","off","formControlName","phone","id","phone",1,"form-control"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","btn-block",3,"click"],[1,"text","text-danger","mt-1"],["id","imageForm","enctype","multipart/form-data",3,"submit"],[1,"form-group"],["for","imageFile",1,"form-label"],["type","file","name","imageFile","id","imageFile","accept",".xlsx","required","",1,"form-control"],[1,"form-group","mt-2"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"d-flex","justify-content-center","mt-2"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"fa","fa-file-excel-o"]],template:function(i,n){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),e.bIt("click",function(){return n.closeModel()}),e.k0s(),e.j41(4,"div",5)(5,"h3",6),e.EFF(6),e.k0s()()(),e.nrm(7,"hr"),e.j41(8,"div",7),e.DNE(9,C,3,1,"div",8)(10,T,24,5,"form",9)(11,D,13,0),e.k0s()()()),2&i&&(e.R7$(6),e.SpI(" ","quick"===n.ProjectDetails?"Add Quick Lead":"Import Excel"," "),e.R7$(3),e.Y8G("ngIf",n.errorMessage),e.R7$(),e.vxM(10,"quick"===n.ProjectDetails?10:"excel"===n.ProjectDetails?11:-1))},dependencies:[p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.cV,l.j4,l.JD,b.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}input[type=datetime-local][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}.close-btn[_ngcontent-%COMP%]{z-index:3}.alert[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]})}return o})();function Y(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",17),e.EFF(1),e.j41(2,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModel())}),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}function X(o,s){if(1&o&&(e.j41(0,"div",19)(1,"div",20)(2,"p")(3,"strong"),e.EFF(4,"Name:"),e.k0s()(),e.j41(5,"p",21),e.EFF(6),e.k0s()(),e.j41(7,"div",20)(8,"p")(9,"strong"),e.EFF(10,"Contact Number:"),e.k0s()(),e.j41(11,"p",21),e.EFF(12),e.k0s()(),e.j41(13,"div",20)(14,"p")(15,"strong"),e.EFF(16,"Mediator Contact Number:"),e.k0s()(),e.j41(17,"p",21),e.EFF(18),e.k0s()()()),2&o){const t=e.XpG();e.R7$(6),e.JRh(t.details.name||" "),e.R7$(6),e.JRh(t.details.contactNumber||" "),e.R7$(6),e.JRh(t.details.mediatorContactNumber||" ")}}function z(o,s){if(1&o&&(e.j41(0,"div",19)(1,"div",20)(2,"p")(3,"strong"),e.EFF(4,"Mediator Name:"),e.k0s()(),e.j41(5,"p",21),e.EFF(6),e.k0s()(),e.j41(7,"div",20)(8,"p")(9,"strong"),e.EFF(10,"Scheme Address:"),e.k0s()(),e.j41(11,"p",21),e.EFF(12),e.k0s()(),e.j41(13,"div",20)(14,"p")(15,"strong"),e.EFF(16,"Scheme Name:"),e.k0s()(),e.j41(17,"p",21),e.EFF(18),e.k0s()()()),2&o){const t=e.XpG();e.R7$(6),e.JRh(t.details.mediatorName||" "),e.R7$(6),e.JRh(t.details.schemeAddress||" "),e.R7$(6),e.JRh(t.details.schemeName||" ")}}function U(o,s){1&o&&(e.j41(0,"h3",22),e.EFF(1,"Choose Documents to share :"),e.k0s())}function q(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",23)(1,"div",24)(2,"h6",25),e.EFF(3),e.k0s(),e.j41(4,"div",26)(5,"input",27),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.check,n)||(a.check=n),e.Njj(n)}),e.k0s(),e.j41(6,"label",28),e.nrm(7,"img",29),e.k0s()()()()}if(2&o){const t=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.JRh(t.title),e.R7$(2),e.FS9("id",t._id),e.R50("ngModel",t.check),e.R7$(2),e.FS9("src",i.imageFullPath+t.file_,e.B4B)}}function J(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",23)(1,"div",24)(2,"h6",25),e.EFF(3),e.k0s(),e.j41(4,"div",26)(5,"input",27),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.check,n)||(a.check=n),e.Njj(n)}),e.k0s(),e.j41(6,"label",28),e.nrm(7,"img",29),e.k0s()()()()}if(2&o){const t=e.XpG().$implicit,i=e.XpG();e.R7$(3),e.JRh(t.title),e.R7$(2),e.FS9("id",t._id),e.R50("ngModel",t.check),e.R7$(2),e.Y8G("src","https://img.youtube.com/vi/"+i.getYouTubeVideoId(t.file_)+"/hqdefault.jpg",e.B4B)}}function Q(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",23)(1,"div",24)(2,"h6",25),e.EFF(3),e.k0s(),e.j41(4,"div",26)(5,"input",27),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.check,n)||(a.check=n),e.Njj(n)}),e.k0s(),e.j41(6,"label",28),e.nrm(7,"img",30),e.k0s()()()()}if(2&o){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.title),e.R7$(2),e.FS9("id",t._id),e.R50("ngModel",t.check)}}function H(o,s){if(1&o&&e.DNE(0,q,8,4,"div",23)(1,J,8,4)(2,Q,8,3),2&o){const t=s.$implicit;e.vxM(0,"image"===t.type?0:"youtube"===t.type?1:"pdf"===t.type?2:-1)}}function K(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createLeadLink())}),e.EFF(1,"Create Link"),e.k0s()}}function W(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",14)(1,"input",32),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.leadLink,n)||(a.leadLink=n),e.Njj(n)}),e.k0s(),e.j41(2,"div",33)(3,"button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.copyFunction(n.leadLink))}),e.EFF(4,"Copy"),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(),e.R50("ngModel",t.leadLink)}}let Z=(()=>{class o{constructor(t,i,n,a,r){this.formBuilder=t,this.sharedService=i,this.leadService=n,this.datePipe=a,this.http=r,this.closeModal=new e.bkB,this.remarkList=[],this.projectList=[],this.projectDocuments=[],this.imageFullPath=c.c.imageBaseUrl}ngOnInit(){this.getProjectList()}getProjectList(){this.leadService.getProjectList().subscribe(t=>{t&&t.success&&t.data&&(this.projectList=t&&t.data&&t.data.project?t.data.project:[])})}closeModel(){this.closeModal.emit()}projectSelect(t){this.getProjectDetail(t._id),this.getProjectDocuments(t._id)}getProjectDetail(t){this.sharedService.isLoading=!0,this.leadService.getProjectDetail(t).subscribe(i=>{(!i.data||null==typeof i.data.data)&&this.sharedService.displayServerMessage("Technical Error Occurred.","error");const n={leadId:this.ProjectDetails._id,projectId:t,...i.data?.data};this.details=n},i=>{i&&i.error&&("Unauthorized access."===i.error.message?this.sharedService.logOut():400!==i.status&&this.sharedService.displayServerMessage(i.error.message,"error")),this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1})}getProjectDocuments(t){this.leadService.getProjectDocuments(t).subscribe(i=>{i.success&&(this.projectDocuments=i.data.projectImages)})}getYouTubeVideoId(t){const n=t.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return n?n[1]:null}createLeadLink(){const t=[];this.projectDocuments.map(i=>{i.check&&t.push(i._id)}),this.details.projectDocuments=t,this.leadService.createLeadShareLink(this.details).subscribe(i=>{this.leadLink=i.data.shareURL})}copyFunction(t){navigator.clipboard.writeText(t),alert("Copied")}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(l.ok),e.rXU(v.d),e.rXU(h),e.rXU(p.vh),e.rXU(g.Qq))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-lead-share"]],inputs:{ProjectDetails:"ProjectDetails"},outputs:{closeModal:"closeModal"},features:[e.Jv_([p.vh])],decls:24,vars:8,consts:[[1,"modal-content"],[1,"modal-toggle-wrapper","text-start","dark-sign-up"],[1,"row","align-items-center"],["type","button","aria-label","Close",1,"btn-close","position-absolute","top-0","end-0","m-2","close-btn",3,"click"],[1,"col-12"],[1,"modal-header","justify-content-center","border-0","pb-0","m-0"],[1,"modal-body"],["class","alert alert-danger d-flex justify-content-between align-items-center",4,"ngIf"],[1,"form-group","mb-3"],["for","projectId",1,"form-label","btn-font"],["id","projectId","bindLabel","name","bindValue","_id","placeholder","Select Project",1,"custom-select",3,"ngModelChange","change","ngModel","items"],[1,"row","d-flex"],["class","col-6",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"alert","alert-danger","d-flex","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"col-6"],[1,"my-2","d-flex"],[1,"mx-2","form-label"],[1,"mb-2"],[1,"col-xxl-3","col-sm-6","img_div"],[1,"card-wrapper","border","rounded-3","checkbox-checked"],[1,"sub-title"],[1,"img-checkbox"],["type","checkbox",1,"main-img-cover","form-check-input",3,"ngModelChange","id","ngModel"],["for","img-check-1",1,"form-check-label","mb-0"],["alt","coffee-beans",1,"imageSize",3,"src"],["src","assets/images/logo/pdfLogo.svg","alt","coffee-beans",1,"imageSize"],[1,"btn","btn-primary",3,"click"],["id","leadLink","type","text","name","leadLink",1,"form-control","mt-3",3,"ngModelChange","ngModel"],[1,"mt-3","mx-2"],["type","button",1,"btn","btn-primary","btn-clipboard",3,"click"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.bIt("click",function(){return n.closeModel()}),e.k0s(),e.j41(4,"div",4)(5,"h3",5),e.EFF(6," Share Lead "),e.k0s()()(),e.nrm(7,"hr"),e.j41(8,"div",6),e.DNE(9,Y,3,1,"div",7),e.j41(10,"div",8)(11,"label",9),e.EFF(12,"Select Project"),e.k0s(),e.j41(13,"ng-select",10),e.mxI("ngModelChange",function(r){return e.DH7(n.projectId,r)||(n.projectId=r),r}),e.bIt("change",function(r){return n.projectSelect(r)}),e.k0s()(),e.j41(14,"div",11),e.DNE(15,X,19,3,"div",12)(16,z,19,3,"div",12),e.k0s(),e.j41(17,"div",11),e.DNE(18,U,2,0,"h3",13),e.Z7z(19,H,3,1,null,null,e.fX1),e.j41(21,"div",14),e.DNE(22,K,2,0,"button",15),e.k0s(),e.DNE(23,W,5,1,"div",16),e.k0s()()()()),2&i&&(e.R7$(9),e.Y8G("ngIf",n.errorMessage),e.R7$(4),e.R50("ngModel",n.projectId),e.Y8G("items",n.projectList),e.R7$(2),e.Y8G("ngIf",n.details),e.R7$(),e.Y8G("ngIf",n.details),e.R7$(2),e.Y8G("ngIf",n.projectDocuments.length>0),e.R7$(),e.Dyx(n.projectDocuments),e.R7$(3),e.Y8G("ngIf",n.projectId),e.R7$(),e.Y8G("ngIf",n.leadLink))},dependencies:[p.bT,l.me,l.Zm,l.BC,l.vS,b.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}input[type=datetime-local][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}.close-btn[_ngcontent-%COMP%]{z-index:3}.alert[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.imageSize[_ngcontent-%COMP%]{height:8rem;width:13rem}.img_delete[_ngcontent-%COMP%]{display:inline-flex;position:absolute;right:1px;top:4px;padding:4px 9px;border-radius:20px}.img_div[_ngcontent-%COMP%]{width:16rem;height:13rem}.img_hr[_ngcontent-%COMP%]{border-top:2px solid black!important;margin-bottom:.5rem}.modal-body[_ngcontent-%COMP%]{min-height:10rem!important}"]})}return o})();var ee=m(9652);const te=()=>["/","admin","lead","add-lead"],ne=(o,s)=>({"btn-outline-success":o,"btn-outline-danger":s}),ie=(o,s)=>({"icofont-check-circled":o,"icofont-close-circled":s});function oe(o,s){1&o&&e.nrm(0,"i",55)}function ae(o,s){1&o&&e.nrm(0,"i",56)}function re(o,s){1&o&&e.nrm(0,"i",57)}function se(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"th",43),e.EFF(2),e.k0s(),e.j41(3,"td"),e.nrm(4,"ngb-highlight",44),e.k0s(),e.j41(5,"td"),e.nrm(6,"ngb-highlight",44),e.k0s(),e.j41(7,"td"),e.DNE(8,oe,1,0,"i",45)(9,ae,1,0,"i",46)(10,re,1,0,"i",47),e.k0s(),e.j41(11,"td"),e.nrm(12,"ngb-highlight",44),e.k0s(),e.j41(13,"td")(14,"ul",48)(15,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.confirmStatusChange(n.isActive,n._id))}),e.nrm(16,"i",50),e.k0s(),e.j41(17,"button",51),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.redirectToDetails(null==n?null:n._id))}),e.nrm(18,"i",52),e.k0s(),e.j41(19,"button",53),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.openShareModal(n))}),e.nrm(20,"i",54),e.k0s()()()()}if(2&o){const t=s.$implicit,i=e.XpG();e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("result",t.phone)("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",i.formatDate(t.created.toString()))("term",i.service.searchTerm),e.R7$(2),e.Y8G("ngIf","Hot Leads"===(null==t.leadlabels[0]?null:t.leadlabels[0].name)),e.R7$(),e.Y8G("ngIf",t.startVisit),e.R7$(),e.Y8G("ngIf","Cold Leads"===(null==t.leadlabels[0]?null:t.leadlabels[0].name)),e.R7$(2),e.Y8G("result",t.unReadLeadTimelines.toString())("term",i.service.searchTerm),e.R7$(3),e.Y8G("ngClass",e.l_i(12,ne,!0===t.isActive,!0!==t.isActive)),e.R7$(),e.Y8G("ngClass",e.l_i(15,ie,t.isActive,!0!==t.isActive))}}function le(o,s){1&o&&(e.j41(0,"tr",38)(1,"td",58),e.EFF(2,"No records found"),e.k0s()())}function ce(o,s){if(1&o&&(e.j41(0,"option",59),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.description+" Items per page")}}let de=(()=>{class o{onTabOpened(t){this.tabId=t,this.getLeadList(this.tabId)}onRefreshData(){this.startdate="",this.enddate="",this.searchLead="",this.remark=null,this.employee=null,this.tabId=0,this.active=0,this.findData=!1,this.getLeadList(this.tabId)}constructor(t,i,n,a,r){this.service=t,this.sharedService=i,this.leadService=n,this.datePipe=a,this.modalService=r,this.active=0,this.pageIndex=c.k.page,this.pageSize=c.k.pageSize,this.paginationDisabled=!1,this.tabId=0,this.employeeList=[],this.topright=!1,this.date=new Date,this.startdate="",this.enddate="",this.remarkList=[],this.findData=!1,this.max=new Date,this.searchLead=""}ngOnInit(){history.state.active&&(this.active=history.state.active,this.tabId=history.state.active),this.getRemarkList(),this.getEmployeeList(),this.pageItemList=x.g1,this.getLeadList(this.tabId),this.max=this.sharedService.formatDate(this.max)}loadPage(t,i){this.pageSize=i,this.pageIndex=t,this.getLeadList(this.tabId)}getRemarkList(){this.leadService.getRemarkList().subscribe(t=>{t&&t.success&&t.data&&(this.remarkList=t&&t.data&&t.data.remark?t.data.remark:[])})}getEmployeeList(){this.leadService.getEmpoyeeList().subscribe(t=>{let i=[];for(let n of t.data.employee)i.push({_id:n._id,name:n.name});this.employeeList=i})}onFindDate(){this.findData=!0,this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.searchLead="",this.startdate||this.enddate||this.remark||this.employee?this.leadService.leadFilter({startDate:this.startdate,endDate:this.enddate,leadStatus:this.remark||"",name:this.employee||""}).subscribe({next:({data:a})=>{a&&null!=typeof a.lead?(this.tableData$=(0,F.of)(a?.lead),this.total$=(0,F.of)(a?.totalCount)):this.sharedService.displayServerMessage("Technical Error Occurred","error")},error:i=>{i&&i.error&&this.sharedService.displayServerMessage(i.error.message,"error"),this.resetLoadingState()},complete:()=>{this.resetLoadingState(!0)}}):this.getLeadList(this.tabId)}resetLoadingState(t=!1){this.sharedService.isLoading=!1,this.paginationDisabled=t,this.findData=!1}getLeadList(t){this.resetFilters();const i={pageNo:this.pageIndex,limit:this.pageSize,leadStatus:t||"",search:this.searchLead};this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.leadService.getLeadList(i).subscribe({next:({data:r})=>{!r||typeof r.lead>"u"?this.sharedService.displayServerMessage("Technical Error Occurred.","error"):(this.tableData$=(0,F.of)(r?.lead),this.total$=(0,F.of)(r?.totalCount))},error:n=>{this.handleError(n)},complete:()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0}})}redirectToDetails(t){try{const i=`admin/lead/lead-detail/${t}`;window.open(i,"_blank")}catch{window.alert("Technical Error Occurred.")}}resetFilters(){this.startdate="",this.enddate="",this.remark=null,this.employee=null}handleError(t){t&&t.error&&("Unauthorized access."===t.error.message?this.sharedService.logOut():this.sharedService.displayServerMessage(t.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1}formatDate(t){return this.datePipe.transform(t,"dd/MM/yyyy hh:mm a")||""}confirmStatusChange(t,i){void 0!==t&&void 0!==i&&this.sharedService.confirmBox("Are you sure?",`Do you really want to  ${t?"Inactivate ":"Activate "} this Lead?`).then(d=>{d&&this.leadService.changeStatus(i).subscribe(_=>{_&&_.success&&(this.sharedService.displayServerMessage(_.message,"success"),this.getLeadList(this.tabId))},_=>{_.error&&this.sharedService.displayServerMessage(_.error.message,"error")})})}onQuickLeadModal(t){const i=this.modalService.open(A,{size:"lg"});i.componentInstance.ProjectDetails=t,i.componentInstance.closeModal.subscribe(()=>{this.getLeadList(this.tabId),window.location.reload(),i.close()})}onShareLeadModal(t){const i=this.modalService.open(Z,{size:"xl"});i.componentInstance.ProjectDetails=t,i.componentInstance.closeModal.subscribe(()=>{this.getLeadList(this.tabId),i.close()})}openModal(t){this.onQuickLeadModal(t)}openShareModal(t){this.onShareLeadModal(t)}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(y.a),e.rXU(v.d),e.rXU(h),e.rXU(p.vh),e.rXU(u.Bq))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-lead-list"]],features:[e.Jv_([y.a,p.QX,p.vh])],decls:109,vars:40,consts:[["nav","ngbNav"],[1,"container-fluid"],[1,"card","card-width"],[1,"card-body"],[1,"row","justify-content-between","mb-2"],[1,"text-start","input-group",2,"width","40%"],["id","name","placeholder","Search Leads","type","text",1,"form-control","list-input",3,"ngModelChange","ngModel"],[1,"input-group-text","list-input",3,"click"],[1,"icofont","icofont-search"],[1,"col-md-7","text-end"],[1,"btn-group","mx-1"],[1,"btn","btn-outline-primary","mx-1",3,"click"],[1,"fa","fa-file-excel-o"],[3,"icon"],[1,"icon-reload"],[1,"btn","btn-outline-primary","mx-1",3,"routerLink"],[1,"icon-plus"],[1,"row","mt-2"],[1,"col-md-2","position-relative"],["for","currentDate",1,"form-label"],["id","startDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","max","ngModel"],[1,"col-md-2"],["for","eventId",1,"form-label"],["id","endDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","max","min","ngModel"],[1,"col-md-3"],["for","leadStatus",1,"form-label"],["id","leadStatus","bindLabel","name","bindValue","_id","placeholder","Lead Status",1,"custom-select",3,"ngModelChange","items","ngModel"],["id","leadStatus","bindLabel","name","bindValue","_id","placeholder","Assign Employee",1,"custom-select",3,"ngModelChange","items","ngModel"],[1,"col-md-2","pt-4"],[1,"btn","btn-primary",3,"click"],["id","myTab","ngbNav","",1,"simple-wrapper","nav","nav-tabs",3,"activeIdChange","activeId"],[1,"nav-item",3,"click","ngbNavItem"],["id","home-tab","ngbNavLink","",1,"nav-link","txt-primary"],[1,"nav-item","active",3,"click","ngbNavItem"],["id","inbox-tab","ngbNavLink","",1,"nav-link","txt-primary"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive","table-striped"],["scope","col"],[1,"odd"],[1,"d-flex","justify-content-between","p-2"],["name","pageSize",1,"form-select",2,"width","auto",3,"change","ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3",3,"pageChange","collectionSize","page","pageSize","disabled","maxSize"],["scope","row"],[3,"result","term"],["class","icofont icofont-fire-burn fire-icon mx-1","ngbTooltip","Hot Leads",4,"ngIf"],["class","icofont icofont-runner ice-icon mx-1","ngbTooltip","Visit Ongoing",4,"ngIf"],["class","icofont icofont-snow-alt ice-icon mx-1","ngbTooltip","Cold Leads",4,"ngIf"],[1,"action"],["ngbTooltip","Status",1,"btn-sm","btn-outline-primary","mx-1",3,"click","ngClass"],["ps-2","","sweet-5","",1,"icofont","px-1",3,"ngClass"],["ngbTooltip","Detail",1,"btn-sm","btn-outline-success","mx-1",3,"click"],[1,"icofont","icofont-eye-alt","px-1"],["ngbTooltip","Share",1,"btn-sm","btn-outline-success","mx-1",3,"click"],[1,"fa","fa-share","px-1"],["ngbTooltip","Hot Leads",1,"icofont","icofont-fire-burn","fire-icon","mx-1"],["ngbTooltip","Visit Ongoing",1,"icofont","icofont-runner","ice-icon","mx-1"],["ngbTooltip","Cold Leads",1,"icofont","icofont-snow-alt","ice-icon","mx-1"],["colspan","6",1,"dataTables_empty",2,"text-align","center"],[3,"value"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"input",6),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(n.searchLead,d)||(n.searchLead=d),e.Njj(d)}),e.k0s(),e.j41(6,"a",7),e.bIt("click",function(){return e.eBV(a),e.Njj(n.getLeadList(n.tabId))}),e.nrm(7,"i",8),e.k0s()(),e.j41(8,"div",9)(9,"div",10)(10,"button",11),e.bIt("click",function(){return e.eBV(a),e.Njj(n.openModal("excel"))}),e.EFF(11,"Import Excel "),e.nrm(12,"i",12),e.k0s()(),e.j41(13,"div",10)(14,"button",11),e.bIt("click",function(){return e.eBV(a),e.Njj(n.openModal("quick"))}),e.EFF(15,"Quick lead "),e.nrm(16,"app-feathericon",13),e.k0s()(),e.j41(17,"div",10)(18,"button",11),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onRefreshData())}),e.EFF(19,"Refresh "),e.nrm(20,"i",14),e.k0s()(),e.j41(21,"div",10)(22,"button",15),e.EFF(23,"Add "),e.nrm(24,"i",16),e.k0s()()()(),e.nrm(25,"hr"),e.j41(26,"div")(27,"div",17)(28,"div",18)(29,"label",19),e.EFF(30,"Start Date"),e.k0s(),e.j41(31,"input",20),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(n.startdate,d)||(n.startdate=d),e.Njj(d)}),e.k0s()(),e.j41(32,"div",21)(33,"label",22),e.EFF(34,"End Date"),e.k0s(),e.j41(35,"input",23),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(n.enddate,d)||(n.enddate=d),e.Njj(d)}),e.k0s()(),e.j41(36,"div",24)(37,"label",25),e.EFF(38,"Remarks"),e.k0s(),e.j41(39,"ng-select",26),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(n.remark,d)||(n.remark=d),e.Njj(d)}),e.k0s()(),e.j41(40,"div",24)(41,"label",25),e.EFF(42,"Assign Employee"),e.k0s(),e.j41(43,"ng-select",27),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(n.employee,d)||(n.employee=d),e.Njj(d)}),e.k0s()(),e.j41(44,"div",28)(45,"button",29),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onFindDate())}),e.nrm(46,"i",8),e.k0s()()()(),e.nrm(47,"hr"),e.j41(48,"ul",30,0),e.mxI("activeIdChange",function(d){return e.eBV(a),e.DH7(n.active,d)||(n.active=d),e.Njj(d)}),e.j41(50,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(0))}),e.j41(51,"a",32),e.EFF(52,"ALL"),e.k0s()(),e.j41(53,"li",33),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(2))}),e.j41(54,"a",34),e.EFF(55,"UPCOMING"),e.k0s()(),e.j41(56,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(1))}),e.j41(57,"a",34),e.EFF(58,"RUNNING"),e.k0s()(),e.j41(59,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(5))}),e.j41(60,"a",34),e.EFF(61,"HOT"),e.k0s()(),e.j41(62,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(4))}),e.j41(63,"a",34),e.EFF(64,"NEW"),e.k0s()(),e.j41(65,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(6))}),e.j41(66,"a",34),e.EFF(67,"Today's Visit"),e.k0s()(),e.j41(68,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(7))}),e.j41(69,"a",34),e.EFF(70,"Total Visit"),e.k0s()(),e.j41(71,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(8))}),e.j41(72,"a",34),e.EFF(73,"SHUFFLE"),e.k0s()(),e.j41(74,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(9))}),e.j41(75,"a",34),e.EFF(76,"ACTION"),e.k0s()(),e.j41(77,"li",31),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabOpened(3))}),e.j41(78,"a",34),e.EFF(79,"COMPLETED"),e.k0s()()(),e.j41(80,"form",35)(81,"table",36)(82,"thead")(83,"tr")(84,"th",37),e.EFF(85,"Name"),e.k0s(),e.j41(86,"th",37),e.EFF(87,"Contact Number"),e.k0s(),e.j41(88,"th",37),e.EFF(89,"Create"),e.k0s(),e.j41(90,"th",37),e.EFF(91,"Lead Label"),e.k0s(),e.j41(92,"th",37),e.EFF(93,"Remark"),e.k0s(),e.j41(94,"th",37),e.EFF(95,"Action"),e.k0s()()(),e.j41(96,"tbody"),e.Z7z(97,se,21,18,"tr",null,e.fX1,!1,le,3,0,"tr",38),e.nI1(100,"async"),e.k0s()(),e.j41(101,"div",39)(102,"select",40),e.bIt("change",function(){return e.eBV(a),e.Njj(n.loadPage(n.service.page,n.service.pageSize))}),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(n.service.pageSize,d)||(n.service.pageSize=d),e.Njj(d)}),e.DNE(103,ce,2,2,"option",41),e.k0s(),e.j41(104,"span"),e.EFF(105),e.nI1(106,"async"),e.k0s(),e.j41(107,"ngb-pagination",42),e.nI1(108,"async"),e.mxI("pageChange",function(d){return e.eBV(a),e.DH7(n.service.page,d)||(n.service.page=d),e.Njj(d)}),e.bIt("pageChange",function(){return e.eBV(a),e.Njj(n.loadPage(n.service.page,n.service.pageSize))}),e.k0s()()()()()()}2&i&&(e.R7$(5),e.R50("ngModel",n.searchLead),e.R7$(11),e.Y8G("icon","zap"),e.R7$(6),e.Y8G("routerLink",e.lJ4(39,te)),e.R7$(9),e.Y8G("max",n.max),e.R50("ngModel",n.startdate),e.R7$(4),e.Y8G("max",n.max)("min",n.startdate),e.R50("ngModel",n.enddate),e.R7$(4),e.Y8G("items",n.remarkList),e.R50("ngModel",n.remark),e.R7$(4),e.Y8G("items",n.employeeList),e.R50("ngModel",n.employee),e.R7$(5),e.R50("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",0),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(3),e.Y8G("ngbNavItem",1),e.R7$(3),e.Y8G("ngbNavItem",5),e.R7$(3),e.Y8G("ngbNavItem",4),e.R7$(3),e.Y8G("ngbNavItem",6),e.R7$(3),e.Y8G("ngbNavItem",7),e.R7$(3),e.Y8G("ngbNavItem",8),e.R7$(3),e.Y8G("ngbNavItem",9),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(20),e.Dyx(e.bMT(100,33,n.tableData$)),e.R7$(5),e.Y8G("disabled",!n.paginationDisabled),e.R50("ngModel",n.service.pageSize),e.R7$(),e.Y8G("ngForOf",n.pageItemList),e.R7$(2),e.SpI("Total: ",e.bMT(106,35,n.total$),""),e.R7$(2),e.Y8G("collectionSize",e.bMT(108,37,n.total$)),e.R50("page",n.service.page),e.Y8G("pageSize",n.service.pageSize)("disabled",!n.paginationDisabled)("maxSize",6))},dependencies:[p.YU,p.Sq,p.bT,k.Wk,ee.K,u.X9,u.sy,u.Gx,u.Ri,u.WA,u.s5,u.md,u.Qr,l.qT,l.xH,l.y7,l.me,l.wz,l.BC,l.cb,l.vS,l.cV,b.vr,p.Jj],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}.btn-sm[_ngcontent-%COMP%]{padding-top:3px}.fire-icon[_ngcontent-%COMP%]{color:red;font-size:x-large}.ice-icon[_ngcontent-%COMP%]{color:#0ff;font-size:x-large}"]})}return o})();class me{constructor(s){this.formBuilder=s,this.formGroup=this.formBuilder.group({name:[null,[l.k0.required]],phone:[null,[l.k0.pattern("^[0-9]{10}$"),l.k0.required]],alternate_number:["",[l.k0.pattern("^[0-9]{10}$")]],leadSources:[null],leadStatus:[null],propertyType:[null],locationpreferences:[null],budgetRange:[null],NumberOfBHK:[null],timeline:[null],comments:[""],leadLabel:[null],gender:[null],age:["",[l.k0.pattern("^[0-9]*$")]],yearlyIncome:["",[l.k0.pattern("^[0-9]*$")]],Occupation:[""],projectId:[null],workingProfile:[null],photo:[null],eMail:["",[l.k0.email]]})}}var pe=m(7468),O=m(5794);const ge=o=>({hidediv:o}),ue=o=>({show:o}),fe=o=>({"was-validated":o});function he(o,s){1&o&&(e.j41(0,"div",62),e.EFF(1," Name is required. "),e.k0s())}function _e(o,s){1&o&&(e.j41(0,"div",63),e.EFF(1," Enter valid phone number. "),e.k0s())}function be(o,s){1&o&&(e.j41(0,"div",62),e.EFF(1," Phone Number is required. "),e.k0s())}function ve(o,s){1&o&&(e.j41(0,"div",63),e.EFF(1," Enter valid mobile number. "),e.k0s())}function ke(o,s){1&o&&(e.j41(0,"div",63),e.EFF(1," Yearly Income must be valid. "),e.k0s())}function Le(o,s){1&o&&(e.j41(0,"div",63),e.EFF(1," Age must be valid. "),e.k0s())}function Ce(o,s){1&o&&(e.j41(0,"div",63),e.EFF(1," Enter valid email address. "),e.k0s())}function je(o,s){if(1&o&&(e.j41(0,"ng-option",64),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function Fe(o,s){if(1&o&&(e.j41(0,"ng-option",64),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}let G=(()=>{class o{constructor(t,i,n,a,r,d){this.formBuilder=t,this.route=i,this.http=n,this.sharedService=a,this.leadService=r,this.toastrService=d,this.active=1,this.validate=!1,this.isEditMode=!1,this.leadId=0,this.leadSourceList=[],this.budgetRangeList=[],this.propertyTypeList=[],this.timeLineList=[],this.bhkList=[],this.locationPreferencesList=[],this.leadLabelList=[],this.projectList=[],this.selectedFiles={}}ngOnInit(){this.genderTypeList=x.Hf,this.workingProfileTypeList=x.bi,this.fetchAllApi(),this.addEditLeadForm=new me(this.formBuilder),this.route.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.leadId=t.id||0)})}getLeadDeatilsById(t){this.leadService.getLeadDeatilsById(t).subscribe(i=>{if(i&&i.success&&i.data){const n=i&&i.data&&i.data.leadDetails&&i.data.leadDetails[0]?i.data.leadDetails[0]:{};this.addEditLeadForm.formGroup?.patchValue(n),this.addEditLeadForm.formGroup.patchValue({leadLabel:n?.leadlabels[0]?._id,projectId:n?.projects[0]?._id,timeline:n?.timelines[0]?._id,propertyType:n?.propertytypes[0]?._id,leadSources:n?.leadsources[0]?._id,NumberOfBHK:n?.propertyPreferences?.NumberOfBHK,budgetRange:n?.propertyPreferences?.budgetRange,locationpreferences:n?.locationpreferences[0]?._id})}this.sharedService.isLoading=!1},i=>{this.sharedService.isLoading=!1,i.error&&this.sharedService.displayServerMessage(i.error.message,"error")})}errorMsgShowed(t){const i=this.addEditLeadForm.formGroup?.get(t);return{"error-icon":i?.hasError("required")&&this.validate,"success-icon":!i?.hasError("required")&&this.validate,"error-shadow":i?.hasError("required")&&this.validate,"success-shadow":!i?.hasError("required")&&this.validate}}fetchAllApi(){(0,pe.p)({leadLabelList:this.leadService.getleadLabelList(),leadSourceList:this.leadService.getLeadSourceList(),projectList:this.leadService.getProjectList(),propertyTypeList:this.leadService.getPropertyTypeList(),dropDroneList:this.leadService.getDropDroneList(),locationPreferenceList:this.leadService.getLocationPreferenceList(),timeLineList:this.leadService.getTimeLineList()}).subscribe(({leadLabelList:t,leadSourceList:i,projectList:n,propertyTypeList:a,dropDroneList:r,locationPreferenceList:d,timeLineList:_})=>{this.leadSourceList=i&&i.data&&i.data.leadSource?i.data.leadSource:[],this.budgetRangeList=r&&r.data&&r.data.Budget?r.data.Budget:[],this.bhkList=r&&r.data&&r.data.bhk?r.data.bhk:[],this.propertyTypeList=a&&a.data&&a.data.propertyType?a.data.propertyType:[],this.locationPreferencesList=d&&d.data&&d.data.locationPreference?d.data.locationPreference:[],this.timeLineList=_&&_.data&&_.data.timeline?_.data.timeline:[],this.leadLabelList=t&&t.data&&t.data.leadLabel?t.data.leadLabel:[],this.projectList=n&&n.data&&n.data.project?n.data.project:[],this.leadId&&this.getLeadDeatilsById(this.leadId)})}onFileSelected(t){const i=t.target.files[0];if(i){const n=new FileReader;n.onload=()=>{this.selectedFiles={name:i.name,previewUrl:n.result}},n.readAsDataURL(i),this.addEditLeadForm.formGroup.get("photo")?.setValue(i)}}onSubmit(){if(this.validate=!0,this.errorMsg=null,this.addEditLeadForm.formGroup.valid){this.validate=!1;let t=this.addEditLeadForm.formGroup.value;const i=new FormData;t=this.addEditLeadForm.formGroup.value,Object.keys(this.addEditLeadForm.formGroup.controls).forEach(n=>{t[n]&&i.append(n,t[n])}),this.sharedService.isError=!1,this.sharedService.isLoading=!0,this.leadService.addEditLeadDetails(i,this.leadId).subscribe(n=>{n&&n.success&&(this.sharedService.isLoading=!1,this.sharedService.goBack())},n=>{n.error&&(this.errorMsg=n.error.message),this.sharedService.isLoading=!1})}}goBack(){this.sharedService.goBack()}close(){this.errorMsg=null}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(l.ok),e.rXU(k.nX),e.rXU(g.Qq),e.rXU(v.d),e.rXU(h),e.rXU(O.tw))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-add-edit-lead"]],decls:112,vars:29,consts:[[1,"container-fluid"],[1,"card"],[1,"row","justify-content-between","m-3"],[1,"col-md-2","btn-group","text-start"],[1,"col-md-2","text-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"icofont","icofont-arrow-left"],[1,"card-body"],[1,"card-body","toast-rtl",3,"ngClass"],[1,"toast","default-show-toast","align-items-center","text-light","bg-danger","border-0","fade",3,"ngClass"],[1,"d-flex","justify-content-between"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],["novalidate","",1,"row","g-3","needs-validation","custom-input","table-responsive","theme-scroollbar",3,"formGroup","ngClass"],[1,"col-md-4"],["for","name",1,"form-label"],[1,"text-danger"],["id","name","placeholder","Full Name","type","text","formControlName","name","required","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","phone",1,"form-label"],["type","number","id","phone","placeholder","Phone Number","autocomplete","off","formControlName","phone","required","","pattern","[0-9]{10}$",1,"form-control"],["class","error-msg",4,"ngIf"],["for","alternate_number",1,"form-label"],["type","number","placeholder","Alternate Number","autocomplete","off","id","alternate_number","formControlName","alternate_number","pattern","[0-9]{10}$",1,"form-control"],["for","yearlyIncome",1,"form-label"],["type","text","id","yearlyIncome","placeholder","Yearly Income","autocomplete","off","formControlName","yearlyIncome","pattern","^[0-9]*$",1,"form-control"],["for","gender",1,"form-label"],["id","gender","bindLabel","description","bindValue","value","formControlName","gender","placeholder","Select Gender",3,"items"],["for","age",1,"form-label"],["type","text","id","age","placeholder","Age","autocomplete","off","formControlName","age","pattern","^[0-9]*$",1,"form-control"],["for","eMail",1,"form-label"],["type","text","placeholder","Email","autocomplete","off","id","eMail","formControlName","eMail",1,"form-control"],["for","leadSources",1,"form-label"],["id","leadSources","bindLabel","name","bindValue","_id","id","leadSources","formControlName","leadSources","placeholder","Select Lead Source",3,"items"],["for","budgetRange",1,"form-label"],["id","budgetRange","formControlName","budgetRange","placeholder","Select Budget Range"],[3,"value",4,"ngFor","ngForOf"],["for","propertyType",1,"form-label"],["id","propertyType","bindLabel","name","bindValue","_id","formControlName","propertyType","placeholder","Select Type Of Property",3,"items"],["for","locationpreferences",1,"form-label"],["id","locationpreferences","bindLabel","name","bindValue","_id","formControlName","locationpreferences","placeholder","Select Location Perference",3,"items"],["for","NumberOfBHK",1,"form-label"],["id","NumberOfBHK","formControlName","NumberOfBHK","placeholder","Select Number Of BHK"],["for","timeline",1,"form-label"],["id","timeline","bindLabel","name","bindValue","_id","formControlName","timeline","placeholder","Select Time Lines",3,"items"],["for","leadLabel",1,"form-label"],["id","leadLabel","bindLabel","name","bindValue","_id","formControlName","leadLabel","placeholder","Select Lead Label",3,"items"],["for","workingProfile",1,"form-label"],["id","workingProfile","bindLabel","description","bindValue","value","formControlName","workingProfile","placeholder","Select Working Profile",3,"items"],["for","Occupation",1,"form-label"],["id","Occupation","placeholder","Occupation","type","text","formControlName","Occupation",1,"form-control"],["for","projectId",1,"form-label"],["id","projectId","bindLabel","name","bindValue","_id","formControlName","projectId","placeholder","Select Project",3,"items"],["for","photo",1,"form-label"],["id","photo","type","file","accept",".jpg, .jpeg, .png",1,"form-control",3,"change"],[1,"col-md-12"],["for","comments",1,"form-label"],["id","comments","formControlName","comments",1,"form-control",3,"change"],[1,"mt-3","d-flex","justify-content-center"],[1,"col-md-1","mx-1"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"d-flex","justify-content-center","sd-error"],[1,"invalid-feedback"],[1,"error-msg"],[3,"value"]],template:function(i,n){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"div",3),e.j41(4,"div",4)(5,"button",5),e.bIt("click",function(){return n.goBack()}),e.EFF(6,"Back "),e.nrm(7,"i",6),e.k0s()()(),e.nrm(8,"hr"),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),e.EFF(14),e.k0s(),e.j41(15,"button",12),e.bIt("click",function(){return n.close()}),e.k0s()()()(),e.j41(16,"form",13)(17,"div",14)(18,"label",15),e.EFF(19,"Full Name"),e.j41(20,"a",16),e.EFF(21,"*"),e.k0s()(),e.nrm(22,"input",17),e.DNE(23,he,2,0,"div",18),e.k0s(),e.j41(24,"div",14)(25,"label",19),e.EFF(26,"Phone Number"),e.j41(27,"a",16),e.EFF(28,"*"),e.k0s()(),e.nrm(29,"input",20),e.DNE(30,_e,2,0,"div",21)(31,be,2,0,"div",18),e.k0s(),e.j41(32,"div",14)(33,"label",22),e.EFF(34,"Alternate Number"),e.k0s(),e.nrm(35,"input",23),e.DNE(36,ve,2,0,"div",21),e.k0s(),e.j41(37,"div",14)(38,"label",24),e.EFF(39,"Yearly Income"),e.k0s(),e.nrm(40,"input",25),e.DNE(41,ke,2,0,"div",21),e.k0s(),e.j41(42,"div",14)(43,"label",26),e.EFF(44,"Gender"),e.k0s(),e.nrm(45,"ng-select",27),e.k0s(),e.j41(46,"div",14)(47,"label",28),e.EFF(48,"Age"),e.k0s(),e.nrm(49,"input",29),e.DNE(50,Le,2,0,"div",21),e.k0s(),e.j41(51,"div",14)(52,"label",30),e.EFF(53,"Email"),e.k0s(),e.nrm(54,"input",31),e.DNE(55,Ce,2,0,"div",21),e.k0s(),e.j41(56,"div",14)(57,"label",32),e.EFF(58,"Lead Source"),e.k0s(),e.nrm(59,"ng-select",33),e.k0s(),e.j41(60,"div",14)(61,"label",34),e.EFF(62,"Budget Range"),e.k0s(),e.j41(63,"ng-select",35),e.DNE(64,je,2,2,"ng-option",36),e.k0s()(),e.j41(65,"div",14)(66,"label",37),e.EFF(67,"Type Of Property"),e.k0s(),e.nrm(68,"ng-select",38),e.k0s(),e.j41(69,"div",14)(70,"label",39),e.EFF(71,"Location Perference"),e.k0s(),e.nrm(72,"ng-select",40),e.k0s(),e.j41(73,"div",14)(74,"label",41),e.EFF(75,"Number Of BHK"),e.k0s(),e.j41(76,"ng-select",42),e.DNE(77,Fe,2,2,"ng-option",36),e.k0s()(),e.j41(78,"div",14)(79,"label",43),e.EFF(80,"TimeLines"),e.k0s(),e.nrm(81,"ng-select",44),e.k0s(),e.j41(82,"div",14)(83,"label",45),e.EFF(84,"Lead Label"),e.k0s(),e.nrm(85,"ng-select",46),e.k0s(),e.j41(86,"div",14)(87,"label",47),e.EFF(88,"Working Profile"),e.k0s(),e.nrm(89,"ng-select",48),e.k0s(),e.j41(90,"div",14)(91,"label",49),e.EFF(92,"Occupation"),e.k0s(),e.nrm(93,"input",50),e.k0s(),e.j41(94,"div",14)(95,"label",51),e.EFF(96,"Select Project"),e.k0s(),e.nrm(97,"ng-select",52),e.k0s(),e.j41(98,"div",14)(99,"label",53),e.EFF(100,"Add Image"),e.k0s(),e.j41(101,"input",54),e.bIt("change",function(r){return n.onFileSelected(r)}),e.k0s()(),e.j41(102,"div",55)(103,"label",56),e.EFF(104,"Comments"),e.k0s(),e.j41(105,"textarea",57),e.bIt("change",function(r){return n.onFileSelected(r)}),e.EFF(106," "),e.k0s()(),e.j41(107,"div",58)(108,"div",59)(109,"button",60),e.bIt("click",function(){return n.onSubmit()}),e.EFF(110),e.k0s()()(),e.nrm(111,"div",61),e.k0s()()()()),2&i){let a,r,d,_,N,$,B;e.R7$(10),e.Y8G("ngClass",e.eq3(23,ge,!n.errorMsg)),e.R7$(),e.Y8G("ngClass",e.eq3(25,ue,n.errorMsg)),e.R7$(3),e.JRh(n.errorMsg),e.R7$(2),e.Y8G("formGroup",n.addEditLeadForm.formGroup)("ngClass",e.eq3(27,fe,n.validate)),e.R7$(7),e.Y8G("ngIf",null==(a=n.addEditLeadForm.formGroup.get("name"))?null:a.hasError("required")),e.R7$(7),e.Y8G("ngIf",null==(r=n.addEditLeadForm.formGroup.get("phone"))?null:r.hasError("pattern")),e.R7$(),e.Y8G("ngIf",null==(d=n.addEditLeadForm.formGroup.get("phone"))?null:d.hasError("required")),e.R7$(5),e.Y8G("ngIf",null==(_=n.addEditLeadForm.formGroup.get("alternate_number"))?null:_.hasError("pattern")),e.R7$(5),e.Y8G("ngIf",null==(N=n.addEditLeadForm.formGroup.get("yearlyIncome"))?null:N.hasError("pattern")),e.R7$(4),e.Y8G("items",n.genderTypeList),e.R7$(5),e.Y8G("ngIf",null==($=n.addEditLeadForm.formGroup.get("age"))?null:$.hasError("pattern")),e.R7$(5),e.Y8G("ngIf",null==(B=n.addEditLeadForm.formGroup.get("eMail"))?null:B.hasError("email")),e.R7$(4),e.Y8G("items",n.leadSourceList),e.R7$(5),e.Y8G("ngForOf",n.budgetRangeList),e.R7$(4),e.Y8G("items",n.propertyTypeList),e.R7$(4),e.Y8G("items",n.locationPreferencesList),e.R7$(5),e.Y8G("ngForOf",n.bhkList),e.R7$(4),e.Y8G("items",n.timeLineList),e.R7$(4),e.Y8G("items",n.leadLabelList),e.R7$(4),e.Y8G("items",n.workingProfileTypeList),e.R7$(8),e.Y8G("items",n.projectList),e.R7$(13),e.JRh(n.isEditMode?"Update":"Submit")}},dependencies:[p.YU,p.Sq,p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.YS,l.R_,l.j4,l.JD,b.vr,b.xt],styles:[".hidediv[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.form_lable[_ngcontent-%COMP%]{margin-top:0;width:50%;height:100%;margin-left:1px;margin-right:1px;background-color:transparent;top:0}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-sizing:border-box;outline:0;padding:.75rem;position:relative;width:100%}"]})}return o})();class ye{constructor(s){this.formBuilder=s,this.formGroup=this.formBuilder.group({remark:[null,[l.k0.required]],scheduleDate:["",[l.k0.required]],comment:[""],projectId:[null],leadFile:[""]})}}function xe(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",26),e.EFF(1),e.j41(2,"button",27),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModel())}),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}function Me(o,s){1&o&&(e.j41(0,"div",28),e.EFF(1,"This field is required."),e.k0s())}function Ee(o,s){1&o&&(e.j41(0,"div",28),e.EFF(1,"This field is required."),e.k0s())}let Ie=(()=>{class o{constructor(t,i,n,a){this.formBuilder=t,this.sharedService=i,this.leadService=n,this.datePipe=a,this.closeModal=new e.bkB,this.remarkList=[],this.projectList=[]}ngOnInit(){this.addRemarkForm=new ye(this.formBuilder),this.getRemarkList(),this.getProjectList()}getRemarkList(){this.leadService.getRemarkList().subscribe(t=>{t&&t.success&&t.data&&(this.remarkList=t&&t.data&&t.data.remark?t.data.remark:[])})}getProjectList(){this.leadService.getProjectList().subscribe(t=>{t&&t.success&&t.data&&(this.projectList=t&&t.data&&t.data.project?t.data.project:[])})}closeModel(){this.closeModal.emit()}formatDate(t){return this.datePipe.transform(t,"dd/MM/yyyy HH:mm")||""}createRemark(){if(this.addRemarkForm.formGroup.valid){let t=this.addRemarkForm.formGroup.value;t.scheduleDate=this.formatDate(t.scheduleDate),t.LeadId=this.ProjectDetails;const i=new FormData;Object.keys(t).forEach(a=>{i.append(a,t[a])});const n=document.getElementById("endDate");n&&n.files&&n.files.length>0&&i.append("leadFile",n.files[0]),this.leadService.addRemark(i).subscribe(a=>{a.success&&this.closeModel()},a=>{this.errorMessage=a?.error?.message,this.sharedService.isError=!0,this.sharedService.isLoading=!1},()=>this.sharedService.isLoading=!1)}else this.errorMessage="Please fill out the required fields before submitting.",Object.keys(this.addRemarkForm.formGroup.controls).forEach(t=>{const i=this.addRemarkForm.formGroup.get(t);i?.markAsTouched(),i?.updateValueAndValidity()})}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(l.ok),e.rXU(v.d),e.rXU(h),e.rXU(p.vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-add-remark"]],inputs:{ProjectDetails:"ProjectDetails"},outputs:{closeModal:"closeModal"},features:[e.Jv_([p.vh])],decls:42,vars:6,consts:[[1,"modal-content"],[1,"modal-toggle-wrapper","text-start","dark-sign-up"],[1,"row","align-items-center"],["type","button","aria-label","Close",1,"btn-close","position-absolute","top-0","end-0","m-2","close-btn",3,"click"],[1,"col-12"],[1,"modal-header","justify-content-center","border-0","pb-0","m-0"],[1,"modal-body"],["class","alert alert-danger d-flex justify-content-between align-items-center",4,"ngIf"],[1,"table-responsive","theme-scroollbar",3,"formGroup"],[1,"justify-content-start","row","mx-0","mb-2"],[1,"form-group","mb-3"],["for","startDate",1,"form-label","btn-font"],[1,"font-danger"],["id","leadStatus","formControlName","remark","bindLabel","name","bindValue","_id","placeholder","Select Remark",1,"custom-select",3,"items"],["class","text text-danger mt-1",4,"ngIf"],["for","endDate",1,"form-label","btn-font"],["type","file","placeholder","Select Image","autocomplete","off","formControlName","leadFile","id","endDate",1,"form-control"],["for","occasion",1,"form-label","btn-font"],["type","datetime-local","placeholder","occasion","autocomplete","off","formControlName","scheduleDate","id","occasion",1,"form-control"],["for","projectId",1,"form-label","btn-font"],["id","projectId","formControlName","projectId","bindLabel","name","bindValue","_id","placeholder","Select Project",1,"custom-select",3,"items"],[1,"col-md-12"],["for","comments",1,"form-label"],["id","comments","formControlName","comment",1,"form-control"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","btn-block",3,"click"],[1,"alert","alert-danger","d-flex","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"text","text-danger","mt-1"]],template:function(i,n){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.bIt("click",function(){return n.closeModel()}),e.k0s(),e.j41(4,"div",4)(5,"h3",5),e.EFF(6," Add Remark "),e.k0s()()(),e.nrm(7,"hr"),e.j41(8,"div",6),e.DNE(9,xe,3,1,"div",7),e.j41(10,"form",8)(11,"div",9)(12,"div",10)(13,"label",11),e.EFF(14,"Remark Name"),e.j41(15,"a",12),e.EFF(16,"*"),e.k0s()(),e.nrm(17,"ng-select",13),e.DNE(18,Me,2,0,"div",14),e.k0s(),e.j41(19,"div",10)(20,"label",15),e.EFF(21,"Selfie"),e.k0s(),e.nrm(22,"input",16),e.k0s(),e.j41(23,"div",10)(24,"label",17),e.EFF(25,"Schedule Date"),e.j41(26,"a",12),e.EFF(27,"*"),e.k0s()(),e.nrm(28,"input",18),e.DNE(29,Ee,2,0,"div",14),e.k0s(),e.j41(30,"div",10)(31,"label",19),e.EFF(32,"Select Project"),e.k0s(),e.nrm(33,"ng-select",20),e.k0s(),e.j41(34,"div",21)(35,"label",22),e.EFF(36,"Comments"),e.k0s(),e.j41(37,"textarea",23),e.EFF(38,"                    "),e.k0s()()(),e.j41(39,"div",24)(40,"button",25),e.bIt("click",function(){return n.createRemark()}),e.EFF(41,"Add Remark"),e.k0s()()()()()()),2&i){let a,r;e.R7$(9),e.Y8G("ngIf",n.errorMessage),e.R7$(),e.Y8G("formGroup",n.addRemarkForm.formGroup),e.R7$(7),e.Y8G("items",n.remarkList),e.R7$(),e.Y8G("ngIf",(null==(a=n.addRemarkForm.formGroup.get("remark"))?null:a.touched)&&(null==(a=n.addRemarkForm.formGroup.get("remark"))||null==a.errors?null:a.errors.required)),e.R7$(11),e.Y8G("ngIf",(null==(r=n.addRemarkForm.formGroup.get("scheduleDate"))?null:r.touched)&&(null==(r=n.addRemarkForm.formGroup.get("scheduleDate"))||null==r.errors?null:r.errors.required)),e.R7$(4),e.Y8G("items",n.projectList)}},dependencies:[p.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,b.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}input[type=datetime-local][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}.close-btn[_ngcontent-%COMP%]{z-index:3}.alert[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]})}return o})();const Se=o=>["/","admin","lead","edit-lead",o];function Re(o,s){if(1&o&&(e.j41(0,"button",19),e.EFF(1,"Edit "),e.nrm(2,"i",20),e.k0s()),2&o){const t=e.XpG();e.Y8G("routerLink",e.eq3(1,Se,null==t.leadInfo?null:t.leadInfo._id))}}function we(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openModal())}),e.EFF(1,"Add Remark "),e.nrm(2,"i",20),e.k0s()}}function Pe(o,s){if(1&o&&e.nrm(0,"div",35),2&o){const t=e.XpG().$implicit;e.AVh("activity-line-image",t.leadFile)}}function Te(o,s){if(1&o&&(e.j41(0,"p",36)(1,"strong"),e.EFF(2,"Comment : "),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.comment,"")}}function De(o,s){if(1&o&&(e.j41(0,"p",36)(1,"strong"),e.EFF(2,"Date and Time : "),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(3),e.SpI(" ",i.parseCommentDateTime(t.comment),"")}}function Oe(o,s){if(1&o&&(e.j41(0,"p",36)(1,"strong"),e.EFF(2,"Duration : "),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(3),e.SpI(" ",i.parseCommentDuration(t.comment),"")}}function Ge(o,s){if(1&o&&(e.j41(0,"p",36)(1,"strong"),e.EFF(2,"Phone Number : "),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(3),e.SpI(" ",i.parseCommentPhoneNumber(t.comment),"")}}function Ne(o,s){if(1&o&&(e.j41(0,"p",36)(1,"strong"),e.EFF(2,"Type : "),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(3),e.SpI(" ",i.parseCommentType(t.comment),"")}}function $e(o,s){if(1&o&&(e.j41(0,"div",25),e.DNE(1,Pe,1,2,"div",26),e.nrm(2,"div",27),e.j41(3,"div",28)(4,"p",29)(5,"span",30),e.EFF(6),e.k0s(),e.j41(7,"span",31),e.EFF(8),e.k0s(),e.nrm(9,"span",32),e.k0s(),e.j41(10,"span",33),e.EFF(11),e.k0s(),e.DNE(12,Te,4,1,"p",34)(13,De,4,1,"p",34)(14,Oe,4,1,"p",34)(15,Ge,4,1,"p",34)(16,Ne,4,1,"p",34),e.k0s()()),2&o){const t=s.$implicit,i=s.index,n=e.XpG(2);e.R7$(),e.Y8G("ngIf",i<n.activityData.length-1),e.R7$(5),e.JRh(t.senderId.name),e.R7$(2),e.JRh(n.setLeadTime(t.leadDate.toString())),e.R7$(3),e.SpI("Lead Name: ",null==t.LeadId?null:t.LeadId.name,""),e.R7$(),e.Y8G("ngIf","Contacted"!==(null==t.remark?null:t.remark.name)),e.R7$(),e.Y8G("ngIf","Contacted"===(null==t.remark?null:t.remark.name)),e.R7$(),e.Y8G("ngIf","Contacted"===(null==t.remark?null:t.remark.name)),e.R7$(),e.Y8G("ngIf","Contacted"===(null==t.remark?null:t.remark.name)),e.R7$(),e.Y8G("ngIf","Contacted"===(null==t.remark?null:t.remark.name))}}function Be(o,s){1&o&&(e.qex(0),e.j41(1,"table",37)(2,"tbody")(3,"tr")(4,"td",38),e.EFF(5,"No Record Found"),e.k0s()()()(),e.bVm())}function Ve(o,s){if(1&o&&(e.j41(0,"div",21)(1,"div",22),e.DNE(2,$e,17,9,"div",23)(3,Be,6,0,"ng-container",24),e.k0s()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.activityData),e.R7$(),e.Y8G("ngIf",0==t.activityData.length)}}function Ae(o,s){if(1&o&&(e.j41(0,"div",40)(1,"div",41)(2,"p",42),e.EFF(3,"Name :"),e.k0s(),e.j41(4,"p",43),e.EFF(5),e.k0s()(),e.j41(6,"div",41)(7,"p",42),e.EFF(8,"Project :"),e.k0s(),e.j41(9,"p",44),e.EFF(10),e.k0s()(),e.j41(11,"div",41)(12,"p",42),e.EFF(13,"Contact No :"),e.k0s(),e.j41(14,"p",43),e.EFF(15),e.k0s()(),e.j41(16,"div",41)(17,"p",42),e.EFF(18,"Location Prefrence :"),e.k0s(),e.j41(19,"p",44),e.EFF(20),e.k0s()(),e.j41(21,"div",41)(22,"p",42),e.EFF(23,"Budget :"),e.k0s(),e.j41(24,"p",44),e.EFF(25),e.k0s()(),e.j41(26,"div",41)(27,"p",42),e.EFF(28,"Working Profile :"),e.k0s(),e.j41(29,"p",43),e.EFF(30),e.k0s()(),e.j41(31,"div",41)(32,"p",42),e.EFF(33,"Remark :"),e.k0s(),e.j41(34,"p",43),e.EFF(35),e.k0s()()(),e.j41(36,"div",40)(37,"div",41)(38,"p",42),e.EFF(39,"Yearly Income :"),e.k0s(),e.j41(40,"p",44),e.EFF(41),e.k0s()(),e.j41(42,"div",41)(43,"p",42),e.EFF(44,"Total Amount :"),e.k0s(),e.j41(45,"p",44),e.EFF(46),e.k0s()(),e.j41(47,"div",41)(48,"p",42),e.EFF(49,"Type Of Property :"),e.k0s(),e.j41(50,"p",43),e.EFF(51),e.k0s()(),e.j41(52,"div",41)(53,"p",42),e.EFF(54,"Timelines :"),e.k0s(),e.j41(55,"p",43),e.EFF(56),e.k0s()(),e.j41(57,"div",41)(58,"p",42),e.EFF(59,"Size :"),e.k0s(),e.j41(60,"p",44),e.EFF(61),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(5),e.JRh(t.leadInfo.name),e.R7$(5),e.JRh(null==t.leadInfo.projects[0]?null:t.leadInfo.projects[0].name),e.R7$(5),e.JRh(t.leadInfo.phone),e.R7$(5),e.JRh(null==t.leadInfo.locationpreferences[0]?null:t.leadInfo.locationpreferences[0].name),e.R7$(5),e.JRh(t.leadInfo.propertyPreferences.budgetRange),e.R7$(5),e.JRh(t.leadInfo.workingProfile),e.R7$(5),e.JRh(t.leadInfo.comments),e.R7$(6),e.JRh(t.leadInfo.yearlyIncome),e.R7$(5),e.JRh(t.leadInfo.price),e.R7$(5),e.JRh(null==t.leadInfo.propertytypes[0]?null:t.leadInfo.propertytypes[0].name),e.R7$(5),e.JRh(null==t.leadInfo.timelines[0]?null:t.leadInfo.timelines[0].name),e.R7$(5),e.JRh(t.leadInfo.propertyPreferences.NumberOfBHK)}}function Ye(o,s){1&o&&(e.j41(0,"tr",45)(1,"td",46),e.EFF(2,"No records found"),e.k0s()())}function Xe(o,s){if(1&o&&(e.j41(0,"div",39),e.DNE(1,Ae,62,12)(2,Ye,3,0),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.vxM(1,t.leadInfo?1:2)}}function ze(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",54),e.nrm(1,"br"),e.j41(2,"button",55),e.bIt("click",function(){e.eBV(t);const n=e.XpG(4);return e.Njj(n.shuffleLead())}),e.EFF(3),e.k0s()()}if(2&o){const t=e.XpG(4);e.R7$(3),e.SpI("Shuffle with ",null==t.assignedId.assignTo?null:t.assignedId.assignTo.name,"")}}function Ue(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",50)(1,"div",51)(2,"label"),e.EFF(3,"Select Employee"),e.k0s(),e.j41(4,"ng-select",52),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(3);return e.DH7(a.employeeId,n)||(a.employeeId=n),e.Njj(n)}),e.k0s()(),e.DNE(5,ze,4,1,"div",53),e.k0s()}if(2&o){const t=e.XpG(3);e.R7$(4),e.Y8G("items",t.employeeList),e.R50("ngModel",t.employeeId),e.R7$(),e.Y8G("ngIf",t.employeeId)}}function qe(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",57)(4,"button",6),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(4);return e.Njj(a.startShuffle(n))}),e.EFF(5,"Shuffle "),e.nrm(6,"i",58),e.k0s(),e.j41(7,"button",59),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(4);return e.Njj(a.confirmRemoveEmployee(n._id))}),e.EFF(8,"Remove"),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.SpI(" ",null==t.assignTo?null:t.assignTo.name," ")}}function Je(o,s){if(1&o&&(e.qex(0),e.DNE(1,qe,9,1,"tr",56),e.bVm()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.assignedEmployee)}}function Qe(o,s){1&o&&(e.qex(0),e.j41(1,"tr")(2,"td",38),e.EFF(3,"No Record Found"),e.k0s()(),e.bVm())}function He(o,s){if(1&o&&(e.DNE(0,Ue,6,3,"div",47),e.j41(1,"table",37)(2,"thead")(3,"tr")(4,"th",48),e.EFF(5,"Employee Name"),e.k0s(),e.j41(6,"th",49),e.EFF(7,"Action"),e.k0s()()(),e.j41(8,"tbody"),e.DNE(9,Je,2,1,"ng-container",24)(10,Qe,4,0,"ng-container",24),e.k0s()()),2&o){const t=e.XpG(2);e.Y8G("ngIf",t.isShuffle),e.R7$(9),e.Y8G("ngIf",t.assignedEmployee.length>0),e.R7$(),e.Y8G("ngIf",0==t.assignedEmployee.length)}}function Ke(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",12)(1,"a",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onTabLoad(3))}),e.EFF(2,"Shuffle"),e.k0s(),e.DNE(3,He,11,3,"ng-template",14),e.k0s()}2&o&&e.Y8G("ngbNavItem",3)}function We(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",62),e.nrm(1,"br"),e.j41(2,"button",63),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.assignEmployee())}),e.EFF(3,"Add"),e.k0s()()}}function Ze(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",57)(4,"button",64),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(4);return e.Njj(a.confirmRemoveEmployee(n._id))}),e.EFF(5,"Remove"),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.SpI(" ",null==t.assignTo?null:t.assignTo.name," ")}}function et(o,s){if(1&o&&(e.qex(0),e.DNE(1,Ze,6,1,"tr",56),e.bVm()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.assignedEmployee)}}function tt(o,s){1&o&&(e.qex(0),e.j41(1,"tr")(2,"td",38),e.EFF(3,"No Record Found"),e.k0s()(),e.bVm())}function nt(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",50)(1,"div",60)(2,"label"),e.EFF(3,"Select Employee"),e.k0s(),e.j41(4,"ng-select",52),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.employeeId,n)||(a.employeeId=n),e.Njj(n)}),e.k0s()(),e.DNE(5,We,4,0,"div",61),e.k0s(),e.j41(6,"table",37)(7,"thead")(8,"tr")(9,"th",48),e.EFF(10,"Employee Name"),e.k0s(),e.j41(11,"th",49),e.EFF(12,"Action"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,et,2,1,"ng-container",24)(15,tt,4,0,"ng-container",24),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(4),e.Y8G("items",t.employeeList),e.R50("ngModel",t.employeeId),e.R7$(),e.Y8G("ngIf",t.employeeId),e.R7$(9),e.Y8G("ngIf",t.assignedEmployee.length>0),e.R7$(),e.Y8G("ngIf",0==t.assignedEmployee.length)}}function it(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",12)(1,"a",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onTabLoad(4))}),e.EFF(2,"Assign Lead"),e.k0s(),e.DNE(3,nt,16,5,"ng-template",14),e.k0s()}2&o&&e.Y8G("ngbNavItem",4)}function ot(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",72),e.nrm(1,"br"),e.j41(2,"button",63),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.addIncentiveData())}),e.EFF(3,"Add"),e.k0s()()}}function at(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",57)(6,"button",64),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(4);return e.Njj(a.removeIncentiveData(n))}),e.EFF(7,"Remove"),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.incentiveAmount," ")}}function rt(o,s){if(1&o&&(e.qex(0),e.DNE(1,at,8,2,"tr",56),e.bVm()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.incentiveTableList)}}function st(o,s){1&o&&(e.qex(0),e.j41(1,"tr")(2,"td",73),e.EFF(3,"No Record Found"),e.k0s()(),e.bVm())}function lt(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",74)(1,"button",75),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.closeLead())}),e.EFF(2,"Close Lead"),e.k0s()()}if(2&o){const t=e.XpG(3);e.R7$(),e.Y8G("disabled",0===t.incentiveList.length)}}function ct(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",65)(1,"label"),e.EFF(2,"Select Employee"),e.k0s(),e.j41(3,"ng-select",66),e.bIt("change",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.selectEmployee(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.employeeId,n)||(a.employeeId=n),e.Njj(n)}),e.k0s()(),e.j41(4,"div",50)(5,"div",67)(6,"label"),e.EFF(7,"Add Incentive"),e.k0s(),e.j41(8,"input",68),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.incentiveAmount,n)||(a.incentiveAmount=n),e.Njj(n)}),e.k0s()(),e.DNE(9,ot,4,0,"div",69),e.k0s(),e.j41(10,"table",37)(11,"thead")(12,"tr")(13,"th",48),e.EFF(14,"Employee Name"),e.k0s(),e.j41(15,"th",48),e.EFF(16,"Incentive"),e.k0s(),e.j41(17,"th",49),e.EFF(18,"Action"),e.k0s()()(),e.j41(19,"tbody"),e.DNE(20,rt,2,1,"ng-container",24)(21,st,4,0,"ng-container",24),e.k0s()(),e.j41(22,"div",70),e.DNE(23,lt,3,1,"div",71),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(3),e.Y8G("items",t.assignedEmployee),e.R50("ngModel",t.employeeId),e.R7$(5),e.R50("ngModel",t.incentiveAmount),e.R7$(),e.Y8G("ngIf",t.employeeId&&t.incentiveAmount),e.R7$(11),e.Y8G("ngIf",t.incentiveTableList.length>0),e.R7$(),e.Y8G("ngIf",0==t.incentiveTableList.length),e.R7$(2),e.Y8G("ngIf",0!==t.incentiveList.length)}}function dt(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",12)(1,"a",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onTabLoad(5))}),e.EFF(2,"Close Lead"),e.k0s(),e.DNE(3,ct,24,7,"ng-template",14),e.k0s()}2&o&&e.Y8G("ngbNavItem",5)}const mt=[{path:"",component:w,children:[{path:"list",component:de,data:{title:"Lead List"}},{path:"add-lead",component:G,data:{title:"Add Lead",breadcrumb:"Add Lead"}},{path:"edit-lead/:id",component:G,data:{title:"Edit Lead",breadcrumb:"Edit Lead"}},{path:"lead-detail/:id",component:(()=>{class o{constructor(t,i,n,a,r){this.route=t,this.sharedService=i,this.leadService=n,this.service=a,this.modalService=r,this.incentiveTableList=[],this.incentiveList=[],this.activityData=[],this.employeeList=[],this.assignedEmployee=[],this.selectedFiles={},this.imageFullPath=c.c.imageBaseUrl,this.isShuffle=!1,this.isEditMode=!1,this.isPermission=!0,this.validate=!1,this.active=1}ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.leadId=t.id,this.getLeadDeatilsById())}),this.getLeadActivity()}onTabLoad(t){switch(this.isShuffle=!1,this.employeeId=null,t){case 1:this.getLeadActivity();break;case 2:this.getLeadDeatilsById();break;case 3:case 4:this.getEmployeeList(),this.getAssignedEmployee();break;case 5:this.getAssignedEmployee()}}goBack(){this.sharedService.close()}getLeadActivity(){this.sharedService.isLoading=!0,this.leadService.getLeadActivity(this.leadId).subscribe(t=>{t.success&&(this.activityData=t.data.timeline)},t=>{t&&t.error&&this.sharedService.displayServerMessage(t.error.message,"error"),this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1})}isJsonString(t){try{JSON.parse(t)}catch{return!1}return!0}parseComment(t){return this.isJsonString(t)?JSON.parse(t):null}parseCommentDateTime(t){const i=this.parseComment(t);return i?i.dateTime:""}parseCommentDuration(t){const i=this.parseComment(t);return i?i.duration:0}parseCommentPhoneNumber(t){const i=this.parseComment(t);return i?i.phoneNumber:""}parseCommentType(t){const i=this.parseComment(t);return i?i.type:""}getLeadDeatilsById(){this.leadService.getLeadDeatilsById(this.leadId).subscribe(t=>{t&&t.success&&t.data&&(this.leadInfo=t&&t.data&&t.data.leadDetails&&t.data.leadDetails[0]?t.data.leadDetails[0]:{}),this.sharedService.isLoading=!1},t=>{this.sharedService.isLoading=!1,t.error&&this.sharedService.displayServerMessage(t.error.message,"error")})}getEmployeeList(){this.leadService.getEmpoyeeList().subscribe(t=>{let i=[];for(let n of t.data.employee)i.push({_id:n._id,name:n.name+" ( Emp Id : "+n.id+")"});this.employeeList=i})}getAssignedEmployee(){this.leadService.getAssignedEmployee(this.leadId).subscribe(t=>{if(t.success){this.assignedEmployee=[];for(let i of t.data.assignEplloye)this.assignedEmployee.unshift(i)}})}assignEmployee(){if(this.employeeId){const t=new FormData;t.append("LeadId",this.leadId),t.append("assignTo",this.employeeId),this.leadService.assignLead(t).subscribe(i=>{i.success&&(this.getAssignedEmployee(),this.sharedService.displayServerMessage(i.message,"success"))},i=>{this.sharedService.isLoading=!1,i.error&&this.sharedService.displayServerMessage(i.error.message,"error")})}}selectEmployee(t){t&&(this.employeeName=t.assignTo.name,this.employeeId=t.assignTo._id,this.incentiveAmount="")}addIncentiveData(){this.incentiveTableList.push({name:this.employeeName,incentiveAmount:this.incentiveAmount}),this.incentiveList.push({empId:this.employeeId,incentiveAmount:this.incentiveAmount}),this.employeeName="",this.employeeId=null,this.incentiveAmount=""}removeIncentiveData(t){t>-1&&(this.incentiveTableList.splice(t,1),this.incentiveList.splice(t,1))}closeLead(){this.sharedService.confirmBox("Are you sure?","Do you really want to close this Lead?").then(n=>{n&&(this.sharedService.isLoading=!0,this.leadService.closeLead({leadId:this.leadId,employee:this.incentiveList}).subscribe(r=>{r.success&&this.sharedService.displayServerMessage(r.message,"success")},r=>{this.sharedService.isLoading=!1,r.error&&this.sharedService.displayServerMessage(r.error.message,"error")}))})}startShuffle(t){this.isShuffle=!0,this.assignedId=t,this.employeeId=null}shuffleLead(){if(this.employeeId){let t=new FormData;t.append("assignedEmployee",this.assignedId.assignTo?._id),t.append("LeadId",this.leadId),t.append("assignTo",this.employeeId),this.leadService.shuffleLead(t).subscribe(i=>{i.success&&(this.isShuffle=!1,this.getAssignedEmployee(),this.sharedService.displayServerMessage(i.message,"success"))})}}confirmRemoveEmployee(t){t&&this.sharedService.confirmBox("Are you sure?","Do you really want to delete this employee?").then(a=>{a&&(this.sharedService.isLoading=!0,this.leadService.removeAssignedEmployee(t).subscribe(r=>{this.sharedService.isLoading=!1,r.success&&(this.sharedService.displayServerMessage(r.message,"success"),this.getAssignedEmployee())},r=>{this.sharedService.isLoading=!1,r.error&&this.sharedService.displayServerMessage(r.error.message,"error")}))})}setLeadTime(t){const i=t.slice(0,4),n=t.slice(4,6);return`${t.slice(6,8)}/${n}/${i}  ${t.slice(8,10)}:${t.slice(10,12)}`}onProjectDetailModal(){const t=this.modalService.open(Ie,{size:"lg"});t.componentInstance.ProjectDetails=this.leadId,t.componentInstance.closeModal.subscribe(()=>{this.getLeadActivity(),t.close()})}openModal(){this.onProjectDetailModal()}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(k.nX),e.rXU(v.d),e.rXU(h),e.rXU(y.a),e.rXU(u.Bq))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-lead-detail"]],features:[e.Jv_([y.a,p.QX])],decls:29,vars:10,consts:[["nav","ngbNav"],[1,"container-fluid"],[1,"card","card-width"],[1,"row","justify-content-between","m-3"],[1,"col-md-3","btn-group","text-start"],[1,"col-md-5","d-flex","justify-content-end"],[1,"btn","btn-outline-primary","mx-1",3,"click"],[1,"icofont","icofont-arrow-left"],["class","btn btn-outline-primary mx-1",3,"routerLink",4,"ngIf"],["class","btn btn-outline-primary mx-1",3,"click",4,"ngIf"],[1,"card-body","card-height"],["id","myTab","ngbNav","",1,"simple-wrapper","nav","nav-tabs",3,"activeIdChange","activeId"],[1,"nav-item",3,"ngbNavItem"],["id","home-tab","ngbNavLink","",1,"nav-link","txt-primary",3,"click"],["ngbNavContent",""],["id","inbox-tab","ngbNavLink","",1,"nav-link","txt-primary",3,"click"],["class","nav-item",3,"ngbNavItem",4,"ngIf"],["id","myTabContent",1,"tab-content"],[1,"mt-3",3,"ngbNavOutlet"],[1,"btn","btn-outline-primary","mx-1",3,"routerLink"],[1,"icofont","icofont-pencil-alt-2"],[1,"timeline-body"],[1,"activity-timeline"],["class","d-flex align-items-start",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","align-items-start"],["class","activity-line",3,"activity-line-image",4,"ngIf"],[1,"circle-dot-primary"],[1,"flex-grow-1"],[1,"todo-font"],[1,"font-primary"],[1,"timeStamp"],[1,"badge","badge-secondary","ms-2"],[1,"f-w-700"],["class","mb-0",4,"ngIf"],[1,"activity-line"],[1,"mb-0"],[1,"table","table-responsive","table-striped","mt-3"],["colspan","2",1,"text-center"],[1,"row","d-flex"],[1,"w-50"],[1,"my-2","d-flex"],[1,"bold"],[1,"mx-2","form-label"],[1,"mx-2"],[1,"odd"],["colspan","10",1,"leadInfoTables_empty",2,"text-align","center"],["class","row",4,"ngIf"],["scope","col"],["scope","col",1,"d-flex","justify-content-end"],[1,"row"],[1,"col-md-5"],["id","type","bindLabel","name","bindValue","_id","placeholder","Select Employee",1,"custom-select",3,"ngModelChange","items","ngModel"],["class","col-md-3",4,"ngIf"],[1,"col-md-3"],["type","submit",1,"btn","btn-primary","mt-2",2,"text-align","left",3,"click"],[4,"ngFor","ngForOf"],[1,"justify-content-end","d-flex"],[1,"icon-control-shuffle"],[1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"col-md-4"],["class","col-md-2",4,"ngIf"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","mt-2",3,"click"],[1,"btn","btn-outline-primary",3,"click"],[1,"col-md-4","mb-1"],["id","type","bindLabel","assignTo.name","bindValue","assignTo._id","placeholder","Select Employee",1,"custom-select",3,"change","ngModelChange","items","ngModel"],[1,"col-md-4","pe-0","mb-1"],["id","endDate","placeholder","Enter Incentive","type","number",1,"form-control","digits","list-input",3,"ngModelChange","ngModel"],["class","col-md-2 ms-2 ps-1",4,"ngIf"],[1,"mt-3","d-flex","justify-content-end"],["class","col-md-2 mx-1 text-end",4,"ngIf"],[1,"col-md-2","ms-2","ps-1"],["colspan","3",1,"text-center"],[1,"col-md-2","mx-1","text-end"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3"),e.EFF(5),e.k0s()(),e.j41(6,"div",5)(7,"button",6),e.bIt("click",function(){return e.eBV(a),e.Njj(n.goBack())}),e.EFF(8,"Back "),e.nrm(9,"i",7),e.k0s(),e.DNE(10,Re,3,3,"button",8)(11,we,3,0,"button",9),e.k0s()(),e.nrm(12,"hr"),e.j41(13,"div",10)(14,"ul",11,0),e.mxI("activeIdChange",function(d){return e.eBV(a),e.DH7(n.active,d)||(n.active=d),e.Njj(d)}),e.j41(16,"li",12)(17,"a",13),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabLoad(1))}),e.EFF(18,"Timeline"),e.k0s(),e.DNE(19,Ve,4,2,"ng-template",14),e.k0s(),e.j41(20,"li",12)(21,"a",15),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onTabLoad(2))}),e.EFF(22,"Lead Information"),e.k0s(),e.DNE(23,Xe,3,1,"ng-template",14),e.k0s(),e.DNE(24,Ke,4,1,"li",16)(25,it,4,1,"li",16)(26,dt,4,1,"li",16),e.k0s(),e.j41(27,"div",17),e.nrm(28,"div",18),e.k0s()()()()}if(2&i){const a=e.sdS(15);e.R7$(5),e.JRh(null==n.leadInfo?null:n.leadInfo.name),e.R7$(5),e.Y8G("ngIf",2===n.active),e.R7$(),e.Y8G("ngIf",1===n.active),e.R7$(3),e.R50("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.Y8G("ngIf",3!==(null==n.leadInfo?null:n.leadInfo.leadStatus)),e.R7$(),e.Y8G("ngIf",3!==(null==n.leadInfo?null:n.leadInfo.leadStatus)),e.R7$(),e.Y8G("ngIf",3!==(null==n.leadInfo?null:n.leadInfo.leadStatus)),e.R7$(2),e.Y8G("ngbNavOutlet",a)}},dependencies:[p.Sq,p.bT,k.Wk,u.Um,u.X9,u.sy,u.Gx,u.Ri,u.WA,u.m_,l.me,l.Q0,l.BC,l.vS,b.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.aling-center[_ngcontent-%COMP%]{align-items:center}.vertical-hr[_ngcontent-%COMP%]{border-left:1px solid black;display:flex;width:auto;height:100px}.w-40[_ngcontent-%COMP%]{width:40%!important}.fix-width[_ngcontent-%COMP%]{width:auto;height:100%}.lead-Card[_ngcontent-%COMP%]{border:1px black solid}.img-bg[_ngcontent-%COMP%]{background-color:#fff}.card-height[_ngcontent-%COMP%]{min-height:30rem}.card-width[_ngcontent-%COMP%]{width:100%}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{position:relative}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .activity-line[_ngcontent-%COMP%]{content:\"\";position:absolute;border:1px dashed #d6d6d6;top:20px;left:10px;height:115%;z-index:1}[dir=rtl][_ngcontent-%COMP%]   .activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .activity-line[_ngcontent-%COMP%]{left:unset;right:21px}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .activity-line-image[_ngcontent-%COMP%]{height:106%}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-primary[_ngcontent-%COMP%]{background-color:#33bfbf40;border-radius:100%;padding:3px;font-size:10px;color:#33bfbf}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-secondary[_ngcontent-%COMP%]{background-color:#ff615040;border-radius:100%;padding:3px;font-size:10px;color:#ff6150}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-success[_ngcontent-%COMP%]{background-color:#63d5be40;border-radius:100%;padding:3px;font-size:10px;color:#63d5be}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-danger[_ngcontent-%COMP%]{background-color:#f1523d40;border-radius:100%;padding:3px;font-size:10px;color:#f1523d}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-info[_ngcontent-%COMP%]{background-color:#9560dd40;border-radius:100%;padding:3px;font-size:10px;color:#9560dd}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-light[_ngcontent-%COMP%]{background-color:#f5f6f940;border-radius:100%;padding:3px;font-size:10px;color:#f5f6f9}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-dark[_ngcontent-%COMP%]{background-color:#15202b40;border-radius:100%;padding:3px;font-size:10px;color:#15202b}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .circle-dot-warning[_ngcontent-%COMP%]{background-color:#f8aa4b40;border-radius:100%;padding:3px;font-size:10px;color:#f8aa4b}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%] + .d-flex[_ngcontent-%COMP%]{margin-top:30px}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]{margin-left:20px;display:block;padding-top:.3rem}[dir=rtl][_ngcontent-%COMP%]   .activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]{margin-left:unset;margin-right:20px;padding-top:.3rem}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   .todo-font[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin-bottom:10px;color:#000;line-height:.8}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   .todo-font[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   .todo-font[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:unset;margin-left:8px}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   .todo-font[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;font-weight:700}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:575;font-size:14px}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1f2f3eb3}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   ul.img-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   ul.img-wrapper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100px;height:65px;border-radius:5px;background-color:#f3f3f3;display:flex}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   ul.img-wrapper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{animation:tada 1s ease-out infinite}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   ul.img-wrapper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-left:20px}[dir=rtl][_ngcontent-%COMP%]   .activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   ul.img-wrapper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-left:unset;margin-right:20px}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   ul.img-wrapper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2){margin-left:15px}.activity-timeline[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#848789;font-size:13px;font-weight:500}.font-primary[_ngcontent-%COMP%]{color:var(--theme-default)!important}.timeStamp[_ngcontent-%COMP%]{color:#848789!important;font-size:13px!important;font-weight:500!important}"]})}return o})(),data:{title:"Lead Detail",breadcrumb:"Lead Detail"}}]}];let pt=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[k.iI.forChild(mt),k.iI]})}return o})(),gt=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[p.MD,pt,S.G,u.c9,u.h_,l.YN,l.X1,u.UN,I.fS,b.MQ,O._B.forRoot()]})}return o})()},2221:(V,M,m)=>{m.d(M,{a:()=>x});var p=m(4412),l=m(1413),I=m(7673);const u=[];var b=m(8141),S=m(152),k=m(5558),e=m(1986),v=m(5312),E=m(4438),R=m(177);let x=(()=>{class c{constructor(g){this.pipe=g,this._loading$=new p.t(!0),this._search$=new l.B,this._data$=new p.t([]),this._total$=new p.t(0),this._state={page:v.k.page,pageSize:v.k.pageSize,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,b.M)(()=>this._loading$.next(!0)),(0,S.B)(200),(0,k.n)(()=>this._search()),(0,e.c)(200),(0,b.M)(()=>this._loading$.next(!1))).subscribe(h=>{this._data$.next(h.Details),this._total$.next(h.total)}),this._search$.next()}get supportdata$(){return this._data$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(g){this._set({page:g})}set pageSize(g){this._set({pageSize:g})}set searchTerm(g){this._set({searchTerm:g})}set sortColumn(g){this._set({sortColumn:g})}set sortDirection(g){this._set({sortDirection:g})}_set(g){Object.assign(this._state,g),this._search$.next()}_search(){const{sortColumn:g,sortDirection:h,pageSize:C,page:j,searchTerm:P}=this._state;let L=function F(c,f,g){return""===g||""===f?c:[...c].sort((h,C)=>{const j=((c,f)=>c<f?-1:c>f?1:0)(h[f],C[f]);return"asc"===g?j:-j})}(u,g,h);L=L.filter(D=>function y(c,f,g){return c.name.toLowerCase().includes(f.toLowerCase())||c.position.toLowerCase().includes(f.toLowerCase())||g.transform(c.salary).includes(f)||c.office.toLowerCase().includes(f.toLowerCase())||g.transform(c.extn).includes(f)||c.email.toLowerCase().includes(f.toLowerCase())}(D,P,this.pipe));const T=L.length;return L=L.slice((j-1)*C,(j-1)*C+C),(0,I.of)({Details:L,total:T})}static#e=this.\u0275fac=function(h){return new(h||c)(E.KVO(R.QX))};static#t=this.\u0275prov=E.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);