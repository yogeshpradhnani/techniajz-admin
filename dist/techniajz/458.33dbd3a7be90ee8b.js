"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[458,221,534],{5458:(E,x,r)=>{r.r(x),r.d(x,{HolidayModule:()=>G});var d=r(177),l=r(9417),k=r(9631),h=r(6911),C=r(9818),w=r(7960),p=r(7062),t=r(4438),u=r(2616),H=r(7575);function D(i,f){1&i&&t.nrm(0,"mat-progress-bar",1)}let S=(()=>{class i{constructor(e,o){this.sharedService=e,this.cdref=o}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(u.d),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-holiday"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(o,a){1&o&&(t.DNE(0,D,1,0,"mat-progress-bar",0),t.nrm(1,"router-outlet")),2&o&&t.Y8G("ngIf",a.isLoading)},dependencies:[d.bT,H.HM,p.n3]})}return i})();var j=r(7673),F=r(6536),L=r(4714),c=r(2221),n=r(5312);class s{constructor(f){this.formBuilder=f,this.formGroup=this.formBuilder.group({occasion:["",[l.k0.required]],startDate:["",[l.k0.required]],endDate:["",[l.k0.required]]})}}var g=r(1626);let b=(()=>{class i{constructor(e,o){this.sharedService=e,this.http=o,this.holidayUrl=n.c.adminUrl+"/Employees"}getHolidayList(){return this.sharedService.getRequest(this.holidayUrl+"/CalendarList")}deleteHoliday(e){return this.http.delete(this.holidayUrl+"/deleteHoliday/"+e)}addHoliday(e){return this.sharedService.postRequest(this.holidayUrl+"/addHoliday",e)}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(u.d),t.KVO(g.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function y(i,f){if(1&i){const e=t.RV6();t.j41(0,"div",21),t.EFF(1),t.j41(2,"button",22),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.closeAlert())}),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorMessage," ")}}let T=(()=>{class i{constructor(e,o,a){this.formBuilder=e,this.sharedService=o,this.holidayService=a,this.closeModal=new t.bkB}ngOnInit(){this.addEditHolidayForm=new s(this.formBuilder)}closeModel(){this.closeModal.emit()}createHoliday(){this.errorMessage=null,this.addEditHolidayForm.formGroup.valid?(this.sharedService.isError=!1,this.sharedService.isLoading=!0,this.holidayService.addHoliday(this.addEditHolidayForm.formGroup.value).subscribe(e=>{e.success&&this.closeModel()},e=>{this.errorMessage=e?.error?.message,this.sharedService.isError=!0,this.sharedService.isLoading=!1},()=>this.sharedService.isLoading=!1)):this.errorMessage="Please fill out the required fields before submitting."}closeAlert(){this.errorMessage=null}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(l.ok),t.rXU(u.d),t.rXU(b))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-add-holiday"]],inputs:{ProjectDetails:"ProjectDetails"},outputs:{closeModal:"closeModal"},decls:33,vars:2,consts:[[1,"modal-content"],[1,"modal-toggle-wrapper","text-start","dark-sign-up"],[1,"row","align-items-center"],["type","button","aria-label","Close",1,"btn-close","position-absolute","top-0","end-0","m-2","close-btn",3,"click"],[1,"col-12"],[1,"modal-header","justify-content-center","border-0","pb-0","m-0"],[1,"modal-body"],["class","alert alert-danger d-flex justify-content-between align-items-center",4,"ngIf"],[1,"table-responsive","theme-scroollbar",3,"formGroup"],[1,"justify-content-start","row","mx-0","mb-2"],[1,"form-group","col-md-6","mb-3"],["for","startDate",1,"form-label","btn-font"],[1,"font-danger"],["type","date","placeholder","start Date","autocomplete","off","formControlName","startDate","id","startDate",1,"form-control"],["for","endDate",1,"form-label","btn-font"],["type","date","placeholder","end Date","autocomplete","off","formControlName","endDate","id","endDate",1,"form-control"],[1,"form-group","mb-3"],["for","occasion",1,"form-label","btn-font"],["type","text","placeholder","occasion","autocomplete","off","formControlName","occasion","id","occasion",1,"form-control"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","btn-block",3,"click"],[1,"alert","alert-danger","d-flex","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){return a.closeModel()}),t.k0s(),t.j41(4,"div",4)(5,"h3",5),t.EFF(6," Add Holiday "),t.k0s()()(),t.nrm(7,"hr"),t.j41(8,"div",6),t.DNE(9,y,3,1,"div",7),t.j41(10,"form",8)(11,"div",9)(12,"div",10)(13,"label",11),t.EFF(14,"Start Date"),t.j41(15,"a",12),t.EFF(16,"*"),t.k0s()(),t.nrm(17,"input",13),t.k0s(),t.j41(18,"div",10)(19,"label",14),t.EFF(20,"End Date"),t.j41(21,"a",12),t.EFF(22,"*"),t.k0s()(),t.nrm(23,"input",15),t.k0s(),t.j41(24,"div",16)(25,"label",17),t.EFF(26,"Occasion"),t.j41(27,"a",12),t.EFF(28,"*"),t.k0s()(),t.nrm(29,"input",18),t.k0s()(),t.j41(30,"div",19)(31,"button",20),t.bIt("click",function(){return a.createHoliday()}),t.EFF(32,"Add Holiday"),t.k0s()()()()()()),2&o&&(t.R7$(9),t.Y8G("ngIf",a.errorMessage),t.R7$(),t.Y8G("formGroup",a.addEditHolidayForm.formGroup))},dependencies:[d.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}.close-btn[_ngcontent-%COMP%]{z-index:3}.alert[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]})}return i})();const v=["openmodal"];function P(i,f){if(1&i){const e=t.RV6();t.j41(0,"div",6)(1,"button",7),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.openModal())}),t.EFF(2,"Add "),t.nrm(3,"i",13),t.k0s()()}}function $(i,f){1&i&&(t.j41(0,"th",14),t.EFF(1,"Action"),t.k0s())}function I(i,f){if(1&i){const e=t.RV6();t.j41(0,"td",14)(1,"ul",16)(2,"button",17),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,m=t.XpG();return t.Njj(m.confirmDeleteHoliday(a._id))}),t.nrm(3,"i",18),t.k0s()()()}}function z(i,f){if(1&i&&(t.j41(0,"tr")(1,"td"),t.nrm(2,"ngb-highlight",15),t.k0s(),t.j41(3,"td"),t.nrm(4,"ngb-highlight",15),t.k0s(),t.DNE(5,I,4,0,"td",11),t.k0s()),2&i){const e=f.$implicit,o=t.XpG();t.R7$(2),t.Y8G("result",o.convertDateFormat(e.date_.toString()))("term",o.service.searchTerm),t.R7$(2),t.Y8G("result",e.occasion)("term",o.service.searchTerm),t.R7$(),t.Y8G("ngIf",o.isPermission)}}function B(i,f){1&i&&(t.j41(0,"tr",12)(1,"td",19),t.EFF(2,"No records found"),t.k0s()())}const O=[{path:"",component:S,children:[{path:"list",component:(()=>{class i{constructor(e,o,a,m){this.service=e,this.sharedService=o,this.holidayService=a,this.modalService=m,this.pageIndex=n.k.page,this.pageSize=n.k.pageSize,this.pageItemList=[],this.paginationDisabled=!1,this.imageFullPath=n.c.imageBaseUrl,this.searchTerm="",this.propertyType=0,this.isPermission=!1,this.maxDate=new Date}ngOnInit(){this.pageItemList=F.g1,this.maxDate=this.sharedService.maxDate,this.checkPermission(),this.getHolidayList()}onRefreshData(){this.resetPagination(),this.resetFilters(),this.getHolidayList()}loadPage(e,o){this.pageSize=o,this.pageIndex=e,this.getHolidayList()}getHolidayList(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.holidayService.getHolidayList().subscribe(o=>{const a=o.data?.calendar;this.tableData$=(0,j.of)(a),this.total$=(0,j.of)(o.data?.total)},o=>{this.handleError(o)},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}confirmDeleteHoliday(e){e&&this.sharedService.confirmBox("Are you sure?","Do you really want to delete this holiday?").then(m=>{m&&this.holidayService.deleteHoliday(e).subscribe(M=>{M.success&&(this.sharedService.displayServerMessage(M.message,"success"),this.getHolidayList())},M=>this.sharedService.displayServerMessage(M.error.message,"error"))})}onProjectDetailModal(){const e=this.modalService.open(T,{size:"lg"});e.componentInstance.ProjectDetails="hi",e.componentInstance.closeModal.subscribe(()=>{this.getHolidayList(),e.close()})}convertDateFormat(e){const[o,a,m]=[e.slice(0,4),e.slice(4,6),e.slice(6,8)];return`${m}/${a}/${o}`}openModal(){this.onProjectDetailModal()}checkPermission(){const e=localStorage.getItem("role");e&&(this.isPermission="Admin"===e)}resetPagination(){this.pageIndex=n.k.page,this.pageSize=n.k.pageSize,this.service.page=n.k.page,this.service.pageSize=n.k.pageSize}resetFilters(){this.propertyType=0,this.searchTerm=""}handleError(e){e&&e.error&&("Unauthorized access."===e.error.message?this.sharedService.logOut():400!==e.status&&this.sharedService.displayServerMessage(e.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(c.a),t.rXU(u.d),t.rXU(b),t.rXU(h.Bq))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-holiday-list"]],viewQuery:function(o,a){if(1&o&&(t.GBs(v,5),t.GBs(L.f,5)),2&o){let m;t.mGM(m=t.lsd())&&(a.openModalTemplateRef=m.first),t.mGM(m=t.lsd())&&(a.headers=m)}},features:[t.Jv_([c.a,d.QX])],decls:26,vars:5,consts:[[1,"card"],[1,"card-body"],[1,"row","justify-content-between","mb-2"],[1,"mx-0","row",2,"width","60%"],[1,"col-md-3","mx-1"],[1,"w-40","text-end"],[1,"btn-group","text-start","mb-2","mx-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"icon-reload"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive","table-striped"],["class","justify-content-end d-flex",4,"ngIf"],[1,"odd"],[1,"icon-plus"],[1,"justify-content-end","d-flex"],[3,"result","term"],[1,"action"],["ngbTooltip","Delete",1,"btn-sm","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash-o","px-1","icon_size"],["colspan","10",1,"dataTables_empty",2,"text-align","center"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"div",4),t.k0s(),t.j41(5,"div",5)(6,"div",6)(7,"button",7),t.bIt("click",function(){return a.onRefreshData()}),t.EFF(8,"Refresh "),t.nrm(9,"i",8),t.k0s()(),t.DNE(10,P,4,0,"div",6),t.k0s()(),t.nrm(11,"hr"),t.j41(12,"form",9)(13,"table",10)(14,"thead")(15,"tr")(16,"th"),t.EFF(17,"Date"),t.k0s(),t.j41(18,"th"),t.EFF(19,"Occasion"),t.k0s(),t.DNE(20,$,2,0,"th",11),t.k0s()(),t.j41(21,"tbody"),t.Z7z(22,z,6,5,"tr",null,t.fX1,!1,B,3,0,"tr",12),t.nI1(25,"async"),t.k0s()()()()()),2&o&&(t.R7$(10),t.vxM(10,a.isPermission?10:-1),t.R7$(10),t.Y8G("ngIf",a.isPermission),t.R7$(2),t.Dyx(t.bMT(25,3,a.tableData$)))},dependencies:[d.bT,h.md,h.Qr,l.qT,l.cb,l.cV,d.Jj],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.btn-sm[_ngcontent-%COMP%]{padding-top:3px}"]})}return i})(),data:{title:"Holiday Board"}}]}];let _=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.$C({type:i});static#o=this.\u0275inj=t.G2t({imports:[p.iI.forChild(O),p.iI]})}return i})(),G=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.$C({type:i});static#o=this.\u0275inj=t.G2t({imports:[d.MD,w.G,h.c9,h.h_,l.YN,l.X1,h.UN,k.fS,C.MQ,h.Pv,_]})}return i})()},4714:(E,x,r)=>{r.d(x,{f:()=>k});var d=r(4438);const l={asc:"desc",desc:"","":"asc"};let k=(()=>{class h{constructor(){this.sortable="",this.direction="",this.sort=new d.bkB}rotate(){this.direction=l[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static#t=this.\u0275fac=function(p){return new(p||h)};static#e=this.\u0275dir=d.FsC({type:h,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(p,t){1&p&&d.bIt("click",function(){return t.rotate()}),2&p&&d.AVh("asc","asc"===t.direction)("desc","desc"===t.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}return h})()},2221:(E,x,r)=>{r.d(x,{a:()=>L});var d=r(4412),l=r(1413),k=r(7673);const h=[];var C=r(8141),w=r(152),p=r(5558),t=r(1986),u=r(5312),H=r(4438),D=r(177);let L=(()=>{class c{constructor(s){this.pipe=s,this._loading$=new d.t(!0),this._search$=new l.B,this._data$=new d.t([]),this._total$=new d.t(0),this._state={page:u.k.page,pageSize:u.k.pageSize,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,C.M)(()=>this._loading$.next(!0)),(0,w.B)(200),(0,p.n)(()=>this._search()),(0,t.c)(200),(0,C.M)(()=>this._loading$.next(!1))).subscribe(g=>{this._data$.next(g.Details),this._total$.next(g.total)}),this._search$.next()}get supportdata$(){return this._data$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(s){this._set({page:s})}set pageSize(s){this._set({pageSize:s})}set searchTerm(s){this._set({searchTerm:s})}set sortColumn(s){this._set({sortColumn:s})}set sortDirection(s){this._set({sortDirection:s})}_set(s){Object.assign(this._state,s),this._search$.next()}_search(){const{sortColumn:s,sortDirection:g,pageSize:b,page:y,searchTerm:T}=this._state;let v=function j(c,n,s){return""===s||""===n?c:[...c].sort((g,b)=>{const y=((c,n)=>c<n?-1:c>n?1:0)(g[n],b[n]);return"asc"===s?y:-y})}(h,s,g);v=v.filter($=>function F(c,n,s){return c.name.toLowerCase().includes(n.toLowerCase())||c.position.toLowerCase().includes(n.toLowerCase())||s.transform(c.salary).includes(n)||c.office.toLowerCase().includes(n.toLowerCase())||s.transform(c.extn).includes(n)||c.email.toLowerCase().includes(n.toLowerCase())}($,T,this.pipe));const P=v.length;return v=v.slice((y-1)*b,(y-1)*b+b),(0,k.of)({Details:v,total:P})}static#t=this.\u0275fac=function(g){return new(g||c)(H.KVO(D.QX))};static#e=this.\u0275prov=H.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);