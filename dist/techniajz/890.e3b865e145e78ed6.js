"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[890,221,534],{6890:(M,P,c)=>{c.r(P),c.d(P,{ProjectsModule:()=>Ce});var p=c(177),s=c(9417),S=c(9631),d=c(6911),k=c(9818),T=c(7960),f=c(7062),e=c(4438),b=c(2616),C=c(7575);function D(o,l){1&o&&e.nrm(0,"mat-progress-bar",1)}let I=(()=>{class o{constructor(t,i){this.sharedService=t,this.cdref=i}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(b.d),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-projects"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(i,r){1&i&&(e.DNE(0,D,1,0,"mat-progress-bar",0),e.nrm(1,"router-outlet")),2&i&&e.Y8G("ngIf",r.isLoading)},dependencies:[p.bT,C.HM,f.n3]})}return o})();var _=c(7673),x=c(6536),R=c(4714),g=c(2221),m=c(5312);class j{constructor(l){this.formBuilder=l,this.formGroup=this.formBuilder.group({name:["",s.k0.required],contactNumber:["",[s.k0.required,s.k0.pattern("^[0-9]{10}$")]],mediatorName:[""],propertyType:[null],location_URL:[""],condition:[null],ownershipTypes:[null],yearBuilt:[""],OwnerOfProperty:[""],certifications:[null],contactPerson:[""],nearby:[""],notes:[""],image:[""],minPrice:[""],maxPrice:[""],size:[""],type:[null],location_area:[null]})}}const v=[{_id:"image",name:"Image"},{_id:"youtube",name:"You Tube"},{_id:"documents",name:"Document"}],w=[{_id:0,name:"All"},{_id:1,name:"Individual"},{_id:2,name:"Project"}],$=[{_id:"Single",name:"Single Floor"},{_id:"Double",name:"Double Floor"},{_id:"Duplex",name:"Duplex"}];var B=c(1626);let E=(()=>{class o{constructor(t,i){this.sharedService=t,this.http=i,this.projectUrl=m.c.adminUrl+"/Projects",this.paymentUrl=m.c.adminUrl+"/payment"}getProjectData(t){return this.sharedService.getRequest(this.projectUrl+"/projectList",t)}getAssignedProjects(t){return this.sharedService.getRequest(this.projectUrl+"/assignedToEmployeeList/"+t)}getEmpoyeeList(){return this.sharedService.getRequest(this.projectUrl+"/employeeList")}assignProjectToEmployee(t){return this.sharedService.postRequest(this.projectUrl+"/assignProject",t)}deleteAssignedEmployee(t){return this.http.delete(this.projectUrl+"/deleteAssignedEmployee/"+t)}getPropertyData(t,i){return this.sharedService.getRequest(this.projectUrl+"/fetchAll/"+t,i)}fetchPropertyType(){return this.sharedService.getRequest(this.projectUrl+"/propertyType")}fetchCertificate(){return this.sharedService.getRequest(this.projectUrl+"/certificateDropdrone")}fetchOwnerShipType(){return this.sharedService.getRequest(this.projectUrl+"/ownershipType")}fetchPropertyCondition(){return this.sharedService.getRequest(this.projectUrl+"/propertyConditions")}fetchAreaPrefrence(){return this.sharedService.getRequest(m.c.adminUrl+"/Lead/locationPreference")}createNewProject(t){return this.sharedService.postRequest(this.projectUrl+"/createProject",t)}editProject(t,i){return this.sharedService.postRequest(this.projectUrl+"/editProject/"+t,i)}getProjectDocuments(t,i){return this.sharedService.getRequest(this.projectUrl+"/projectImageList/"+t,i)}createPropertyDetail(t){return this.sharedService.postRequest(this.projectUrl+"/add",t)}addProjectDocument(t,i){return this.sharedService.postRequest(this.projectUrl+"/addProjectImage/"+t,i)}editProperty(t,i){return this.sharedService.putRequest(this.projectUrl+"/"+t,i)}createPayment(t){return this.sharedService.postRequest(this.paymentUrl+"/create",t)}deleteProject(t){return this.http.delete(this.projectUrl+"/deleteProject/"+t)}deleteProjectImage(t,i){return this.http.delete(this.projectUrl+"/deleteProjectImage/"+t+"/"+i)}getPropertyList(t){return this.sharedService.getRequest(this.projectUrl+"/getProperties/"+t)}fetchProjectPayments(t){return this.sharedService.getRequest(this.paymentUrl+"/paymentList",t)}fetchPropertyPayments(t){return this.sharedService.getRequest(this.paymentUrl+"/fetchAll",t)}fetchPropertyById(t){return this.sharedService.getRequest(this.projectUrl+"/"+t)}editPayment(t,i){return this.sharedService.putRequest(this.paymentUrl+"/update/"+t,i)}getPaymentInfo(t){return this.sharedService.getRequest(this.paymentUrl+"/getById/"+t)}setDefaultImage(t,i){return this.sharedService.postRequest(this.projectUrl+"/projectProfileUpdate/"+t+"/"+i)}getProjectDetail(t){return this.sharedService.getRequest(this.projectUrl+"/getProject/"+t)}static#e=this.\u0275fac=function(i){return new(i||o)(e.KVO(b.d),e.KVO(B.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const O=["openmodal"],z=()=>["/","admin","projects","add-project"];function V(o,l){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.nrm(2,"img",27),e.k0s(),e.j41(3,"td"),e.nrm(4,"ngb-highlight",28),e.k0s(),e.j41(5,"td"),e.nrm(6,"ngb-highlight",28),e.k0s(),e.j41(7,"td"),e.nrm(8,"ngb-highlight",28),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.nrm(12,"ngb-highlight",28),e.k0s(),e.j41(13,"td")(14,"ul",29)(15,"button",30),e.bIt("click",function(){const r=e.eBV(t).$implicit,n=e.XpG();return e.Njj(n.redirectToDetails(r))}),e.nrm(16,"i",31),e.k0s(),e.j41(17,"button",32),e.bIt("click",function(){const r=e.eBV(t).$implicit,n=e.XpG();return e.Njj(n.redirectToEdit(r))}),e.nrm(18,"i",33),e.k0s(),e.j41(19,"button",34),e.bIt("click",function(){const r=e.eBV(t).$implicit,n=e.XpG();return e.Njj(n.confirmDeleteProject(r._id))}),e.nrm(20,"i",35),e.k0s()()()()}if(2&o){const t=l.$implicit,i=e.XpG();e.R7$(2),e.FS9("src",t.projectImage?i.imageFullPath+t.projectImage:"assets/images/logo/ic_avatar@3x.png",e.B4B),e.R7$(2),e.Y8G("result",t.name)("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.contactNumber)("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.location_area)("term",i.service.searchTerm),e.R7$(2),e.Lme(" \u20b9",t.minPrice,"L - \u20b9",t.maxPrice,"L "),e.R7$(2),e.Y8G("result",null==t.propertyType?null:t.propertyType.name)("term",i.service.searchTerm)}}function Y(o,l){1&o&&(e.j41(0,"tr",22)(1,"td",36),e.EFF(2,"No records found"),e.k0s()())}function U(o,l){if(1&o&&(e.j41(0,"option",37),e.EFF(1),e.k0s()),2&o){const t=l.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI("",t.description+" Items per page"," ")}}let A=(()=>{class o{constructor(t,i,r,n){this.service=t,this.sharedService=i,this.projectService=r,this.router=n,this.active=0,this.pageIndex=m.k.page,this.pageSize=m.k.pageSize,this.paginationDisabled=!1,this.isPermission=!0,this.imageFullPath=m.c.imageBaseUrl,this.searchTerm="",this.propertyType=!1}ngOnInit(){this.pageItemList=x.g1,this.formType=w,this.getProjectData()}onTabClicked(t){this.propertyType=t,this.getProjectData()}onRefreshData(){this.service.page=m.k.page,this.service.pageSize=m.k.pageSize,this.pageIndex=m.k.page,this.pageSize=m.k.pageSize,this.active=0,this.propertyType=!1,this.searchTerm="",this.getProjectData()}loadPage(t,i){this.pageSize=i,this.pageIndex=t,this.getProjectData()}getProjectData(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.projectService.getProjectData(this.propertyType?{pageNo:this.pageIndex,limit:this.pageSize,running:this.propertyType,search:this.searchTerm}:{pageNo:this.pageIndex,limit:this.pageSize,search:this.searchTerm}).subscribe(i=>{(!i.data||null==typeof i.data.data)&&this.sharedService.displayServerMessage("Technical Error Occurred.","error"),this.tableData$=(0,_.of)(i.data?.project),this.total$=(0,_.of)(i.data?.totalCount)},i=>{i&&i.error&&("Unauthorized access."===i.error.message?this.sharedService.logOut():400!==i.status&&this.sharedService.displayServerMessage(i.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}redirectToDetails(t){const r=`admin/projects/details/${t._id}?data=${encodeURIComponent(JSON.stringify(t))}`;window.open(r,"_blank")}redirectToEdit(t){this.router.navigate([`admin/projects/edit-project/${t._id}`],{state:{data:t}}).catch(r=>window.alert("Technical Error Occurred."))}checkPermission(){const t=localStorage.getItem("role");t&&(this.isPermission="Admin"===t)}changeToCurrency(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t).toString()}confirmDeleteProject(t){void 0!==t&&this.sharedService.confirmBox("Are you sure?","Do you really want to Delete this Project?").then(n=>{n&&this.projectService.deleteProject(t).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.getProjectData())},a=>{a.error&&("Unauthorized access."===a.error.message?this.sharedService.logOut():this.sharedService.displayServerMessage(a.error.message,"error"))})})}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(g.a),e.rXU(b.d),e.rXU(E),e.rXU(f.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-project-list"]],viewQuery:function(i,r){if(1&i&&(e.GBs(O,5),e.GBs(R.f,5)),2&i){let n;e.mGM(n=e.lsd())&&(r.openModalTemplateRef=n.first),e.mGM(n=e.lsd())&&(r.headers=n)}},features:[e.Jv_([g.a,p.QX])],decls:57,vars:22,consts:[["nav","ngbNav"],[1,"card"],[1,"card-body"],[1,"row","justify-content-between","mb-2"],[1,"mx-0","row",2,"width","60%"],[1,"text-start","input-group","pb-1",2,"width","70%"],["type","text","placeholder","Search for party / company name, Scheme Name and mobile...",1,"form-control","list-input",3,"ngModelChange","ngModel"],[1,"input-group-text","list-input",3,"click"],[1,"icofont","icofont-search"],[1,"w-40","text-end"],[1,"btn-group","text-start","mb-2","mx-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"icon-reload"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"icon-plus"],["id","myTab","ngbNav","",1,"simple-wrapper","nav","nav-tabs",3,"activeIdChange","activeId"],[1,"nav-item",3,"click","ngbNavItem"],["id","home-tab","ngbNavLink","",1,"nav-link","txt-primary"],[1,"nav-item","active",3,"ngbNavItem"],["id","inbox-tab","ngbNavLink","",1,"nav-link","txt-primary",3,"click"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive","table-striped"],[1,"odd"],[1,"d-flex","justify-content-between","p-2","mb-3"],["name","pageSize",1,"form-select",2,"width","auto","cursor","pointer",3,"change","ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3",3,"pageChange","collectionSize","page","pageSize","disabled","maxSize"],["alt","Profile",1,"img-40","img-h-40","me-2","rounded-circle",3,"src"],[3,"result","term"],[1,"action"],["ngbTooltip","Details",1,"btn-sm","btn-outline-primary","mx-1",3,"click"],["ps-2","","sweet-5","",1,"icofont","icofont-eye-alt"],["ngbTooltip","Edit",1,"btn-sm","btn-outline-primary","mx-1",3,"click"],["ps-2","","sweet-5","",1,"icofont","icofont-pencil-alt-2"],["ngbTooltip","Delete",1,"btn-sm","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash-o","px-1","icon_size"],["colspan","10",1,"dataTables_empty",2,"text-align","center"],[3,"value"]],template:function(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"input",6),e.mxI("ngModelChange",function(h){return e.eBV(n),e.DH7(r.searchTerm,h)||(r.searchTerm=h),e.Njj(h)}),e.k0s(),e.j41(6,"a",7),e.bIt("click",function(){return e.eBV(n),e.Njj(r.getProjectData())}),e.nrm(7,"i",8),e.k0s()()(),e.j41(8,"div",9)(9,"div",10)(10,"button",11),e.bIt("click",function(){return e.eBV(n),e.Njj(r.onRefreshData())}),e.EFF(11,"Refresh "),e.nrm(12,"i",12),e.k0s()(),e.j41(13,"div",10)(14,"button",13),e.EFF(15,"Add "),e.nrm(16,"i",14),e.k0s()()()(),e.nrm(17,"hr"),e.j41(18,"ul",15,0),e.mxI("activeIdChange",function(h){return e.eBV(n),e.DH7(r.active,h)||(r.active=h),e.Njj(h)}),e.j41(20,"li",16),e.bIt("click",function(){return e.eBV(n),e.Njj(r.onTabClicked(!1))}),e.j41(21,"a",17),e.EFF(22,"ALL"),e.k0s()(),e.j41(23,"li",18)(24,"a",19),e.bIt("click",function(){return e.eBV(n),e.Njj(r.onTabClicked(!0))}),e.EFF(25,"Running"),e.k0s()()(),e.j41(26,"form",20)(27,"table",21)(28,"thead")(29,"tr")(30,"th"),e.EFF(31,"Image"),e.k0s(),e.j41(32,"th"),e.EFF(33,"Name"),e.k0s(),e.j41(34,"th"),e.EFF(35,"Contact Number"),e.k0s(),e.j41(36,"th"),e.EFF(37,"Location"),e.k0s(),e.j41(38,"th"),e.EFF(39,"Price Range"),e.k0s(),e.j41(40,"th"),e.EFF(41,"Type"),e.k0s(),e.j41(42,"th"),e.EFF(43,"Actions"),e.k0s()()(),e.j41(44,"tbody"),e.Z7z(45,V,21,11,"tr",null,e.fX1,!1,Y,3,0,"tr",22),e.nI1(48,"async"),e.k0s()(),e.j41(49,"div",23)(50,"select",24),e.bIt("change",function(){return e.eBV(n),e.Njj(r.loadPage(r.service.page,r.service.pageSize))}),e.mxI("ngModelChange",function(h){return e.eBV(n),e.DH7(r.service.pageSize,h)||(r.service.pageSize=h),e.Njj(h)}),e.DNE(51,U,2,2,"option",25),e.k0s(),e.j41(52,"span"),e.EFF(53),e.nI1(54,"async"),e.k0s(),e.j41(55,"ngb-pagination",26),e.nI1(56,"async"),e.mxI("pageChange",function(h){return e.eBV(n),e.DH7(r.service.page,h)||(r.service.page=h),e.Njj(h)}),e.bIt("pageChange",function(){return e.eBV(n),e.Njj(r.loadPage(r.service.page,r.service.pageSize))}),e.k0s()()()()()}2&i&&(e.R7$(5),e.R50("ngModel",r.searchTerm),e.R7$(9),e.Y8G("routerLink",e.lJ4(21,z)),e.R7$(4),e.R50("activeId",r.active),e.R7$(2),e.Y8G("ngbNavItem",0),e.R7$(3),e.Y8G("ngbNavItem",1),e.R7$(22),e.Dyx(e.bMT(48,15,r.tableData$)),e.R7$(5),e.Y8G("disabled",!r.paginationDisabled),e.R50("ngModel",r.service.pageSize),e.R7$(),e.Y8G("ngForOf",r.pageItemList),e.R7$(2),e.SpI("Total: ",e.bMT(54,17,r.total$),""),e.R7$(2),e.Y8G("collectionSize",e.bMT(56,19,r.total$)),e.R50("page",r.service.page),e.Y8G("pageSize",r.service.pageSize)("disabled",!r.paginationDisabled)("maxSize",6))},dependencies:[p.Sq,d.X9,d.sy,d.Gx,d.Ri,d.WA,d.s5,d.md,d.Qr,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.vS,s.cV,f.Wk,p.Jj],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.btn-sm[_ngcontent-%COMP%]{padding-top:3px}"]})}return o})();const X=o=>["/","admin","buying","edit-payment",o];function q(o,l){if(1&o&&(e.j41(0,"div",10)(1,"div",11)(2,"p",12),e.EFF(3,"Plot Number : "),e.k0s(),e.j41(4,"p",13),e.EFF(5),e.k0s()(),e.j41(6,"div",11)(7,"p",12),e.EFF(8,"Property Title : "),e.k0s(),e.j41(9,"p",13),e.EFF(10),e.k0s()(),e.j41(11,"div",11)(12,"p",12),e.EFF(13,"Length : "),e.k0s(),e.j41(14,"p",14),e.EFF(15),e.k0s()(),e.j41(16,"div",11)(17,"p",12),e.EFF(18,"Width : "),e.k0s(),e.j41(19,"p",14),e.EFF(20),e.k0s()(),e.j41(21,"div",11)(22,"p",12),e.EFF(23,"Total Area : "),e.k0s(),e.j41(24,"p",14),e.EFF(25),e.k0s()(),e.j41(26,"div",11)(27,"p",12),e.EFF(28,"Facing : "),e.k0s(),e.j41(29,"p",13),e.EFF(30),e.k0s()(),e.j41(31,"div",11)(32,"p",12),e.EFF(33,"Road : "),e.k0s(),e.j41(34,"p",13),e.EFF(35),e.k0s()()(),e.j41(36,"div",10)(37,"div",11)(38,"p",12),e.EFF(39,"Rate : "),e.k0s(),e.j41(40,"p",14),e.EFF(41),e.k0s()(),e.j41(42,"div",11)(43,"p",12),e.EFF(44,"Total Amount : "),e.k0s(),e.j41(45,"p",14),e.EFF(46),e.k0s()(),e.j41(47,"div",11)(48,"p",12),e.EFF(49,"Deal : "),e.k0s(),e.j41(50,"p",13),e.EFF(51),e.k0s()(),e.j41(52,"div",11)(53,"p",12),e.EFF(54,"Deal Price : "),e.k0s(),e.j41(55,"p",13),e.EFF(56),e.k0s()(),e.j41(57,"div",11)(58,"p",12),e.EFF(59,"Expected Selling Rate : "),e.k0s(),e.j41(60,"p",14),e.EFF(61),e.k0s()(),e.j41(62,"div",11)(63,"p",12),e.EFF(64,"Expected Total Selling Rate : "),e.k0s(),e.j41(65,"p",14),e.EFF(66),e.k0s()(),e.j41(67,"div",11)(68,"p",12),e.EFF(69,"Remark : "),e.k0s(),e.j41(70,"p",13),e.EFF(71),e.k0s()()()),2&o){const t=e.XpG();e.R7$(5),e.JRh(t.ProjectDetails.plotNumber),e.R7$(5),e.JRh(t.ProjectDetails.propertyTitle),e.R7$(5),e.SpI("",t.ProjectDetails.length," Feet"),e.R7$(5),e.SpI("",t.ProjectDetails.width," Feet"),e.R7$(5),e.SpI("",t.ProjectDetails.area," Sq Yd"),e.R7$(5),e.JRh(t.ProjectDetails.facing),e.R7$(5),e.SpI("",t.ProjectDetails.roadSize," feet"),e.R7$(6),e.SpI("\u20b9",t.ProjectDetails.perUnitCost," /Sq Yd"),e.R7$(5),e.SpI("\u20b9",t.ProjectDetails.price," "),e.R7$(5),e.JRh(t.ProjectDetails.deal),e.R7$(5),e.SpI("\u20b9",t.ProjectDetails.dealPrice,""),e.R7$(5),e.SpI("\u20b9",t.ProjectDetails.expectedSellingRate," /Sq Yd"),e.R7$(5),e.SpI("\u20b9",t.ProjectDetails.expectedTotalSellingRate," "),e.R7$(5),e.JRh(t.ProjectDetails.remark)}}function J(o,l){if(1&o){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.openLinkInNewTab(n.imageFullPath+r.image))}),e.nrm(1,"i",28),e.k0s()}}function H(o,l){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.nrm(2,"ngb-highlight",22),e.k0s(),e.j41(3,"td"),e.nrm(4,"ngb-highlight",22),e.k0s(),e.j41(5,"td"),e.nrm(6,"ngb-highlight",22),e.k0s(),e.j41(7,"td"),e.nrm(8,"ngb-highlight",22),e.k0s(),e.j41(9,"td"),e.nrm(10,"ngb-highlight",22),e.k0s(),e.j41(11,"td"),e.nrm(12,"ngb-highlight",22),e.k0s(),e.j41(13,"td"),e.nrm(14,"ngb-highlight",22),e.k0s(),e.j41(15,"td"),e.nrm(16,"ngb-highlight",22),e.k0s(),e.j41(17,"td")(18,"ul",23)(19,"button",24),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.closeModel())}),e.nrm(20,"i",25),e.k0s(),e.DNE(21,J,2,0,"button",26),e.k0s()()()}if(2&o){const t=l.$implicit,i=e.XpG(2);e.R7$(2),e.Y8G("result",i.transformDate(t.paymentPaidDate))("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.paymentPaidBy)("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.paymentReceivedBy)("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.modeOfPayment)("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.transactionId)("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.amountPaid.toString())("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.balanceAmount.toString())("term",i.service.searchTerm),e.R7$(2),e.Y8G("result",t.remark)("term",i.service.searchTerm),e.R7$(3),e.Y8G("routerLink",e.eq3(18,X,null==t?null:t._id)),e.R7$(2),e.Y8G("ngIf",(null==t?null:t.image)&&""!==t.image)}}function Q(o,l){1&o&&(e.j41(0,"tr",17)(1,"td",29),e.EFF(2,"No records found"),e.k0s()())}function W(o,l){if(1&o&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&o){const t=l.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI("",t.description+" Items per page"," ")}}function K(o,l){if(1&o){const t=e.RV6();e.j41(0,"form",15)(1,"table",16)(2,"thead")(3,"tr")(4,"th"),e.EFF(5,"Date"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Paid By"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Received By"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Mode Of Payment"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Transaction Id"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Amount Paid"),e.k0s(),e.j41(16,"th"),e.EFF(17,"Balance Amount"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Remark"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Action"),e.k0s()()(),e.j41(22,"tbody"),e.Z7z(23,H,22,20,"tr",null,e.fX1,!1,Q,3,0,"tr",17),e.nI1(26,"async"),e.k0s()(),e.j41(27,"div",18)(28,"select",19),e.bIt("change",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.loadPage(r.service.page,r.service.pageSize))}),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.service.pageSize,r)||(n.service.pageSize=r),e.Njj(r)}),e.DNE(29,W,2,2,"option",20),e.k0s(),e.j41(30,"span"),e.EFF(31),e.nI1(32,"async"),e.k0s(),e.j41(33,"ngb-pagination",21),e.nI1(34,"async"),e.mxI("pageChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.service.page,r)||(n.service.page=r),e.Njj(r)}),e.bIt("pageChange",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.loadPage(r.service.page,r.service.pageSize))}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(23),e.Dyx(e.bMT(26,10,t.paymentTableData$)),e.R7$(5),e.Y8G("disabled",!t.paginationDisabled),e.R50("ngModel",t.service.pageSize),e.R7$(),e.Y8G("ngForOf",t.pageItemList),e.R7$(2),e.SpI("Total: ",e.bMT(32,12,t.totalPayments$),""),e.R7$(2),e.Y8G("collectionSize",e.bMT(34,14,t.totalPayments$)),e.R50("page",t.service.page),e.Y8G("pageSize",t.service.pageSize)("disabled",!t.paginationDisabled)("maxSize",6)}}function Z(o,l){1&o&&(e.j41(0,"tr",17)(1,"td",31),e.EFF(2,"No records found"),e.k0s()())}let ee=(()=>{class o{constructor(t,i,r,n,a){this.service=t,this.sharedService=i,this.projectService=r,this.datePipe=n,this.modalService=a,this.closeModal=new e.bkB,this.paginationDisabled=!1,this.pageIndex=m.k.page,this.pageSize=m.k.pageSize,this.imageFullPath=m.c.imageBaseUrl}ngOnInit(){this.pageItemList=x.g1,"Payment"===this.ProjectDetails.modelType&&this.getPaymentData()}closeModel(){this.closeModal.emit()}loadPage(t,i){this.pageSize=i,this.pageIndex=t,this.getPaymentData()}getPaymentData(){this.paginationDisabled=!1,this.projectService.fetchPropertyPayments({page:this.pageIndex,limit:this.pageSize,projectId:this.ProjectDetails.projectId,propertyId:this.ProjectDetails.propertyId}).subscribe(i=>{(!i.data||null==typeof i.data.data)&&this.sharedService.displayServerMessage("Technical Error Occurred.","error"),this.paymentTableData$=(0,_.of)(i.data?.paymentList),this.totalPayments$=(0,_.of)(i.data?.total)},i=>{i&&i.error&&400!==i.status&&this.sharedService.displayServerMessage(i.error.message,"error"),this.paginationDisabled=!1},()=>{this.paginationDisabled=!0})}transformDate(t){return this.datePipe.transform(t,"dd/MM/yyyy")||""}openLinkInNewTab(t){t?window.open(t,"_blank"):console.error("Link parameter is required")}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(g.a),e.rXU(b.d),e.rXU(E),e.rXU(p.vh),e.rXU(d.Bq))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-project-individual-detail"]],inputs:{ProjectDetails:"ProjectDetails"},outputs:{closeModal:"closeModal"},features:[e.Jv_([g.a,p.QX,p.vh])],decls:16,vars:3,consts:[[1,"modal-content"],[1,"modal-toggle-wrapper","text-start","dark-sign-up"],[1,"row","align-items-center"],["type","button","aria-label","Close",1,"btn-close","position-absolute","top-0","end-0","m-2","close-btn",3,"click"],[1,"col-12"],[1,"modal-header","justify-content-center","border-0","pb-0","m-0"],[1,"m-1"],["v-if","ProjectDetails.modelType === 'Payment'"],[1,"modal-body"],[1,"row","d-flex"],[1,"w-50"],[1,"my-2","d-flex"],[1,"bold"],[1,"mx-2","form-label"],[1,"mx-2"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive"],[1,"odd"],[1,"d-flex","justify-content-between","p-2","mb-3"],["name","pageSize",1,"form-select",2,"width","auto","cursor","pointer",3,"change","ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3",3,"pageChange","collectionSize","page","pageSize","disabled","maxSize"],[3,"result","term"],[1,"action"],["ngbTooltip","Edit",1,"btn-sm","btn-outline-success","mx-1",3,"click","routerLink"],[1,"icofont","icofont-pencil-alt-2"],["class","btn-sm btn-outline-warning mx-1","ngbTooltip","Image",3,"click",4,"ngIf"],["ngbTooltip","Image",1,"btn-sm","btn-outline-warning","mx-1",3,"click"],[1,"fa","fa-file-image-o"],["colspan","10",1,"dataTables_empty",2,"text-align","center"],[3,"value"],["colspan","10",1,"ProjectDetailsTables_empty",2,"text-align","center"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.bIt("click",function(){return r.closeModel()}),e.k0s(),e.j41(4,"div",4)(5,"h3",5),e.EFF(6),e.nrm(7,"span",6),e.j41(8,"span",7),e.EFF(9),e.k0s()()()(),e.nrm(10,"hr"),e.j41(11,"div",8)(12,"div",9),e.DNE(13,q,72,14)(14,K,35,16)(15,Z,3,0),e.k0s()()()()),2&i&&(e.R7$(6),e.SpI(" ",r.ProjectDetails.modelType," Detail "),e.R7$(3),e.SpI("Of Plot Number : ",r.ProjectDetails.plotNumber,""),e.R7$(4),e.vxM(13,"Project"===r.ProjectDetails.modelType?13:"Payment"===r.ProjectDetails.modelType?14:15))},dependencies:[p.Sq,p.bT,d.s5,d.md,d.Qr,s.qT,s.xH,s.y7,s.wz,s.BC,s.cb,s.vS,s.cV,f.Wk,p.Jj],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{color:inherit!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.bold[_ngcontent-%COMP%]{font-weight:700}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd)   td[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd)   th[_ngcontent-%COMP%]{background-color:#33bfbf1a!important;--bs-table-accent-bg: unset !important}.close-btn[_ngcontent-%COMP%]{z-index:3}"]})}return o})();var te=c(9652);function ie(o,l){if(1&o&&(e.j41(0,"p",24),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("\u20b9",t.details.minPrice," ")}}function re(o,l){if(1&o&&(e.j41(0,"p",24),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("\u20b9",t.details.maxPrice," ")}}function oe(o,l){if(1&o&&(e.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"p",22),e.EFF(4,"Owner OF House : "),e.k0s(),e.j41(5,"p",23),e.EFF(6),e.k0s()(),e.j41(7,"div",21)(8,"p",22),e.EFF(9,"Property Type : "),e.k0s(),e.j41(10,"p",23),e.EFF(11),e.k0s()(),e.j41(12,"div",21)(13,"p",22),e.EFF(14,"Location : "),e.k0s(),e.j41(15,"p",24),e.EFF(16),e.k0s()(),e.j41(17,"div",21)(18,"p",22),e.EFF(19,"Condition : "),e.k0s(),e.j41(20,"p",24),e.EFF(21),e.k0s()(),e.j41(22,"div",21)(23,"p",22),e.EFF(24,"Ownership Type : "),e.k0s(),e.j41(25,"p",24),e.EFF(26),e.k0s()(),e.j41(27,"div",21)(28,"p",22),e.EFF(29,"Year Built : "),e.k0s(),e.j41(30,"p",23),e.EFF(31),e.k0s()(),e.j41(32,"div",21)(33,"p",22),e.EFF(34,"Certification : "),e.k0s(),e.j41(35,"p",23),e.EFF(36),e.k0s()()(),e.j41(37,"div",20)(38,"div",21)(39,"p",22),e.EFF(40,"Minimum Price : "),e.k0s(),e.DNE(41,ie,2,1,"p",25),e.k0s(),e.j41(42,"div",21)(43,"p",22),e.EFF(44,"Maximun Price : "),e.k0s(),e.DNE(45,re,2,1,"p",26),e.k0s(),e.j41(46,"div",21)(47,"p",22),e.EFF(48,"Contact Person : "),e.k0s(),e.j41(49,"p",23),e.EFF(50),e.k0s()(),e.j41(51,"div",21)(52,"p",22),e.EFF(53,"Contact Number : "),e.k0s(),e.j41(54,"p",23),e.EFF(55),e.k0s()(),e.j41(56,"div",21)(57,"p",22),e.EFF(58,"Amenities Nearby : "),e.k0s(),e.j41(59,"p",24),e.EFF(60),e.k0s()(),e.j41(61,"div",21)(62,"p",22),e.EFF(63,"Notes : "),e.k0s(),e.j41(64,"p",24),e.EFF(65),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(6),e.JRh(t.details.OwnerOfProperty),e.R7$(5),e.JRh(null==t.details.propertyType?null:t.details.propertyType.name),e.R7$(5),e.JRh(t.details.location_area),e.R7$(5),e.JRh(t.details.condition.name),e.R7$(5),e.JRh(null==t.details.ownershipTypes?null:t.details.ownershipTypes.name),e.R7$(5),e.JRh(t.details.yearBuilt),e.R7$(5),e.JRh(t.details.certifications),e.R7$(5),e.Y8G("ngIf",t.details.minPrice),e.R7$(4),e.Y8G("ngIf",t.details.maxPrice),e.R7$(5),e.JRh(t.details.contactPerson),e.R7$(5),e.JRh(t.details.contactNumber),e.R7$(5),e.SpI("",t.details.nearby," "),e.R7$(5),e.SpI("",t.details.notes," ")}}function ne(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",33)(1,"form",34)(2,"div",35)(3,"label",36),e.EFF(4,"Image Title"),e.k0s(),e.j41(5,"input",37),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG(2);return e.DH7(n.documentTitle,r)||(n.documentTitle=r),e.Njj(r)}),e.k0s()(),e.j41(6,"div",35)(7,"label",38),e.EFF(8,"Choose Image"),e.k0s(),e.nrm(9,"input",39,1),e.k0s(),e.j41(11,"div",40)(12,"button",41),e.bIt("click",function(){e.eBV(t);const r=e.sdS(10),n=e.XpG(2);return e.Njj(n.addImageDocument(r))}),e.EFF(13,"Next"),e.k0s()()()()}if(2&o){const t=e.XpG(2);e.R7$(5),e.R50("ngModel",t.documentTitle)}}function ae(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",42)(1,"div",35)(2,"label",43),e.EFF(3,"Video Title"),e.k0s(),e.j41(4,"input",44),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG(2);return e.DH7(n.documentTitle,r)||(n.documentTitle=r),e.Njj(r)}),e.k0s()(),e.j41(5,"div",35)(6,"label",45),e.EFF(7,"YouTube Video Link"),e.k0s(),e.j41(8,"input",46),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG(2);return e.DH7(n.img,r)||(n.img=r),e.Njj(r)}),e.k0s()(),e.j41(9,"div",40)(10,"button",41),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.addYoutubeVideo())}),e.EFF(11,"Next"),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.documentTitle),e.R7$(4),e.R50("ngModel",t.img)}}function se(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",33)(1,"div",35)(2,"label",47),e.EFF(3,"Document Title"),e.k0s(),e.j41(4,"input",48),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG(2);return e.DH7(n.documentTitle,r)||(n.documentTitle=r),e.Njj(r)}),e.k0s()(),e.j41(5,"div",35)(6,"label",49),e.EFF(7,"Choose file"),e.k0s(),e.nrm(8,"input",50,1),e.k0s(),e.j41(10,"div",40)(11,"button",41),e.bIt("click",function(){e.eBV(t);const r=e.sdS(9),n=e.XpG(2);return e.Njj(n.addPdfDocument(r))}),e.EFF(12,"Next"),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.documentTitle)}}function ce(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",52)(1,"a",53),e.nrm(2,"img",54)(3,"hr",55),e.j41(4,"p",56),e.EFF(5),e.k0s()(),e.j41(6,"button",57),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.confirmDeleteDocument(r._id))}),e.nrm(7,"i",58),e.k0s()()}if(2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Y8G("href",i.imageFullPath+t.file_,e.B4B),e.R7$(),e.Y8G("src",i.imageFullPath+t.file_,e.B4B),e.R7$(3),e.JRh(t.title)}}function le(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",52)(1,"a",53),e.nrm(2,"img",59)(3,"hr",55),e.j41(4,"p",56),e.EFF(5),e.k0s()(),e.j41(6,"button",57),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.confirmDeleteDocument(r._id))}),e.nrm(7,"i",58),e.k0s()()}if(2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Y8G("href",t.file_,e.B4B),e.R7$(),e.Y8G("src","https://img.youtube.com/vi/"+i.getYouTubeVideoId(t.file_)+"/hqdefault.jpg",e.B4B),e.R7$(3),e.JRh(t.title)}}function de(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",52)(1,"a",53),e.nrm(2,"img",60)(3,"hr",55),e.j41(4,"p",56),e.EFF(5),e.k0s()(),e.j41(6,"button",57),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.confirmDeleteDocument(r._id))}),e.nrm(7,"i",58),e.k0s()()}if(2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Y8G("href",i.imageFullPath+t.file_,e.B4B),e.R7$(4),e.JRh(t.title)}}function me(o,l){if(1&o&&(e.qex(0),e.DNE(1,ce,8,3,"div",51)(2,le,8,3,"div",51)(3,de,8,2,"div",51),e.bVm()),2&o){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","image"===t.type&&t.file_),e.R7$(),e.Y8G("ngIf","youtube"===t.type),e.R7$(),e.Y8G("ngIf","pdf"===t.type)}}function pe(o,l){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",27)(2,"label",28),e.EFF(3,"Document Title"),e.k0s(),e.j41(4,"ng-select",29),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.documentType,r)||(n.documentType=r),e.Njj(r)}),e.bIt("clear",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onClearDocument())})("change",function(r){e.eBV(t);const n=e.XpG();return e.Njj(n.onChangeDocuments(r))}),e.k0s()(),e.DNE(5,ne,14,1,"div",30)(6,ae,12,2,"div",31)(7,se,13,1,"div",30),e.k0s(),e.j41(8,"div",19),e.DNE(9,me,4,3,"ng-container",32),e.k0s()}if(2&o){const t=e.XpG();e.R7$(4),e.Y8G("items",t.selectDocumentType),e.R50("ngModel",t.documentType),e.R7$(),e.Y8G("ngIf","image"===t.documentType),e.R7$(),e.Y8G("ngIf","youtube"===t.documentType),e.R7$(),e.Y8G("ngIf","documents"===t.documentType),e.R7$(2),e.Y8G("ngForOf",t.projectDocuments)}}function he(o,l){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",71),e.bIt("click",function(){const r=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.onRemoveEmployee(r._id))}),e.j41(4,"button",72),e.EFF(5," Remove "),e.k0s()()()}if(2&o){const t=l.$implicit;e.R7$(2),e.SpI(" ",null==t.assignTo?null:t.assignTo.name," ")}}function ge(o,l){if(1&o&&(e.qex(0),e.DNE(1,he,6,1,"tr",32),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.assignedProjects)}}function ue(o,l){1&o&&(e.qex(0),e.j41(1,"tr")(2,"td",73),e.EFF(3," No Record Found"),e.k0s()(),e.bVm())}function fe(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",61)(1,"div",62)(2,"label"),e.EFF(3,"Select Employee"),e.k0s(),e.j41(4,"ng-select",63),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.projectId,r)||(n.projectId=r),e.Njj(r)}),e.bIt("clear",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onClearType())}),e.k0s()(),e.j41(5,"div",64),e.nrm(6,"br"),e.j41(7,"button",65),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onTypeFilter())}),e.nrm(8,"app-feathericon",66),e.k0s()()(),e.j41(9,"table",67)(10,"thead")(11,"tr")(12,"th",68),e.EFF(13,"Employee Name"),e.k0s(),e.j41(14,"th",69),e.EFF(15,"Action"),e.k0s()()(),e.j41(16,"tbody"),e.DNE(17,ge,2,1,"ng-container",70)(18,ue,4,0,"ng-container",70),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(4),e.Y8G("items",t.employeeList),e.R50("ngModel",t.projectId),e.R7$(4),e.Y8G("icon","user-plus"),e.R7$(9),e.Y8G("ngIf",t.assignedProjects.length>0),e.R7$(),e.Y8G("ngIf",0==t.assignedProjects.length)}}let be=(()=>{class o{constructor(t,i,r,n,a,h){this.service=t,this.sharedService=i,this.projectService=r,this.modalService=n,this.route=a,this.router=h,this.active=1,this.imageFullPath=m.c.imageBaseUrl,this.projectDocuments=[],this.assignedProjects=[],this.employeeList=[],this.pageIndex=m.k.page,this.pageSize=m.k.pageSize,this.paginationDisabled=!1,this.isError=!1}ngOnInit(){this.pageItemList=x.g1,this.selectDocumentType=v;const t=this.route.snapshot.queryParamMap.get("data");this.details=t?JSON.parse(t):{},this.route.params.subscribe(i=>{i.id&&(this.isEditMode=!0,this.isDetail=!0,this.isPermission=!0,this.teamId=i.id)})}onTabOpened(t){switch(t){case 1:this.getProjectDetail();break;case 2:case 3:this.getPropertyDetail();break;case 4:this.getProjectDocuments();break;case 5:this.getAssignedProjects(),this.getEmployeeList();break;case 6:this.getPaymentData()}}onClearDocument(){this.documentType="",this.documentTitle="",this.img=""}onChangeDocuments(t){console.log(t),this.documentTitle="",this.img=""}loadPage(t,i){this.pageSize=i,this.pageIndex=t,this.getPropertyDetail()}getAssignedProjects(){this.projectService.getAssignedProjects(this.teamId).subscribe(t=>{if(t.success){this.assignedProjects=[];for(let i of t.data.assignEplloye)this.assignedProjects.unshift(i)}})}getEmployeeList(){this.projectService.getEmpoyeeList().subscribe(t=>{let i=[];for(let r of t.data.employee)i.push({_id:r._id,name:r.name+" ( Emp Id : "+r.id+")"});this.employeeList=i})}onClearType(){this.projectId=null}onTypeFilter(){this.projectId&&(this.sharedService.isLoading=!0,this.projectService.assignProjectToEmployee({projectId:this.teamId,assignTo:this.projectId}).subscribe(i=>{i.success&&this.getAssignedProjects()},i=>{i&&i.error&&this.sharedService.displayServerMessage(i.error.message,"error"),this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1}))}getYouTubeVideoId(t){const r=t.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return r?r[1]:null}onRemoveEmployee(t){this.sharedService.isLoading=!0,void 0!==t&&this.sharedService.confirmBox("Are you sure?","Are you sure you want to delete this employee?").then(n=>{n&&this.projectService.deleteAssignedEmployee(t).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.getAssignedProjects())},a=>{a.error&&this.sharedService.displayServerMessage(a.error.message,"error")},()=>{this.sharedService.isLoading=!1})})}updateProfileImage(t){void 0!==t&&this.sharedService.confirmBox("Are you sure?","Would you like to designate this image as the default image?").then(n=>{n&&this.projectService.setDefaultImage(this.teamId,t).subscribe(a=>{a.success&&this.sharedService.displayServerMessage(a.message,"success")},a=>{a.error&&this.sharedService.displayServerMessage(a.error.message,"error")},()=>{this.sharedService.isLoading=!1})})}getProjectDetail(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.projectService.getProjectDetail(this.teamId).subscribe(t=>{(!t.data||null==typeof t.data.data)&&this.sharedService.displayServerMessage("Technical Error Occurred.","error"),this.details=t.data?.data},t=>{t&&t.error&&("Unauthorized access."===t.error.message?this.sharedService.logOut():400!==t.status&&this.sharedService.displayServerMessage(t.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}getPropertyDetail(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.projectService.getPropertyData(this.teamId,{page:this.pageIndex,limit:this.pageSize}).subscribe(i=>{(!i.data||null==typeof i.data.data)&&this.sharedService.displayServerMessage("Technical Error Occurred.","error"),this.tableData$=(0,_.of)(i.data?.data),this.total$=(0,_.of)(i.data?.totalCount)},i=>{i&&i.error&&("Unauthorized access."===i.error.message?this.sharedService.logOut():400!==i.status&&this.sharedService.displayServerMessage(i.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}onProjectDetailModal(t,i){const r=this.modalService.open(ee,{size:i});r.componentInstance.ProjectDetails=t,r.componentInstance.closeModal.subscribe(()=>{r.close()})}openModal(t,i,r){const n={...t,modelType:i};this.onProjectDetailModal(n,r)}goBack(){this.sharedService.close()}getPaymentData(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.projectService.fetchProjectPayments({projectId:this.teamId}).subscribe(i=>{(!i.data||null==typeof i.data.data)&&this.sharedService.displayServerMessage("Technical Error Occurred.","error"),this.paymentTableData$=(0,_.of)(i.data?.paymentList),this.totalPayments$=(0,_.of)(i.data?.total)},i=>{i&&i.error&&(console.log(i,i.status),400!==i.status&&this.sharedService.displayServerMessage(i.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}getProjectDocuments(){this.projectService.getProjectDocuments(this.teamId).subscribe(t=>{t.success&&(this.projectDocuments=t.data.projectImages)})}confirmDeleteDocument(t){void 0!==t&&this.sharedService.confirmBox("Are you sure?","Do you really want to Delete this Document?").then(n=>{n&&this.projectService.deleteProjectImage(this.teamId,t).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.getProjectDocuments())},a=>{a.error&&this.sharedService.displayServerMessage(a.error.message,"error")})})}redirectToEdit(){this.router.navigate([`admin/projects/edit-project/${this.details._id}`],{state:{data:this.details}}).catch(i=>window.alert("Technical Error Occurred."))}addImageDocument(t){const i=t.files?.[0]||null;if(this.sharedService.isError=!1,this.sharedService.isLoading=!0,!this.documentTitle||!i)return this.isError=!0,this.errorMessage="Image title and file are required.",void(this.sharedService.isLoading=!1);if(i.type.startsWith("image/")){const r=new FormData;r.append("file_",i),r.append("type","image"),r.append("title",this.documentTitle),this.projectService.addProjectDocument(this.teamId,r).subscribe(n=>{n.success&&(this.active=5,this.getProjectDocuments(),this.documentType="")},n=>{this.isError=!0,this.errorMessage=n?.error?.message,this.sharedService.isError=!0,this.sharedService.isLoading=!1},()=>this.sharedService.isLoading=!1)}}addPdfDocument(t){const i=t.files?.[0]||null;if(this.sharedService.isError=!1,this.sharedService.isLoading=!0,!this.documentTitle||!i)return this.isError=!0,this.errorMessage="Document title and file are required.",void(this.sharedService.isLoading=!1);if("application/pdf"===i.type){const r=new FormData;r.append("file_",i),r.append("type","pdf"),r.append("title",this.documentTitle),this.projectService.addProjectDocument(this.teamId,r).subscribe(n=>{n.success&&(this.active=5,this.getProjectDocuments(),this.documentType="")},n=>{this.isError=!0,this.errorMessage=n?.error?.message,this.sharedService.isError=!0,this.sharedService.isLoading=!1},()=>this.sharedService.isLoading=!1)}}addYoutubeVideo(){if(this.sharedService.isError=!1,this.sharedService.isLoading=!0,!this.documentTitle||!this.img)return this.isError=!0,this.errorMessage="Video title and YouTube link are required.",void(this.sharedService.isLoading=!1);const t=new FormData;t.append("file_",this.img),t.append("type","youtube"),t.append("title",this.documentTitle),this.projectService.addProjectDocument(this.teamId,t).subscribe(i=>{i.success&&(this.active=5,this.getProjectDocuments(),this.documentType="")},i=>{this.isError=!0,this.errorMessage=i?.error?.message,this.sharedService.isError=!0,this.sharedService.isLoading=!1},()=>this.sharedService.isLoading=!1)}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(g.a),e.rXU(b.d),e.rXU(E),e.rXU(d.Bq),e.rXU(f.nX),e.rXU(f.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-project-detail"]],features:[e.Jv_([g.a,p.QX,p.vh])],decls:31,vars:6,consts:[["nav","ngbNav"],["fileInput",""],[1,"container-fluid"],[1,"card","card-width"],[1,"row","justify-content-between","mx-3","mt-3"],[1,"col-md-4","d-flex","justify-content-start"],[1,"col-md-4","d-flex","justify-content-end"],[1,"btn","btn-outline-primary","mx-1",3,"click"],[1,"icofont","icofont-arrow-left"],[1,"icofont","icofont-pencil-alt-2"],[1,"card-body","card-height"],["id","myTab","ngbNav","",1,"simple-wrapper","nav","nav-tabs",3,"activeIdChange","activeId"],[1,"nav-item",3,"ngbNavItem"],["id","home-tab","ngbNavLink","",1,"nav-link","txt-primary"],["ngbNavContent",""],[1,"nav-item",3,"click","ngbNavItem"],["id","inbox-tab","ngbNavLink","",1,"nav-link","txt-primary"],["id","myTabContent",1,"tab-content"],[1,"mt-3",3,"ngbNavOutlet"],[1,"row","d-flex"],[1,"w-50"],[1,"my-2","d-flex"],[1,"bold"],[1,"mx-2","form-label"],[1,"mx-2"],["class","mx-2",4,"ngIf"],["class","mx-2 ",4,"ngIf"],[1,"form-group","form-input","position-relative","mb-3","col-md-4"],["for","Title",1,"form-label"],["id","Title","bindLabel","name","bindValue","_id","placeholder","Select Title",1,"custom-select",3,"ngModelChange","clear","change","items","ngModel"],["class","mb-2",4,"ngIf"],["class","mb-2 mt-1",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mb-2"],["id","imageForm","enctype","multipart/form-data"],[1,"form-group"],["for","imgTitle",1,"form-label"],["type","text","name","imgTitle","id","imgTitle","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","imageFile",1,"form-label"],["type","file","name","imageFile","id","imageFile","accept",".jpg, .jpeg, .png","required","",1,"form-control"],[1,"d-flex","justify-content-center","mt-2"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"mb-2","mt-1"],["for","videoTitle",1,"form-label"],["type","text","name","videoTitle","id","videoTitle","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","youtubeLink",1,"form-label"],["type","text","name","youtubeLink","id","youtubeLink","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","docTitle",1,"form-label"],["type","text","name","docTitle","id","docTitle","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","pdfFile",1,"form-label"],["type","file","name","pdfFile","id","pdfFile","accept",".pdf","required","",1,"form-control"],["class","d-flex img_div my-2 mx-1",4,"ngIf"],[1,"d-flex","img_div","my-2","mx-1"],["target","_blank",3,"href"],["alt","projectImg",1,"imageSize","m-2",3,"src"],[1,"img_hr"],[1,"text-center","mb-1"],["ngbTooltip","Delete",1,"btn","btn-outline-danger","img_delete","mx-1",3,"click"],[1,"fa","fa-trash-o"],["alt","YouTubeLogo",1,"imageSize","m-2",3,"src"],["src","assets/images/logo/pdfLogo.svg","alt","PDFLogo",1,"imageSize","m-2"],[1,"row","justify-content-start","mb-3","mt-2"],[1,"col-md-4"],["id","type","bindLabel","name","bindValue","_id","placeholder","Select Employee",1,"custom-select",3,"ngModelChange","clear","items","ngModel"],[1,"col-md-1"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[3,"icon"],[1,"table","table-responsive","table-striped","mt-3"],["scope","col"],["scope","col",1,"d-flex","justify-content-end"],[4,"ngIf"],[1,"justify-content-end","d-flex",3,"click"],[1,"btn","btn-outline-primary"],["colspan","2",1,"text-center"]],template:function(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h3"),e.EFF(5),e.k0s()(),e.j41(6,"div",6)(7,"button",7),e.bIt("click",function(){return e.eBV(n),e.Njj(r.goBack())}),e.EFF(8," Back "),e.nrm(9,"i",8),e.k0s(),e.j41(10,"button",7),e.bIt("click",function(){return e.eBV(n),e.Njj(r.redirectToEdit())}),e.EFF(11," Edit "),e.nrm(12,"i",9),e.k0s()()(),e.nrm(13,"hr"),e.j41(14,"div",10)(15,"ul",11,0),e.mxI("activeIdChange",function(h){return e.eBV(n),e.DH7(r.active,h)||(r.active=h),e.Njj(h)}),e.j41(17,"li",12)(18,"a",13),e.EFF(19,"Info"),e.k0s(),e.DNE(20,oe,66,13,"ng-template",14),e.k0s(),e.j41(21,"li",15),e.bIt("click",function(){return e.eBV(n),e.Njj(r.onTabOpened(4))}),e.j41(22,"a",16),e.EFF(23,"Documents"),e.k0s(),e.DNE(24,pe,10,6,"ng-template",14),e.k0s(),e.j41(25,"li",15),e.bIt("click",function(){return e.eBV(n),e.Njj(r.onTabOpened(5))}),e.j41(26,"a",16),e.EFF(27,"Assigned To"),e.k0s(),e.DNE(28,fe,19,5,"ng-template",14),e.k0s()(),e.j41(29,"div",17),e.nrm(30,"div",18),e.k0s()()()()}if(2&i){const n=e.sdS(16);e.R7$(5),e.SpI(" ",null==r.details?null:r.details.name," "),e.R7$(10),e.R50("activeId",r.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.Y8G("ngbNavItem",3),e.R7$(5),e.Y8G("ngbNavOutlet",n)}},dependencies:[p.Sq,p.bT,te.K,d.Um,d.X9,d.sy,d.Gx,d.Ri,d.WA,d.m_,d.md,s.qT,s.me,s.BC,s.cb,s.YS,s.vS,s.cV,k.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.aling-center[_ngcontent-%COMP%]{align-items:center}.w-40[_ngcontent-%COMP%]{width:40%!important}.fix-width[_ngcontent-%COMP%]{width:auto;height:100%}.lead-Card[_ngcontent-%COMP%]{border:1px black solid}.img-bg[_ngcontent-%COMP%]{background-color:#fff}.card-height[_ngcontent-%COMP%]{min-height:30rem}.imageSize[_ngcontent-%COMP%]{height:8rem;width:13rem}.img_delete[_ngcontent-%COMP%]{display:inline-flex;position:absolute;right:1px;top:4px;padding:4px 9px;border-radius:20px}.img_div[_ngcontent-%COMP%]{border:1px solid black;width:16rem;height:13rem}.img_hr[_ngcontent-%COMP%]{border-top:2px solid black!important;margin-bottom:.5rem}"]})}return o})();var _e=c(7468);var ve=c(5794);const ye=o=>({hidediv:o}),Pe=o=>({show:o});function ke(o,l){1&o&&(e.j41(0,"div",57),e.EFF(1,"This field is required."),e.k0s())}function Fe(o,l){if(1&o&&(e.j41(0,"div",21)(1,"label",58),e.EFF(2,"Villa Type"),e.k0s(),e.nrm(3,"ng-select",59),e.k0s()),2&o){const t=e.XpG();e.R7$(3),e.Y8G("items",t.villaTypeList)}}function Se(o,l){1&o&&(e.j41(0,"div",21)(1,"label",60),e.EFF(2,"Size (in Sq Yard)"),e.k0s(),e.nrm(3,"input",61),e.k0s())}let G=(()=>{class o{constructor(t,i,r,n,a,h,Ee){this.formBuilder=t,this.route=i,this.sharedService=r,this.projectService=n,this.toastrService=a,this.datePipe=h,this.location=Ee,this.active=1,this.isAddMode=!1,this.isProject=!0,this.isProperties=!0,this.isEditPayment=!1,this.isError=!1,this.isVilla=!1,this.isSize=!1,this.propertyType="individual",this.pageIndex=m.k.page,this.pageSize=m.k.pageSize,this.imageFullPath="https://real-state-staging.s3.ap-south-1.amazonaws.com/",this.maxDate=new Date,this.projectDocuments=[],this.employeeList=[],this.assignedProjects=[]}ngOnInit(){this.villaTypeList=$,this.initializeFormOptions(),this.initializeForms(),this.checkRouteParams(),this.fetchAllApi()}initializeFormOptions(){this.maxDate=this.sharedService.maxDate}initializeForms(){this.addEditProjectForm=new j(this.formBuilder)}checkRouteParams(){this.route.params.subscribe(t=>{t.id?this.handleRouteParams(t):(this.isAddMode=!0,this.isProject=!1,this.isProperties=!1)})}handleRouteParams(t){const i=this.route.snapshot.data;this.teamId=t.id,"Edit Project"===i.title&&this.handleEditProject(t)}handleEditProject(t){this.isEditMode=!0,this.getProjectDocuments(),this.getAssignedProjects(),history.state.data.isIndividualProject||(this.propertyType="project"),this.addEditProjectForm.formGroup.patchValue(history.state.data),this.addEditProjectForm.formGroup.get("propertyType")?.setValue(history.state.data.propertyType._id),this.addEditProjectForm.formGroup.get("ownershipTypes")?.setValue(history.state.data.ownershipTypes._id),this.addEditProjectForm.formGroup.get("condition")?.setValue(history.state.data.condition._id),this.addEditProjectForm.formGroup.get("name")?.setValue(history.state.data.name),this.projectName=history.state.data.name}fetchAllApi(){(0,_e.p)({propertyTypeList:this.projectService.fetchPropertyType(),area:this.projectService.fetchAreaPrefrence(),condition:this.projectService.fetchPropertyCondition(),ownership:this.projectService.fetchOwnerShipType(),certification:this.projectService.fetchCertificate()}).subscribe(({propertyTypeList:t,area:i,condition:r,ownership:n,certification:a})=>{this.propertyTypeList=t&&t.data&&t.data.propertyType?t.data.propertyType:[],this.areaTypeList=i&&i.data&&i.data.locationPreference?i.data.locationPreference:[],this.conditionTypeList=r&&r.data&&r.data.propertyConditions?r.data.propertyConditions:[],this.ownershipTypeList=n&&n.data&&n.data.ownershipType?n.data.ownershipType:[],this.certificationTypeList=a&&a.data&&a.data.certificate?a.data.certificate:[]})}onClearType(){this.projectId=null}get isLoading(){return this.sharedService.isLoading}close(){this.isError=!1}getAssignedProjects(){this.projectService.getAssignedProjects(this.teamId).subscribe(t=>{if(t.success){this.assignedProjects=[];for(let i of t.data.assignEplloye)this.assignedProjects.unshift(i)}})}onPropertySelected(t){"Plot"===t.name?(this.isVilla=!1,this.isSize=!0):"Villa"===t.name?(this.isVilla=!0,this.isSize=!0):(this.isVilla=!1,this.isSize=!1)}onRemoveEmployee(t){this.sharedService.isLoading=!0,void 0!==t&&this.sharedService.confirmBox("Are you sure?","Are you sure you want to delete this employee?").then(n=>{n&&this.projectService.deleteAssignedEmployee(t).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.getAssignedProjects())},a=>{a.error&&this.sharedService.displayServerMessage(a.error.message,"error")},()=>{this.sharedService.isLoading=!1})})}onTypeFilter(){this.projectId&&(this.sharedService.isLoading=!0,this.projectService.assignProjectToEmployee({projectId:this.teamId,assignTo:this.projectId}).subscribe(i=>{i.success&&this.getAssignedProjects()},i=>{i&&i.error&&this.sharedService.displayServerMessage(i.error.message,"error"),this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1}))}getYouTubeVideoId(t){const r=t.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return r?r[1]:null}createNewProject(){if(this.addEditProjectForm.formGroup.valid){let t={...this.addEditProjectForm.formGroup.value};const i=new FormData;Object.entries(t).forEach(([a,h])=>{null!=h&&i.append(a,h.toString())}),this.sharedService.isError=!1,this.sharedService.isLoading=!0;const r=a=>{this.errorMessage=a?.error?.message,this.isError=!0,this.sharedService.isError=!0,this.sharedService.isLoading=!1},n=()=>{this.sharedService.isLoading=!1};this.isEditMode?this.projectService.editProject(this.teamId,i).subscribe(a=>{a.success&&this.sharedService.goBack()},r,n):this.projectService.createNewProject(i).subscribe(a=>{a.success&&(this.sharedService.goBack(),this.teamId=a.data.project._id,this.isProject=!0)},r,n)}else this.sharedService.isError=!0,this.errorMessage="Please fill all the required fields correctly.",this.isError=!0,Object.keys(this.addEditProjectForm.formGroup.controls).forEach(t=>{const i=this.addEditProjectForm.formGroup.get(t);i?.markAsTouched(),i?.updateValueAndValidity()})}getProjectDocuments(){this.projectService.getProjectDocuments(this.teamId).subscribe(t=>{t.success&&(this.projectDocuments=t.data.projectImages)})}markFormGroupTouched(t){Object.values(t.controls).forEach(i=>{i.markAsTouched(),i.updateValueAndValidity()})}confirmDeleteDocument(t){void 0!==t&&this.sharedService.confirmBox("Are you sure?","Do you really want to Delete this Document?").then(n=>{n&&this.projectService.deleteProjectImage(this.teamId,t).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.getProjectDocuments())},a=>{a.error&&this.sharedService.displayServerMessage(a.error.message,"error")})})}transformDate(t){return this.datePipe.transform(t,"yyyy-MM-dd")||""}goBack(){this.sharedService.goBack()}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(s.ok),e.rXU(f.nX),e.rXU(b.d),e.rXU(E),e.rXU(ve.tw),e.rXU(p.vh),e.rXU(p.aZ))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-add-edit-project"]],features:[e.Jv_([p.vh])],decls:97,vars:19,consts:[[1,"container-fluid"],[1,"card","card-width"],[1,"row","justify-content-between","m-3"],[1,"col-md-4","d-flex","justify-content-start"],[1,"col-md-2","btn-group","text-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"icofont","icofont-arrow-left"],[1,"card-body","card-height"],[1,"card-body","toast-rtl",3,"ngClass"],[1,"toast","default-show-toast","align-items-center","text-light","bg-danger","border-0","fade",3,"ngClass"],[1,"d-flex","justify-content-between"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[1,"mt-3"],[1,"table-responsive","theme-scroollbar",3,"formGroup"],[1,"justify-content-start","row","mx-0"],[1,"form-group","col-md-6","mb-3"],["for","name",1,"form-label","btn-font"],[1,"font-danger"],["type","text","placeholder","Party Name","autocomplete","off","formControlName","name","id","name",1,"form-control"],["class","text text-danger mt-1",4,"ngIf"],[1,"form-group","form-input","position-relative","col-md-6","mb-3"],["for","type",1,"form-label"],["id","type","bindLabel","name","bindValue","_id","placeholder","Select Expense Type","formControlName","propertyType",1,"",3,"change","items"],["class","form-group form-input position-relative col-md-6 mb-3",4,"ngIf"],["for","Url",1,"form-label"],["type","number","placeholder","Contact number","autocomplete","off","formControlName","location_URL","id","Url",1,"form-control"],["for","area",1,"form-label"],["id","area","bindLabel","name","bindValue","name","placeholder","Select Expense Type","formControlName","location_area",1,"",3,"items"],["for","condition",1,"form-label"],["id","condition","bindLabel","name","bindValue","_id","placeholder","Select Expense Type","formControlName","condition",1,"",3,"items"],["for","ownership",1,"form-label"],["id","ownership","bindLabel","name","bindValue","_id","placeholder","Select Expense Type","formControlName","ownershipTypes",1,"",3,"items"],["for","built",1,"form-label"],["type","number","placeholder","Contact number","autocomplete","off","formControlName","yearBuilt","id","built",1,"form-control"],["for","owner",1,"form-label"],["type","text","placeholder","Contact number","autocomplete","off","formControlName","OwnerOfProperty","id","owner",1,"form-control"],["for","cirtificate",1,"form-label"],["id","cirtificate","bindLabel","name","bindValue","name","placeholder","Select Expense Type","formControlName","certifications",1,"",3,"items"],["for","minPrice",1,"form-label"],["type","text","placeholder","Contact number","autocomplete","off","formControlName","minPrice","id","minPrice",1,"form-control"],["for","maxPrice",1,"form-label"],["type","text","placeholder","Contact number","autocomplete","off","formControlName","maxPrice","id","maxPrice",1,"form-control"],["for","contactPerson",1,"form-label"],["type","text","placeholder","Contact number","autocomplete","off","formControlName","contactPerson","id","contactPerson",1,"form-control"],["for","contactNumber",1,"form-label"],[1,"text-danger"],["type","text","placeholder","Contact number","autocomplete","off","formControlName","contactNumber","id","contactNumber",1,"form-control"],["for","image",1,"form-label"],["type","File","placeholder","Contact number","autocomplete","off","formControlName","image","id","image",1,"form-control"],[1,"form-group","form-input","position-relative","col-md-12","mb-3"],["for","nearby",1,"form-label"],["id","nearby","formControlName","nearby",1,"form-control"],["for","notes",1,"form-label"],["id","notes","formControlName","notes",1,"form-control"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","btn-block",3,"click","disabled"],[1,"text","text-danger","mt-1"],["for","Villa",1,"form-label"],["id","Villa","bindLabel","name","bindValue","_id","placeholder","Select Expense Type","formControlName","type",1,"",3,"items"],["for","size",1,"form-label"],["type","number","placeholder","Contact number","autocomplete","off","formControlName","size","id","size",1,"form-control"]],template:function(i,r){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e.EFF(5),e.k0s()(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return r.goBack()}),e.EFF(8,"Back "),e.nrm(9,"i",6),e.k0s()()(),e.nrm(10,"hr"),e.j41(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),e.EFF(16),e.k0s(),e.j41(17,"button",12),e.bIt("click",function(){return r.close()}),e.k0s()()()(),e.j41(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16)(22,"label",17),e.EFF(23,"Project Name"),e.j41(24,"a",18),e.EFF(25,"*"),e.k0s()(),e.nrm(26,"input",19),e.DNE(27,ke,2,0,"div",20),e.k0s(),e.j41(28,"div",21)(29,"label",22),e.EFF(30,"Project Type"),e.k0s(),e.j41(31,"ng-select",23),e.bIt("change",function(a){return r.onPropertySelected(a)}),e.k0s()(),e.DNE(32,Fe,4,1,"div",24)(33,Se,4,0,"div",24),e.j41(34,"div",21)(35,"label",25),e.EFF(36,"Location URL"),e.k0s(),e.nrm(37,"input",26),e.k0s(),e.j41(38,"div",21)(39,"label",27),e.EFF(40,"Location Area"),e.k0s(),e.nrm(41,"ng-select",28),e.k0s(),e.j41(42,"div",21)(43,"label",29),e.EFF(44,"Select Condition"),e.k0s(),e.nrm(45,"ng-select",30),e.k0s(),e.j41(46,"div",21)(47,"label",31),e.EFF(48,"Ownership Type"),e.k0s(),e.nrm(49,"ng-select",32),e.k0s(),e.j41(50,"div",21)(51,"label",33),e.EFF(52,"Year Built"),e.k0s(),e.nrm(53,"input",34),e.k0s(),e.j41(54,"div",21)(55,"label",35),e.EFF(56,"Owner Type"),e.k0s(),e.nrm(57,"input",36),e.k0s(),e.j41(58,"div",21)(59,"label",37),e.EFF(60,"Select Certificate"),e.k0s(),e.nrm(61,"ng-select",38),e.k0s(),e.j41(62,"div",21)(63,"label",39),e.EFF(64,"Minimum Price"),e.k0s(),e.nrm(65,"input",40),e.k0s(),e.j41(66,"div",21)(67,"label",41),e.EFF(68,"Maximum Price"),e.k0s(),e.nrm(69,"input",42),e.k0s(),e.j41(70,"div",21)(71,"label",43),e.EFF(72,"Contact Person"),e.k0s(),e.nrm(73,"input",44),e.k0s(),e.j41(74,"div",21)(75,"label",45),e.EFF(76,"Contact Number"),e.j41(77,"a",46),e.EFF(78,"*"),e.k0s()(),e.nrm(79,"input",47),e.k0s(),e.j41(80,"div",21)(81,"label",48),e.EFF(82,"Image"),e.k0s(),e.nrm(83,"input",49),e.k0s(),e.j41(84,"div",50)(85,"label",51),e.EFF(86,"Nearby Amenties"),e.k0s(),e.j41(87,"textarea",52),e.EFF(88," "),e.k0s()(),e.j41(89,"div",50)(90,"label",53),e.EFF(91,"Notes"),e.k0s(),e.j41(92,"textarea",54),e.EFF(93," "),e.k0s()(),e.j41(94,"div",55)(95,"button",56),e.bIt("click",function(){return r.createNewProject()}),e.EFF(96),e.k0s()()()()()()()()),2&i){let n;e.R7$(5),e.SpI(" ",r.projectName," "),e.R7$(7),e.Y8G("ngClass",e.eq3(15,ye,!r.isError)),e.R7$(),e.Y8G("ngClass",e.eq3(17,Pe,r.isError)),e.R7$(3),e.JRh(r.errorMessage),e.R7$(3),e.Y8G("formGroup",r.addEditProjectForm.formGroup),e.R7$(8),e.Y8G("ngIf",(null==(n=r.addEditProjectForm.formGroup.get("name"))?null:n.touched)&&(null==(n=r.addEditProjectForm.formGroup.get("name"))||null==n.errors?null:n.errors.required)),e.R7$(4),e.Y8G("items",r.propertyTypeList),e.R7$(),e.Y8G("ngIf",r.isVilla),e.R7$(),e.Y8G("ngIf",r.isSize),e.R7$(8),e.Y8G("items",r.areaTypeList),e.R7$(4),e.Y8G("items",r.conditionTypeList),e.R7$(4),e.Y8G("items",r.ownershipTypeList),e.R7$(12),e.Y8G("items",r.certificationTypeList),e.R7$(34),e.Y8G("disabled",r.isAddMode&&r.isProject),e.R7$(),e.SpI(" ",r.isEditMode?"Update":"Submit"," ")}},dependencies:[p.YU,p.bT,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD,k.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.aling-center[_ngcontent-%COMP%]{align-items:center}.w-40[_ngcontent-%COMP%]{width:40%!important}.fix-width[_ngcontent-%COMP%]{width:auto;height:100%}.lead-Card[_ngcontent-%COMP%]{border:1px black solid}.img-bg[_ngcontent-%COMP%]{background-color:#fff}.card-height[_ngcontent-%COMP%]{min-height:30rem}.icon[_ngcontent-%COMP%]{font-size:large;color:green}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.imageSize[_ngcontent-%COMP%]{height:8rem;width:13rem}.img_delete[_ngcontent-%COMP%]{display:inline-flex;position:absolute;right:1px;top:4px;padding:4px 9px;border-radius:20px}.img_div[_ngcontent-%COMP%]{border:1px solid black;width:16rem;height:13rem}.img_hr[_ngcontent-%COMP%]{border-top:2px solid black!important;margin-bottom:.5rem}.hidediv[_ngcontent-%COMP%]{display:none}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}"]})}return o})();const Te=[{path:"",component:I,children:[{path:"list",component:A,data:{title:"Project Board"}},{path:"details/:id",component:be,data:{title:"Project Detail",breadcrumb:"Project Detail"}},{path:"add-project",component:G,data:{title:"Add New Project",breadcrumb:"Add New Project"}},{path:"edit-project/:id",component:G,data:{title:"Edit Project",breadcrumb:"Edit Project"}}]}];let xe=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.$C({type:o});static#i=this.\u0275inj=e.G2t({imports:[f.iI.forChild(Te),f.iI]})}return o})(),Ce=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.$C({type:o});static#i=this.\u0275inj=e.G2t({imports:[p.MD,T.G,d.c9,d.h_,s.YN,s.X1,d.UN,S.fS,k.MQ,d.Pv,xe]})}return o})()},4714:(M,P,c)=>{c.d(P,{f:()=>S});var p=c(4438);const s={asc:"desc",desc:"","":"asc"};let S=(()=>{class d{constructor(){this.sortable="",this.direction="",this.sort=new p.bkB}rotate(){this.direction=s[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static#e=this.\u0275fac=function(f){return new(f||d)};static#t=this.\u0275dir=p.FsC({type:d,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(f,e){1&f&&p.bIt("click",function(){return e.rotate()}),2&f&&p.AVh("asc","asc"===e.direction)("desc","desc"===e.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}return d})()},2221:(M,P,c)=>{c.d(P,{a:()=>R});var p=c(4412),s=c(1413),S=c(7673);const d=[];var k=c(8141),T=c(152),f=c(5558),e=c(1986),b=c(5312),C=c(4438),D=c(177);let R=(()=>{class g{constructor(u){this.pipe=u,this._loading$=new p.t(!0),this._search$=new s.B,this._data$=new p.t([]),this._total$=new p.t(0),this._state={page:b.k.page,pageSize:b.k.pageSize,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,k.M)(()=>this._loading$.next(!0)),(0,T.B)(200),(0,f.n)(()=>this._search()),(0,e.c)(200),(0,k.M)(()=>this._loading$.next(!1))).subscribe(j=>{this._data$.next(j.Details),this._total$.next(j.total)}),this._search$.next()}get supportdata$(){return this._data$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(u){this._set({page:u})}set pageSize(u){this._set({pageSize:u})}set searchTerm(u){this._set({searchTerm:u})}set sortColumn(u){this._set({sortColumn:u})}set sortDirection(u){this._set({sortDirection:u})}_set(u){Object.assign(this._state,u),this._search$.next()}_search(){const{sortColumn:u,sortDirection:j,pageSize:v,page:F,searchTerm:w}=this._state;let y=function _(g,m,u){return""===u||""===m?g:[...g].sort((j,v)=>{const F=((g,m)=>g<m?-1:g>m?1:0)(j[m],v[m]);return"asc"===u?F:-F})}(d,u,j);y=y.filter(N=>function x(g,m,u){return g.name.toLowerCase().includes(m.toLowerCase())||g.position.toLowerCase().includes(m.toLowerCase())||u.transform(g.salary).includes(m)||g.office.toLowerCase().includes(m.toLowerCase())||u.transform(g.extn).includes(m)||g.email.toLowerCase().includes(m.toLowerCase())}(N,w,this.pipe));const L=y.length;return y=y.slice((F-1)*v,(F-1)*v+v),(0,S.of)({Details:y,total:L})}static#e=this.\u0275fac=function(j){return new(j||g)(C.KVO(D.QX))};static#t=this.\u0275prov=C.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);