"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[510,221,534],{6510:($,D,d)=>{d.r(D),d.d(D,{ExpenseModule:()=>ke});var l=d(177),u=d(7062),F=d(7673),b=d(6536),j=d(4714),x=d(2221),h=d(5312),c=d(9417);class C{constructor(r){this.formBuilder=r,this.formGroup=this.formBuilder.group({date:["",[c.k0.required]],type:[null,[c.k0.required]],details:[""],particulars:[""],amountPaid:["",[c.k0.required]],modeOfPayment:[null,[c.k0.required]],vendorId:[null],investorId:[null],commissionId:[null],empId:[null],projectId:[null],plotNumber:[null],paidBy:[null],chequeNumber:[""],billImage:[""],remark:[""]})}}const P=[{_id:"officeExpense",name:"Office Expense"},{_id:"others",name:"Others"}],M=[{_id:"cheque",name:"Cheque"},{_id:"cash",name:"Cash"},{_id:"NEFT",name:"NEFT"},{_id:"RTGS",name:"RTGS"},{_id:"UPI",name:"UPI"}];var e=d(4438),E=d(2616),R=d(1626);let T=(()=>{class i{constructor(t,s){this.sharedService=t,this.http=s,this.expenseUrl=h.c.adminUrl+"/Employees"}getExpenseList(t){return this.sharedService.getRequest(this.expenseUrl+"/fetchAllExpenses",t)}downloadExpenseList(t){return this.http.get(this.expenseUrl+"/exportExpense",{params:t,responseType:"blob"})}getExpenseListId(t){return this.sharedService.getRequest(this.expenseUrl+"/getExpensesById/"+t)}deleteExpense(t){return this.http.delete(this.expenseUrl+"/deleteExpenses/"+t)}getExpenseDetail(t){return this.sharedService.getRequest(this.expenseUrl+"/getExpensesById/"+t)}createExpense(t){return this.sharedService.postRequest(this.expenseUrl+"/addExpenses",t)}editExpense(t,s){return this.sharedService.putRequest(this.expenseUrl+`/editExpenses/${t}`,s)}getEmpoyeeList(){return this.sharedService.getRequest(h.c.adminUrl+"/Projects/employeeList")}static#e=this.\u0275fac=function(s){return new(s||i)(e.KVO(E.d),e.KVO(R.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function m(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.transformDate(t.expenseData.date.toString()))}}function g(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.commissionId.agentName)}}function p(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.vendorId.name)}}function f(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.empId.name)}}function y(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.investorId.investorName)}}function k(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.particulars)}}function w(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.paidBy.name)}}function _(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.expenseData.projectId.schemeName)}}function S(i,r){if(1&i&&(e.j41(0,"div",10)(1,"p",11),e.EFF(2,"Project Name :"),e.k0s(),e.DNE(3,_,2,1,"p",12),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.expenseData.projectId)}}function L(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.expenseData.plotNumber.plotNumber)}}function N(i,r){if(1&i&&(e.j41(0,"div",10)(1,"p",11),e.EFF(2,"Plot Number :"),e.k0s(),e.DNE(3,L,2,1,"p",12),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.expenseData.projectId)}}function Y(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.modeOfPayment)}}function B(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.changeToCurrency(t.expenseData.amountPaid))}}function X(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.expenseData.chequeNumber)}}function z(i,r){if(1&i&&(e.j41(0,"div",10)(1,"p",11),e.EFF(2,"Cheque Number :"),e.k0s(),e.DNE(3,X,2,1,"p",12),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.expenseData.chequeNumber)}}function U(i,r){if(1&i&&(e.j41(0,"p",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.expenseData.remark)}}let V=(()=>{class i{constructor(t,s,n,o){this.service=t,this.sharedService=s,this.expenseService=n,this.datePipe=o,this.closeModal=new e.bkB,this.imageFullPath=h.c.imageBaseUrl,this.expenseData={}}ngOnInit(){this.getPaymentData()}closeModel(){this.closeModal.emit()}getPaymentData(){this.expenseService.getExpenseListId(this.ProjectDetails.id).subscribe(t=>{t.success&&(this.expenseData=t.data.expense)})}transformDate(t){return this.datePipe.transform(t,"dd/MM/yyyy")||""}openLinkInNewTab(t){t?window.open(t,"_blank"):console.error("Link parameter is required")}changeToCurrency(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t).toString()}static#e=this.\u0275fac=function(s){return new(s||i)(e.rXU(x.a),e.rXU(E.d),e.rXU(T),e.rXU(l.vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-expense-detail"]],inputs:{ProjectDetails:"ProjectDetails"},outputs:{closeModal:"closeModal"},features:[e.Jv_([x.a,l.QX,l.vh])],decls:48,vars:15,consts:[[1,"modal-content"],[1,"modal-toggle-wrapper","text-start","dark-sign-up"],[1,"row","align-items-center"],["type","button","aria-label","Close",1,"btn-close","position-absolute","top-0","end-0","m-2","close-btn",3,"click"],[1,"col-12"],[1,"modal-header","justify-content-center","border-0","pb-0","m-0"],[1,"m-1"],[1,"modal-body"],[1,"row","d-flex"],[1,"row"],[1,"my-2","d-flex","col-md-6"],[1,"my-1","bold"],["class","mx-2 form-label my-1",4,"ngIf"],[1,"mx-2","form-label","my-1"],["class","my-2 d-flex col-md-6",4,"ngIf"],[1,"my-2","d-flex","col-md-12"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.bIt("click",function(){return n.closeModel()}),e.k0s(),e.j41(4,"div",4)(5,"h3",5)(6,"span",6),e.EFF(7," Expense Detail "),e.k0s()()()(),e.nrm(8,"hr"),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"p",11),e.EFF(14,"Payment Date :"),e.k0s(),e.DNE(15,m,2,1,"p",12),e.k0s(),e.j41(16,"div",10)(17,"p",11),e.EFF(18,"Expense Type :"),e.k0s(),e.j41(19,"p",13),e.EFF(20),e.k0s()(),e.j41(21,"div",10)(22,"p",11),e.EFF(23),e.k0s(),e.DNE(24,g,2,1,"p",12)(25,p,2,1,"p",12)(26,f,2,1,"p",12)(27,y,2,1,"p",12)(28,k,2,1,"p",12),e.k0s(),e.j41(29,"div",10)(30,"p",11),e.EFF(31,"Paid By :"),e.k0s(),e.DNE(32,w,2,1,"p",12),e.k0s(),e.DNE(33,S,4,1,"div",14)(34,N,4,1,"div",14),e.j41(35,"div",10)(36,"p",11),e.EFF(37,"Mode Of Payment :"),e.k0s(),e.DNE(38,Y,2,1,"p",12),e.k0s(),e.j41(39,"div",10)(40,"p",11),e.EFF(41,"Amount Paid :"),e.k0s(),e.DNE(42,B,2,1,"p",12),e.k0s(),e.DNE(43,z,4,1,"div",14),e.j41(44,"div",15)(45,"p",11),e.EFF(46,"Remark :"),e.k0s(),e.DNE(47,U,2,1,"p",12),e.k0s()()()()()()),2&s&&(e.R7$(15),e.Y8G("ngIf",n.expenseData.date),e.R7$(5),e.JRh(n.expenseData.type),e.R7$(3),e.SpI("","officeExpense"===n.expenseData.type||"others"===n.expenseData.type?"Particulers":"Paid To",":"),e.R7$(),e.Y8G("ngIf",n.expenseData.commissionId&&"commission"===n.expenseData.type),e.R7$(),e.Y8G("ngIf",n.expenseData.vendorId&&"vendor"===n.expenseData.type),e.R7$(),e.Y8G("ngIf",n.expenseData.empId&&"salary"===n.expenseData.type),e.R7$(),e.Y8G("ngIf",n.expenseData.investorId&&"investor"===n.expenseData.type),e.R7$(),e.Y8G("ngIf",n.expenseData.particulars&&("officeExpense"===n.expenseData.type||"others"===n.expenseData.type)),e.R7$(4),e.Y8G("ngIf",n.expenseData.paidBy),e.R7$(),e.Y8G("ngIf","commission"===n.expenseData.type),e.R7$(),e.Y8G("ngIf","commission"===n.expenseData.type),e.R7$(4),e.Y8G("ngIf",n.expenseData.modeOfPayment),e.R7$(4),e.Y8G("ngIf",n.expenseData.amountPaid),e.R7$(),e.Y8G("ngIf","cheque"===n.expenseData.modeOfPayment),e.R7$(4),e.Y8G("ngIf",n.expenseData.remark))},dependencies:[l.bT],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{color:inherit!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.bold[_ngcontent-%COMP%]{font-weight:700}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd)   td[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd)   th[_ngcontent-%COMP%]{background-color:#33bfbf1a!important;--bs-table-accent-bg: unset !important}.close-btn[_ngcontent-%COMP%]{z-index:3}.badge[_ngcontent-%COMP%]{font-size:16px!important}.icon[_ngcontent-%COMP%]{font-size:large;color:green}"]})}return i})();var v=d(6911),G=d(9818);const A=["openmodal"],J=()=>["/","admin","expense","add-expense"],H=i=>["/","admin","expense","edit-expense",i];function q(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",23)(2,"div",24)(3,"button",25),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onRefreshData())}),e.EFF(4,"Refresh "),e.nrm(5,"i",26),e.k0s()()(),e.j41(6,"div",27)(7,"div",24)(8,"button",28),e.EFF(9,"Add "),e.nrm(10,"i",29),e.k0s()()()()}2&i&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(1,J)))}function Q(i,r){1&i&&e.nrm(0,"hr")}function K(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",30)(1,"label"),e.EFF(2,"Expense Type"),e.k0s(),e.j41(3,"ng-select",31),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.searchTerm,n)||(o.searchTerm=n),e.Njj(n)}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(3),e.Y8G("items",t.expenseTypeList),e.R50("ngModel",t.searchTerm)}}function W(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",30)(1,"label"),e.EFF(2,"Paid By"),e.k0s(),e.j41(3,"ng-select",32),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.employeeTerm,n)||(o.employeeTerm=n),e.Njj(n)}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(3),e.Y8G("items",t.employeeList),e.R50("ngModel",t.employeeTerm)}}function Z(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",33)(1,"label"),e.EFF(2,"Download"),e.k0s(),e.nrm(3,"br"),e.j41(4,"button",25),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.getDownloadData())}),e.nrm(5,"i",34),e.k0s()()}}function ee(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",35),e.nrm(1,"br"),e.j41(2,"div",36)(3,"button",11),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onRefreshData())}),e.EFF(4,"Refresh "),e.nrm(5,"i",26),e.k0s()()()}}function te(i,r){if(1&i&&(e.j41(0,"button",44),e.nrm(1,"i",45),e.k0s()),2&i){const t=e.XpG().$implicit;e.Y8G("routerLink",e.eq3(1,H,null==t?null:t._id))}}function ne(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",46),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.confirmDeleteExpense(n._id))}),e.nrm(1,"i",47),e.k0s()}}function ie(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.openLinkInNewTab(o.imageFullPath+n.billImage))}),e.nrm(1,"i",49),e.k0s()}}function se(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.nrm(2,"ngb-highlight",37),e.k0s(),e.j41(3,"td"),e.nrm(4,"ngb-highlight",37),e.k0s(),e.j41(5,"td"),e.nrm(6,"ngb-highlight",37),e.k0s(),e.j41(7,"td"),e.nrm(8,"ngb-highlight",37),e.k0s(),e.j41(9,"td")(10,"ul",38)(11,"button",39),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.openModal({id:n._id}))}),e.nrm(12,"i",40),e.k0s(),e.DNE(13,te,2,3,"button",41)(14,ne,2,0,"button",42)(15,ie,2,0,"button",43),e.k0s()()()}if(2&i){const t=r.$implicit,s=e.XpG();e.R7$(2),e.Y8G("result",s.transformDate(t.date.toString()))("term",s.service.searchTerm),e.R7$(2),e.Y8G("result",t.type)("term",s.service.searchTerm),e.R7$(2),e.Y8G("result",t.modeOfPayment)("term",s.service.searchTerm),e.R7$(2),e.Y8G("result",t.modeOfPayment)("term",s.service.searchTerm),e.R7$(5),e.Y8G("ngIf",!s.isDetailPage),e.R7$(),e.Y8G("ngIf",!s.isDetailPage&&s.isPermission),e.R7$(),e.Y8G("ngIf",(null==t?null:t.billImage)&&""!==t.billImage)}}function oe(i,r){1&i&&(e.j41(0,"tr",17)(1,"td",50),e.EFF(2,"No records found"),e.k0s()())}function ae(i,r){if(1&i&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.description+" Items per page")}}let re=(()=>{class i{constructor(t,s,n,o,a,I){this.service=t,this.route=s,this.sharedService=n,this.expenseService=o,this.modalService=a,this.datePipe=I,this.pageIndex=h.k.page,this.pageSize=h.k.pageSize,this.pageItemList=[],this.paginationDisabled=!1,this.imageFullPath=h.c.imageBaseUrl,this.propertyType=0,this.isPermission=!1,this.isDetailPage=!1,this.date=new Date,this.maxDate=new Date}ngOnInit(){this.route.params.subscribe(t=>{t.commissionId?(this.expenseId=t.commissionId,this.statusTerm="commission",this.isDetailPage=!0):t.vendorId?(this.expenseId=t.vendorId,this.statusTerm="vendor",this.isDetailPage=!0):t.investorId?(this.expenseId=t.investorId,this.statusTerm="investor",this.isDetailPage=!0):(this.expenseId=null,this.statusTerm=null,this.sharedService.changeTitle("Expense List"),this.startDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-01`,this.endDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-${this.date.getDate()<=9?"0"+this.date.getDate():this.date.getDate()}`)}),this.pageItemList=b.g1,this.maxDate=this.sharedService.maxDate,this.checkPermission(),this.isPermission||(this.employeeId=localStorage.getItem("userId")||""),this.modeOfPaymentList=M,this.expenseTypeList=P,this.getEmployeeList(),this.getExpenseList()}onRefreshData(){this.isDetailPage?(this.startDate="",this.endDate=""):(this.startDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-01`,this.endDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-${this.date.getDate()<=9?"0"+this.date.getDate():this.date.getDate()}`),this.resetPagination(),this.resetFilters(),this.getExpenseList()}loadPage(t,s){this.pageSize=s,this.pageIndex=t,this.getExpenseList()}getExpenseList(){this.sharedService.isLoading=!0,this.paginationDisabled=!1;let t={pageNo:this.pageIndex,limit:this.pageSize,type:this.searchTerm||"",paidBy:this.employeeTerm||"",start_date:this.startDate||"",end_date:this.endDate||"",modeOfPayment:this.modeOfPayment||""};"commission"===this.statusTerm?(t.status=this.statusTerm,t.commissionId=this.expenseId):"vendor"===this.statusTerm?(t.status=this.statusTerm,t.vendorId=this.expenseId):"investor"===this.statusTerm&&(t.status=this.statusTerm,t.investorId=this.expenseId),this.expenseService.getExpenseList(t).subscribe(s=>{const n=s.data?.expense;this.tableData$=(0,F.of)(n),this.total$=(0,F.of)(s.data?.total)},s=>{this.handleError(s)},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}getEmployeeList(){this.expenseService.getEmpoyeeList().subscribe(t=>{let s=[];for(let n of t.data.employee)s.push({_id:n._id,name:n.name+" ( Emp Id : "+n.id+")"});this.employeeList=s})}getDownloadData(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.expenseService.downloadExpenseList({type:this.searchTerm||"",start_date:this.startDate,end_date:this.endDate,modeOfPayment:this.modeOfPayment||""}).subscribe(s=>this.downloadFile(s,"expenses.csv"),s=>this.handleFileError(s),()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}downloadFile(t,s){const n=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(o)}handleFileError(t){if(t.error instanceof Blob&&"application/json"===t.error.type){const s=new FileReader;s.onload=n=>{const o=JSON.parse(n.target.result);this.sharedService.displayServerMessage(o.message,"error")},s.readAsText(t.error)}else t.error&&this.sharedService.displayServerMessage(t.message,"error");this.sharedService.isLoading=!1}changeToCurrency(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t).toString()}onProjectDetailModal(t){const s=this.modalService.open(V,{size:"lg"});s.componentInstance.ProjectDetails=t,s.componentInstance.closeModal.subscribe(()=>{s.close()})}openModal(t){const s={...t};this.onProjectDetailModal(s)}confirmDeleteExpense(t){t&&this.sharedService.confirmBox("Are you sure?","Do you really want to delete this expense?").then(o=>{o&&this.expenseService.deleteExpense(t).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.getExpenseList())},a=>this.sharedService.displayServerMessage(a.error.message,"error"))})}transformDate(t){return this.datePipe.transform(t,"dd/MM/yyyy")||""}convertDateFormat(t){const[s,n,o]=[t.slice(0,4),t.slice(4,6),t.slice(6,8)];return`${o}/${n}/${s}`}checkPermission(){const t=localStorage.getItem("role");t&&(this.isPermission="Admin"===t)}resetPagination(){this.pageIndex=h.k.page,this.pageSize=h.k.pageSize,this.service.page=h.k.page,this.service.pageSize=h.k.pageSize}resetFilters(){this.propertyType=0,this.searchTerm=null}handleError(t){t&&t.error&&("Unauthorized access."===t.error.message?this.sharedService.logOut():400!==t.status&&this.sharedService.displayServerMessage(t.error.message,"error")),this.sharedService.isLoading=!1,this.paginationDisabled=!1}openLinkInNewTab(t){t?window.open(t,"_blank"):console.error("Link parameter is required")}static#e=this.\u0275fac=function(s){return new(s||i)(e.rXU(x.a),e.rXU(u.nX),e.rXU(E.d),e.rXU(T),e.rXU(v.Bq),e.rXU(l.vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-expense-list"]],viewQuery:function(s,n){if(1&s&&(e.GBs(A,5),e.GBs(j.f,5)),2&s){let o;e.mGM(o=e.lsd())&&(n.openModalTemplateRef=o.first),e.mGM(o=e.lsd())&&(n.headers=o)}},features:[e.Jv_([x.a,l.QX,l.vh])],decls:53,vars:41,consts:[[1,"card"],[1,"card-body"],["class","row justify-content-end mb-2",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-start","mb-3","mt-2"],[1,"mb-2"],["id","startDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","value","ngModel"],["id","endDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","value","ngModel","min"],["class","col-md-4 mb-2",4,"ngIf"],["id","type","bindLabel","name","bindValue","_id","placeholder","Mode Of Payment",1,"custom-select",3,"ngModelChange","items","ngModel"],[1,"col-md-1","col-6","mb-2",2,"width","fit-content"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"icofont","icofont-search"],["class","col-md-1 col-6 mb-2",4,"ngIf"],["class","col-md-4 text-end mb-2",4,"ngIf"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive","table-striped"],[1,"odd"],[1,"d-flex","justify-content-between","p-2","mb-3"],["name","pageSize",1,"form-select",2,"width","auto","cursor","pointer",3,"change","ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3",3,"pageChange","collectionSize","page","pageSize","disabled","maxSize"],[1,"row","justify-content-end","mb-2"],[1,"mb-2","mx-1","col-12","col-md-2","text-end"],[1,"btn-group"],[1,"btn","btn-outline-primary",3,"click"],[1,"icon-reload"],[1,"mb-2","mx-1","col-12","col-md-2","text-end",2,"width","fit-content"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"icon-plus"],[1,"col-md-4","mb-2"],["id","type","bindLabel","name","bindValue","_id","placeholder","Type of Expense",1,"custom-select",3,"ngModelChange","items","ngModel"],["id","type","bindLabel","name","bindValue","_id","placeholder","Paid By",1,"custom-select",3,"ngModelChange","items","ngModel"],[1,"col-md-1","col-6","mb-2"],[1,"icofont","icofont-download-alt"],[1,"col-md-4","text-end","mb-2"],[1,"btn-group","col-12","col-md-4"],[3,"result","term"],[1,"action"],["ngbTooltip","Edit",1,"btn-sm","btn-outline-primary","mx-1",3,"click"],["ps-2","","sweet-5","",1,"icofont","icofont-eye-alt"],["class","btn-sm btn-outline-primary mx-1","ngbTooltip","Edit",3,"routerLink",4,"ngIf"],["class","btn-sm btn-outline-danger mx-1","ngbTooltip","Delete",3,"click",4,"ngIf"],["class","btn-sm btn-outline-warning mx-1","ngbTooltip","Image",3,"click",4,"ngIf"],["ngbTooltip","Edit",1,"btn-sm","btn-outline-primary","mx-1",3,"routerLink"],["ps-2","","sweet-5","",1,"icofont","icofont-pencil-alt-2"],["ngbTooltip","Delete",1,"btn-sm","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash-o","px-1","icon_size"],["ngbTooltip","Image",1,"btn-sm","btn-outline-warning","mx-1",3,"click"],[1,"fa","fa-file-image-o"],["colspan","10",1,"dataTables_empty",2,"text-align","center"],[3,"value"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,q,11,2,"div",2)(3,Q,1,0,"hr",3),e.j41(4,"div",4)(5,"div",5)(6,"label"),e.EFF(7,"Start Date"),e.k0s(),e.j41(8,"input",6),e.mxI("ngModelChange",function(a){return e.DH7(n.startDate,a)||(n.startDate=a),a}),e.k0s()(),e.j41(9,"div",5)(10,"label"),e.EFF(11,"End Date"),e.k0s(),e.j41(12,"input",7),e.mxI("ngModelChange",function(a){return e.DH7(n.endDate,a)||(n.endDate=a),a}),e.k0s()(),e.DNE(13,K,4,2,"div",8)(14,W,4,2,"div",8),e.j41(15,"div",5)(16,"label"),e.EFF(17,"Mode Of Payment"),e.k0s(),e.j41(18,"ng-select",9),e.mxI("ngModelChange",function(a){return e.DH7(n.modeOfPayment,a)||(n.modeOfPayment=a),a}),e.k0s()(),e.j41(19,"div",10),e.nrm(20,"br"),e.j41(21,"button",11),e.bIt("click",function(){return n.getExpenseList()}),e.nrm(22,"i",12),e.k0s()(),e.DNE(23,Z,6,0,"div",13)(24,ee,6,0,"div",14),e.k0s(),e.nrm(25,"hr"),e.j41(26,"div",15)(27,"table",16)(28,"thead")(29,"tr")(30,"th"),e.EFF(31,"Date of Payment"),e.k0s(),e.j41(32,"th"),e.EFF(33,"Type Of Expense"),e.k0s(),e.j41(34,"th"),e.EFF(35,"Mode of Payment"),e.k0s(),e.j41(36,"th"),e.EFF(37,"Paid By"),e.k0s(),e.j41(38,"th"),e.EFF(39,"Action"),e.k0s()()(),e.j41(40,"tbody"),e.Z7z(41,se,16,11,"tr",null,e.fX1,!1,oe,3,0,"tr",17),e.nI1(44,"async"),e.k0s()(),e.j41(45,"div",18)(46,"select",19),e.bIt("change",function(){return n.loadPage(n.service.page,n.service.pageSize)}),e.mxI("ngModelChange",function(a){return e.DH7(n.service.pageSize,a)||(n.service.pageSize=a),a}),e.DNE(47,ae,2,2,"option",20),e.k0s(),e.j41(48,"span"),e.EFF(49),e.nI1(50,"async"),e.k0s(),e.j41(51,"ngb-pagination",21),e.nI1(52,"async"),e.mxI("pageChange",function(a){return e.DH7(n.service.page,a)||(n.service.page=a),a}),e.bIt("pageChange",function(){return n.loadPage(n.service.page,n.service.pageSize)}),e.k0s()()()()()),2&s&&(e.R7$(2),e.Y8G("ngIf",!n.isDetailPage),e.R7$(),e.Y8G("ngIf",!n.isDetailPage),e.R7$(2),e.AVh("col-md-2",n.isDetailPage)("col-md-4",!n.isDetailPage),e.R7$(3),e.Y8G("value",n.startDate),e.R50("ngModel",n.startDate),e.R7$(),e.AVh("col-md-2",n.isDetailPage)("col-md-4",!n.isDetailPage),e.R7$(3),e.Y8G("value",n.endDate),e.R50("ngModel",n.endDate),e.Y8G("min",n.startDate),e.R7$(),e.Y8G("ngIf",!n.isDetailPage),e.R7$(),e.Y8G("ngIf",!n.isDetailPage),e.R7$(),e.AVh("col-md-3",n.isDetailPage)("col-md-4",!n.isDetailPage),e.R7$(3),e.Y8G("items",n.modeOfPaymentList),e.R50("ngModel",n.modeOfPayment),e.R7$(5),e.Y8G("ngIf",!n.isDetailPage),e.R7$(),e.Y8G("ngIf",n.isDetailPage),e.R7$(17),e.Dyx(e.bMT(44,35,n.tableData$)),e.R7$(5),e.Y8G("disabled",!n.paginationDisabled),e.R50("ngModel",n.service.pageSize),e.R7$(),e.Y8G("ngForOf",n.pageItemList),e.R7$(2),e.SpI("Total: ",e.bMT(50,37,n.total$),""),e.R7$(2),e.Y8G("collectionSize",e.bMT(52,39,n.total$)),e.R50("page",n.service.page),e.Y8G("pageSize",n.service.pageSize)("disabled",!n.paginationDisabled)("maxSize",6))},dependencies:[l.Sq,l.bT,v.s5,v.md,v.Qr,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,G.vr,u.Wk,l.Jj],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.btn-sm[_ngcontent-%COMP%]{padding-top:3px}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}"]})}return i})();var de=d(7575);function le(i,r){1&i&&e.nrm(0,"mat-progress-bar",1)}let ce=(()=>{class i{constructor(t,s){this.sharedService=t,this.cdref=s}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#e=this.\u0275fac=function(s){return new(s||i)(e.rXU(E.d),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-expense"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(s,n){1&s&&(e.DNE(0,le,1,0,"mat-progress-bar",0),e.nrm(1,"router-outlet")),2&s&&e.Y8G("ngIf",n.isLoading)},dependencies:[l.bT,de.HM,u.n3]})}return i})();var pe=d(5794);const me=()=>["/","admin","expense","list"],he=i=>({hidediv:i}),ge=i=>({show:i});function ue(i,r){1&i&&(e.j41(0,"div",37),e.EFF(1,"Payment Date is required."),e.k0s())}function fe(i,r){1&i&&(e.j41(0,"div",37),e.EFF(1,"Expense Type is required."),e.k0s())}function be(i,r){1&i&&(e.j41(0,"div",37),e.EFF(1,"Amount Paid is required."),e.k0s())}function xe(i,r){1&i&&(e.j41(0,"div",14)(1,"label",38),e.EFF(2,"Cheque Number"),e.k0s(),e.nrm(3,"input",39),e.k0s())}let O=(()=>{class i{constructor(t,s,n,o,a,I,De){this.formBuilder=t,this.route=s,this.router=n,this.sharedService=o,this.expenseService=a,this.toastrService=I,this.datePipe=De,this.isError=!1,this.selectedFile=null,this.isPermission=!1,this.isEditMode=!1}ngOnInit(){this.sharedService.changeTitle("Add Expense"),this.checkPermission(),this.getEmployeeList(),this.modeOfPayment=M,this.expenseTypeList=P,this.addEditExpenseForm=new C(this.formBuilder),this.route.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.teamId=t.id,this.onEditMode(this.teamId),this.sharedService.changeTitle("Edit Expense"))})}getEmployeeList(){this.expenseService.getEmpoyeeList().subscribe(t=>{let s=[];for(let n of t.data.employee)s.push({_id:n._id,name:n.name+" ( Emp Id : "+n.id+")"});this.employeeList=s})}changePayloadDateFormat(t){const s=t.slice(0,4),n=t.slice(5,7);return`${t.slice(8,10)}-${n}-${s}`}close(){this.isError=!1}onFileSelected(t){const s=t.target;s.files&&s.files.length>0&&(this.selectedFile=s.files[0])}transformDate(t){return this.datePipe.transform(t,"yyyy-MM-dd")||""}onEditMode(t){this.expenseService.getExpenseDetail(t).subscribe(s=>{const n=s.data?.expense;if(!n)return;const o=this.transformDate(n.date);this.paymentType=n.modeOfPayment,this.expenseType=n.type,this.addEditExpenseForm.formGroup.patchValue({...n,date:o,paidBy:n.paidBy?._id,plotNumber:n.plotNumber?._id,commissionId:n.commissionId?._id,empId:n.empId?._id,vendorId:n.vendorId?._id,projectId:n.projectId?._id}),this.addEditExpenseForm.formGroup.get("plotNumber")?.setValue(n.plotNumber?._id)},s=>this.handleError(s))}setModeOfPayment(t){this.paymentType=t._id}setTypeOfExpense(t){this.expenseType=t._id;const s=this.addEditExpenseForm.formGroup,n=o=>{o.forEach(a=>s.get(a)?.setValue(null))};switch(s.get("particulars")?.setValue(""),t._id){case"vendor":n(["commissionId","empId","projectId","plotNumber"]);break;case"commission":n(["vendorId","empId"]);break;case"salary":n(["commissionId","vendorId","projectId","plotNumber"]);break;case"officeExpense":case"others":n(["empId","commissionId","vendorId","projectId","plotNumber"])}}checkPermission(){const t=localStorage.getItem("role");t&&(this.isPermission="Admin"===t)}onSubmit(){if(this.addEditExpenseForm.formGroup.valid){let t=this.addEditExpenseForm.formGroup.value;const s=new FormData;Object.keys(this.addEditExpenseForm.formGroup.controls).forEach(a=>{t[a]&&s.append(a,t[a])}),this.selectedFile&&s.append("billImage",this.selectedFile),this.sharedService.isError=!1,this.sharedService.isLoading=!0;const n=a=>{this.errorMessage=a?.error?.message,this.isError=!0,this.sharedService.isError=!0,this.sharedService.isLoading=!1},o=()=>{this.sharedService.isLoading=!1};this.isEditMode?this.expenseService.editExpense(this.teamId,s).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.sharedService.goBack())},n,o):this.expenseService.createExpense(s).subscribe(a=>{a.success&&(this.sharedService.displayServerMessage(a.message,"success"),this.sharedService.goBack())},n,o)}else Object.keys(this.addEditExpenseForm.formGroup.controls).forEach(t=>{const s=this.addEditExpenseForm.formGroup.get(t);s?.markAsTouched(),s?.updateValueAndValidity()})}handleError(t){t&&t.error&&("Unauthorized access."===t.error.message?this.sharedService.logOut():400!==t.status&&this.sharedService.displayServerMessage(t.error.message,"error")),this.sharedService.isLoading=!1}static#e=this.\u0275fac=function(s){return new(s||i)(e.rXU(c.ok),e.rXU(u.nX),e.rXU(u.Ix),e.rXU(E.d),e.rXU(T),e.rXU(pe.tw),e.rXU(l.vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-add-edit-expense"]],features:[e.Jv_([l.vh])],decls:64,vars:19,consts:[[1,"container-fluid"],[1,"card"],[1,"row","justify-content-between","m-3"],[1,"col-md-4","d-flex","justify-content-start"],[1,"col-md-2","btn-group","text-end"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"icofont","icofont-arrow-left"],[1,"card-body"],[1,"card-body","toast-rtl",3,"ngClass"],[1,"toast","default-show-toast","align-items-center","text-light","bg-danger","border-0","fade",3,"ngClass"],[1,"d-flex","justify-content-between"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],["novalidate","",1,"row","g-3","needs-validation","custom-input",3,"formGroup"],[1,"col-md-6"],["for","date",1,"form-label"],[1,"text-danger"],["id","date","type","date","formControlName","date",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","type",1,"form-label"],["id","type","bindLabel","name","bindValue","_id","placeholder","Select Expense Type","formControlName","type",1,"custom-select",3,"change","items"],["for","particulars",1,"form-label"],["id","particulars","placeholder","Particulars","type","text","formControlName","particulars",1,"form-control"],["for","paidTo",1,"form-label"],["id","type","bindLabel","name","bindValue","_id","placeholder","Select Employee","formControlName","paidBy",1,"custom-select",3,"items","clearable"],["for","amountPaid",1,"form-label"],["id","amountPaid","placeholder","Amount Paid","type","text","formControlName","amountPaid",1,"form-control"],["for","modeOfPayment",1,"form-label"],["id","type","bindLabel","name","bindValue","_id","placeholder","Mode Of Payment","formControlName","modeOfPayment",1,"custom-select",3,"change","items"],["class","col-md-6",4,"ngIf"],["for","remark",1,"form-label"],["id","remark","placeholder","Remark","type","text","formControlName","remark",1,"form-control"],["for","imgpicker",1,"form-label"],["type","file","accept",".jpg, .jpeg, .png","id","imgpicker",1,"form-control",3,"change"],[1,"mt-3","d-flex","justify-content-end"],[1,"col-md-1","mx-1","text-end"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"invalid-feedback"],["for","chequeNumber",1,"form-label"],["id","chequeNumber","placeholder","Cheque Number","type","text","formControlName","chequeNumber",1,"form-control"]],template:function(s,n){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"h3"),e.k0s(),e.j41(5,"div",4)(6,"button",5),e.EFF(7,"Back "),e.nrm(8,"i",6),e.k0s()()(),e.nrm(9,"hr"),e.j41(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11),e.EFF(15),e.k0s(),e.j41(16,"button",12),e.bIt("click",function(){return n.close()}),e.k0s()()()(),e.j41(17,"form",13)(18,"div",14)(19,"label",15),e.EFF(20,"Payment Date"),e.j41(21,"a",16),e.EFF(22,"*"),e.k0s()(),e.nrm(23,"input",17),e.DNE(24,ue,2,0,"div",18),e.k0s(),e.j41(25,"div",14)(26,"label",19),e.EFF(27,"Expense Type"),e.j41(28,"a",16),e.EFF(29,"*"),e.k0s()(),e.j41(30,"ng-select",20),e.bIt("change",function(a){return n.setTypeOfExpense(a)}),e.k0s(),e.DNE(31,fe,2,0,"div",18),e.k0s(),e.j41(32,"div",14)(33,"label",21),e.EFF(34,"Particulars"),e.k0s(),e.nrm(35,"input",22),e.k0s(),e.j41(36,"div",14)(37,"label",23),e.EFF(38,"Paid By"),e.k0s(),e.nrm(39,"ng-select",24),e.k0s(),e.j41(40,"div",14)(41,"label",25),e.EFF(42,"Amount Paid"),e.j41(43,"a",16),e.EFF(44,"*"),e.k0s()(),e.nrm(45,"input",26),e.DNE(46,be,2,0,"div",18),e.k0s(),e.j41(47,"div",14)(48,"label",27),e.EFF(49,"Mode Of Payment"),e.k0s(),e.j41(50,"ng-select",28),e.bIt("change",function(a){return n.setModeOfPayment(a)}),e.k0s()(),e.DNE(51,xe,4,0,"div",29),e.j41(52,"div",14)(53,"label",30),e.EFF(54,"Remark"),e.k0s(),e.nrm(55,"input",31),e.k0s(),e.j41(56,"div",14)(57,"label",32),e.EFF(58,"Bill Image"),e.k0s(),e.j41(59,"input",33),e.bIt("change",function(a){return n.onFileSelected(a)}),e.k0s()(),e.j41(60,"div",34)(61,"div",35)(62,"button",36),e.bIt("click",function(){return n.onSubmit()}),e.EFF(63),e.k0s()()()()()()()),2&s){let o,a,I;e.R7$(6),e.Y8G("routerLink",e.lJ4(14,me)),e.R7$(5),e.Y8G("ngClass",e.eq3(15,he,!n.isError)),e.R7$(),e.Y8G("ngClass",e.eq3(17,ge,n.isError)),e.R7$(3),e.JRh(n.errorMessage),e.R7$(2),e.Y8G("formGroup",n.addEditExpenseForm.formGroup),e.R7$(7),e.Y8G("ngIf",null==(o=n.addEditExpenseForm.formGroup.get("date"))?null:o.hasError("required")),e.R7$(6),e.Y8G("items",n.expenseTypeList),e.R7$(),e.Y8G("ngIf",null==(a=n.addEditExpenseForm.formGroup.get("type"))?null:a.hasError("required")),e.R7$(8),e.Y8G("items",n.employeeList)("clearable",!1),e.R7$(7),e.Y8G("ngIf",null==(I=n.addEditExpenseForm.formGroup.get("amountPaid"))?null:I.hasError("required")),e.R7$(4),e.Y8G("items",n.modeOfPayment),e.R7$(),e.Y8G("ngIf","cheque"===n.paymentType),e.R7$(12),e.JRh(n.isEditMode?"Update":"Save")}},dependencies:[l.YU,l.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,G.vr,u.Wk],styles:[".hidediv[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.form_lable[_ngcontent-%COMP%]{margin-top:0;width:50%;height:100%;margin-left:1px;margin-right:1px;background-color:transparent;top:0}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-sizing:border-box;outline:0;padding:.75rem;position:relative;width:100%}.lead-box[_ngcontent-%COMP%]{border:1px rgba(255,255,255,.2117647059) solid;margin-left:0;border-radius:15px}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}"]})}return i})();const _e=[{path:"",component:ce,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:re,data:{title:"Expense Board"}},{path:"add-expense",component:O,data:{title:"Add New Expense",breadcrumb:"Add New Expense"}},{path:"edit-expense/:id",component:O,data:{title:"Edit Expense",breadcrumb:"Edit Expense"}}]}];let ve=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[u.iI.forChild(_e),u.iI]})}return i})();var Ee=d(9631),ye=d(7960);let ke=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[l.MD,ye.G,v.c9,v.h_,c.YN,c.X1,v.UN,Ee.fS,G.MQ,v.Pv,ve]})}return i})()},4714:($,D,d)=>{d.d(D,{f:()=>F});var l=d(4438);const u={asc:"desc",desc:"","":"asc"};let F=(()=>{class b{constructor(){this.sortable="",this.direction="",this.sort=new l.bkB}rotate(){this.direction=u[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static#e=this.\u0275fac=function(h){return new(h||b)};static#t=this.\u0275dir=l.FsC({type:b,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(h,c){1&h&&l.bIt("click",function(){return c.rotate()}),2&h&&l.AVh("asc","asc"===c.direction)("desc","desc"===c.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}return b})()},2221:($,D,d)=>{d.d(D,{a:()=>T});var l=d(4412),u=d(1413),F=d(7673);const b=[];var j=d(8141),x=d(152),h=d(5558),c=d(1986),C=d(5312),P=d(4438),M=d(177);let T=(()=>{class m{constructor(p){this.pipe=p,this._loading$=new l.t(!0),this._search$=new u.B,this._data$=new l.t([]),this._total$=new l.t(0),this._state={page:C.k.page,pageSize:C.k.pageSize,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,j.M)(()=>this._loading$.next(!0)),(0,x.B)(200),(0,h.n)(()=>this._search()),(0,c.c)(200),(0,j.M)(()=>this._loading$.next(!1))).subscribe(f=>{this._data$.next(f.Details),this._total$.next(f.total)}),this._search$.next()}get supportdata$(){return this._data$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(p){this._set({page:p})}set pageSize(p){this._set({pageSize:p})}set searchTerm(p){this._set({searchTerm:p})}set sortColumn(p){this._set({sortColumn:p})}set sortDirection(p){this._set({sortDirection:p})}_set(p){Object.assign(this._state,p),this._search$.next()}_search(){const{sortColumn:p,sortDirection:f,pageSize:y,page:k,searchTerm:w}=this._state;let _=function E(m,g,p){return""===p||""===g?m:[...m].sort((f,y)=>{const k=((m,g)=>m<g?-1:m>g?1:0)(f[g],y[g]);return"asc"===p?k:-k})}(b,p,f);_=_.filter(L=>function R(m,g,p){return m.name.toLowerCase().includes(g.toLowerCase())||m.position.toLowerCase().includes(g.toLowerCase())||p.transform(m.salary).includes(g)||m.office.toLowerCase().includes(g.toLowerCase())||p.transform(m.extn).includes(g)||m.email.toLowerCase().includes(g.toLowerCase())}(L,w,this.pipe));const S=_.length;return _=_.slice((k-1)*y,(k-1)*y+y),(0,F.of)({Details:_,total:S})}static#e=this.\u0275fac=function(f){return new(f||m)(P.KVO(M.QX))};static#t=this.\u0275prov=P.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()}}]);