"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[939,534],{2418:(F,M,o)=>{o.d(M,{n:()=>c});var g=o(177),b=o(7673),C=o(6536),v=o(4714),y=o(2221),u=o(5312),t=o(4438),s=o(2616),_=o(4460),T=o(7062),L=o(6911),D=o(9417),P=o(9818);const A=["openmodal"];function O(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",21)(1,"div",22)(2,"button",23),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.onRefreshData())}),t.EFF(3,"Refresh "),t.nrm(4,"i",24),t.k0s()()()}}function p(n,d){1&n&&t.nrm(0,"hr")}function f(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",8)(1,"label"),t.EFF(2,"Select Employee"),t.k0s(),t.j41(3,"ng-select",26),t.mxI("ngModelChange",function(a){t.eBV(e);const l=t.XpG(2);return t.DH7(l.employeeId,a)||(l.employeeId=a),t.Njj(a)}),t.bIt("clear",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.onClearType())}),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(3),t.Y8G("items",e.employeeList),t.R50("ngModel",e.employeeId)}}function m(n,d){if(1&n&&t.DNE(0,f,4,2,"div",25),2&n){const e=t.XpG();t.Y8G("ngIf",!e.isDetailPage)}}function I(n,d){if(1&n){const e=t.RV6();t.j41(0,"div",10)(1,"label",27),t.EFF(2,"Download"),t.k0s(),t.j41(3,"button",28),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.getDownloadData())}),t.nrm(4,"i",29),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("disabled",!e.tableData$)}}function S(n,d){if(1&n&&(t.j41(0,"a",32),t.nrm(1,"i",33),t.k0s()),2&n){const e=t.XpG().$implicit;t.FCK("href","http://maps.google.com/?q=",e.loc.coordinates[0],",",e.loc.coordinates[1],"",t.B4B)}}function E(n,d){if(1&n&&(t.j41(0,"a",32),t.nrm(1,"i",33),t.k0s()),2&n){const e=t.XpG().$implicit;t.FCK("href","http://maps.google.com/?q=",e.loc.coordinates[0],",",e.loc.coordinates[1],"",t.B4B)}}function k(n,d){if(1&n&&(t.j41(0,"tr")(1,"td"),t.nrm(2,"ngb-highlight",30),t.k0s(),t.j41(3,"td"),t.nrm(4,"ngb-highlight",30),t.k0s(),t.j41(5,"td"),t.nrm(6,"ngb-highlight",30),t.DNE(7,S,2,3,"a",31),t.k0s(),t.j41(8,"td"),t.nrm(9,"ngb-highlight",30),t.DNE(10,E,2,3,"a",31),t.k0s()()),2&n){const e=d.$implicit,i=t.XpG();t.R7$(2),t.Y8G("result",e.empId.name)("term",i.service.searchTerm),t.R7$(2),t.Y8G("result",i.convertDateFormat(e.attDate.toString()))("term",i.service.searchTerm),t.R7$(2),t.Y8G("result",i.convertTimeFormat(e.punchInTime.toString()))("term",i.service.searchTerm),t.R7$(),t.Y8G("ngIf",i.isPermission),t.R7$(2),t.Y8G("result",i.convertTimeFormat(e.punchOutTime.toString()))("term",i.service.searchTerm),t.R7$(),t.Y8G("ngIf",i.isPermission&&"0"!==e.punchOutTime)}}function r(n,d){1&n&&(t.j41(0,"tr",16)(1,"td",34),t.EFF(2,"No records found"),t.k0s()())}function j(n,d){if(1&n&&(t.j41(0,"option",35),t.EFF(1),t.k0s()),2&n){const e=d.$implicit;t.Y8G("value",e.value),t.R7$(),t.JRh(e.description+" Items per page")}}let c=(()=>{class n{constructor(e,i,a,l){this.service=e,this.sharedService=i,this.attendanceService=a,this.route=l,this.pageIndex=u.k.page,this.pageSize=u.k.pageSize,this.title="",this.paginationDisabled=!1,this.date=new Date,this.startDate=new Date,this.endDate=new Date,this.maxDate=new Date,this.isPermission=!0,this.isDetailPage=!1}ngOnInit(){this.pageItemList=C.g1,this.startDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-01`,this.endDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-${this.date.getDate()<=9?"0"+this.date.getDate():this.date.getDate()}`,this.maxDate=this.sharedService.maxDate,this.route.params.subscribe(e=>{e.id&&(this.isDetailPage=!0,this.employeeId=e.id)}),this.checkPermission(),this.getEmployeeList()}loadPage(e,i){this.pageSize=i,this.pageIndex=e,this.getAttendenceList()}onRefreshData(){this.service.page=u.k.page,this.service.pageSize=u.k.pageSize,this.pageIndex=u.k.page,this.pageSize=u.k.pageSize,this.isPermission&&(this.employeeId=null),this.startDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-01`,this.endDate=`${this.date.getFullYear()}-${this.date.getMonth()+1<=9?"0"+(this.date.getMonth()+1):this.date.getMonth()+1}-${this.date.getDate()<=9?"0"+this.date.getDate():this.date.getDate()}`,this.getAttendenceList()}onClearType(){this.employeeId=null}onTypeFilter(e){this.employeeId=e?._id,this.employeeId&&this.getAttendenceList()}getAttendenceList(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.attendanceService.getAttendance({page:this.pageIndex,limit:this.pageSize,startDate:this.startDate,endDate:this.endDate},this.employeeId?`/${this.employeeId}`:"").subscribe(a=>{a.data&&a.data.attList?(this.tableData$=(0,b.of)(a.data.attList??[]),this.total$=(0,b.of)(a.data.total??0)):this.sharedService.displayServerMessage("Technical Error Occurred.","error")},a=>{"Unauthorized access."===a.error.message?this.sharedService.logOut():400!==a?.status&&this.sharedService.displayServerMessage(a?.error?.message??"An error occurred","error"),this.sharedService.isLoading=!1,this.paginationDisabled=!1},()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}getEmployeeList(){this.attendanceService.getEmpoyeeList().subscribe(e=>{let i=[];for(let a of e.data.employee)i.push({_id:a._id,name:a.name+" ( Emp Id : "+a.id+")"});this.employeeList=i})}convertDateFormat(e){return`${e.slice(6,8)}/${e.slice(4,6)}/${e.slice(0,4)}`}convertTimeFormat(e){if("0"===e)return"";const[i,a]=e.length>5?[e.slice(0,2),e.slice(2,4)]:[e.slice(0,1),e.slice(1,3)],l=parseInt(i,10),h=l<12?"AM":"PM";return`${(l%12||12).toString().padStart(2,"0")}:${a} ${h}`}calculateTotalHours(e,i){const[a,l]=[e.padStart(6,"0"),i.padStart(6,"0")],[h,w,U]=[parseInt(a.slice(0,2),10),parseInt(a.slice(2,4),10),parseInt(a.slice(4,6),10)],[G,z,x]=[parseInt(l.slice(0,2),10),parseInt(l.slice(2,4),10),parseInt(l.slice(4,6),10)],B=new Date(0,0,0,h,w,U),$=new Date(0,0,0,G,z,x).getTime()-B.getTime();return`${Math.floor($/36e5).toString().padStart(2,"0")}:${Math.floor($%36e5/6e4).toString().padStart(2,"0")}Hrs`}changeBackgroundColor(e,i,a){const l=parseInt(a.slice(0,4),10),h=parseInt(a.slice(4,6),10)-1,w=parseInt(a.slice(6,8),10),U=new Date,G=new Date(l,h,w),z=U.toDateString()===G.toDateString();if(e=e.padStart(6,"0"),(i=i.padStart(6,"0")).length<6)return!1;"0"===i&&(i="160000");const x=R=>new Date(0,0,0,parseInt(R.slice(0,2),10),parseInt(R.slice(2,4),10),parseInt(R.slice(4,6),10)),[B,Y]=[x(e),x(i)],[$,X]=[new Date(0,0,0,10,15),new Date(0,0,0,18,45)];return!(z&&B<$&&"000000"===i)&&(B>$||Y<X)}getDownloadData(){this.sharedService.isLoading=!0,this.paginationDisabled=!1,this.attendanceService.getDownloadData({startDate:this.startDate,endDate:this.endDate,isExport:!0}).subscribe(i=>this.downloadFile(i,"attendance.csv"),i=>this.handleError(i),()=>{this.sharedService.isLoading=!1,this.paginationDisabled=!0})}downloadFile(e,i){const a=new Blob([e],{type:"text/csv"}),l=window.URL.createObjectURL(a),h=document.createElement("a");h.href=l,h.download=i,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(l)}handleError(e){e&&e.error&&this.sharedService.displayServerMessage(e.error,"error"),this.sharedService.isLoading=!1,this.paginationDisabled=!1}checkPermission(){const e=localStorage.getItem("permission");let i={};null!==e&&(i=JSON.parse(e),this.isPermission=i.attandance&&i.team),this.isPermission||(this.employeeId=localStorage.getItem("userId")),this.getAttendenceList()}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(y.a),t.rXU(s.d),t.rXU(_.$),t.rXU(T.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-attendance-list"]],viewQuery:function(i,a){if(1&i&&(t.GBs(A,5),t.GBs(v.f,5)),2&i){let l;t.mGM(l=t.lsd())&&(a.openModalTemplateRef=l.first),t.mGM(l=t.lsd())&&(a.headers=l)}},features:[t.Jv_([y.a,g.QX])],decls:46,vars:26,consts:[[1,"card"],[1,"card-body"],["class","row justify-content-between mb-2",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-start","mb-3","mt-2"],[1,"col-md-2"],["id","startDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","value","max","ngModel"],["id","endDate","placeholder","","type","date",1,"form-control","digits","list-input",3,"ngModelChange","value","max","ngModel"],[1,"col-md-3"],[1,"col-md-3","d-flex","col-12"],[1,"mx-2"],["ngbTooltip","Search",1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"icofont","icofont-search"],["class","mx-2",4,"ngIf"],[1,"table-responsive","theme-scroollbar"],[1,"table","table-responsive","table-striped"],[1,"odd"],[1,"d-flex","justify-content-between","p-2","mb-3"],["name","pageSize",1,"form-select",2,"width","auto","cursor","pointer",3,"change","ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3",3,"pageChange","collectionSize","page","pageSize","disabled","maxSize"],[1,"row","justify-content-between","mb-2"],[1,"col-md-2","btn-group","text-start","mb-2","mx-1"],[1,"btn","btn-outline-primary",3,"click"],[1,"icon-reload"],["class","col-md-3",4,"ngIf"],["id","type","bindLabel","name","bindValue","_id","placeholder","Select Employee",1,"custom-select",3,"ngModelChange","clear","items","ngModel"],[1,"w-100"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"icofont","icofont-download-alt"],[3,"result","term"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[1,"icon-location-pin","px-1"],["colspan","10",1,"dataTables_empty",2,"text-align","center"],[3,"value"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,O,5,0,"div",2)(3,p,1,0,"hr",3),t.j41(4,"div",4)(5,"div",5)(6,"label"),t.EFF(7,"Start Date"),t.k0s(),t.j41(8,"input",6),t.mxI("ngModelChange",function(h){return t.DH7(a.startDate,h)||(a.startDate=h),h}),t.k0s()(),t.j41(9,"div",5)(10,"label"),t.EFF(11,"End Date"),t.k0s(),t.j41(12,"input",7),t.mxI("ngModelChange",function(h){return t.DH7(a.endDate,h)||(a.endDate=h),h}),t.k0s()(),t.DNE(13,m,1,1,"div",8),t.j41(14,"div",9)(15,"div",10),t.nrm(16,"br"),t.j41(17,"button",11),t.bIt("click",function(){return a.getAttendenceList()}),t.nrm(18,"i",12),t.k0s()(),t.DNE(19,I,5,1,"div",13),t.k0s()(),t.nrm(20,"hr"),t.j41(21,"form",14)(22,"table",15)(23,"thead")(24,"tr")(25,"th"),t.EFF(26,"Name"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Date"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Punch-In Time"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Punch-Out Time"),t.k0s()()(),t.j41(33,"tbody"),t.Z7z(34,k,11,10,"tr",null,t.fX1,!1,r,3,0,"tr",16),t.nI1(37,"async"),t.k0s()(),t.j41(38,"div",17)(39,"select",18),t.bIt("change",function(){return a.loadPage(a.service.page,a.service.pageSize)}),t.mxI("ngModelChange",function(h){return t.DH7(a.service.pageSize,h)||(a.service.pageSize=h),h}),t.DNE(40,j,2,2,"option",19),t.k0s(),t.j41(41,"span"),t.EFF(42),t.nI1(43,"async"),t.k0s(),t.j41(44,"ngb-pagination",20),t.nI1(45,"async"),t.mxI("pageChange",function(h){return t.DH7(a.service.page,h)||(a.service.page=h),h}),t.bIt("pageChange",function(){return a.loadPage(a.service.page,a.service.pageSize)}),t.k0s()()()()()),2&i&&(t.R7$(2),t.Y8G("ngIf",!a.isDetailPage),t.R7$(),t.Y8G("ngIf",!a.isDetailPage),t.R7$(5),t.Y8G("value",a.startDate)("max",a.maxDate),t.R50("ngModel",a.startDate),t.R7$(4),t.Y8G("value",a.endDate)("max",a.maxDate),t.R50("ngModel",a.endDate),t.R7$(),t.vxM(13,a.isPermission?13:-1),t.R7$(6),t.Y8G("ngIf",a.isPermission),t.R7$(15),t.Dyx(t.bMT(37,20,a.tableData$)),t.R7$(5),t.Y8G("disabled",!a.paginationDisabled),t.R50("ngModel",a.service.pageSize),t.R7$(),t.Y8G("ngForOf",a.pageItemList),t.R7$(2),t.SpI("Total: ",t.bMT(43,22,a.total$),""),t.R7$(2),t.Y8G("collectionSize",t.bMT(45,24,a.total$)),t.R50("page",a.service.page),t.Y8G("pageSize",a.service.pageSize)("disabled",!a.paginationDisabled)("maxSize",6))},dependencies:[g.Sq,g.bT,L.s5,L.md,L.Qr,D.qT,D.xH,D.y7,D.me,D.wz,D.BC,D.cb,D.vS,D.cV,P.vr,g.Jj],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}.lateEntry[_ngcontent-%COMP%]{color:#e23131!important}.button-width[_ngcontent-%COMP%]{width:10%}"]})}return n})()},9939:(F,M,o)=>{o.r(M),o.d(M,{AttendanceModule:()=>k});var g=o(177),b=o(9417),C=o(9631),v=o(6911),y=o(9818),u=o(7960),t=o(7062),s=o(4438),_=o(2616),T=o(7575);function L(r,j){1&r&&s.nrm(0,"mat-progress-bar",1)}let D=(()=>{class r{constructor(c,n){this.sharedService=c,this.cdref=n}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||r)(s.rXU(_.d),s.rXU(s.gRc))};static#e=this.\u0275cmp=s.VBU({type:r,selectors:[["app-attendance"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(n,d){1&n&&(s.DNE(0,L,1,0,"mat-progress-bar",0),s.nrm(1,"router-outlet")),2&n&&s.Y8G("ngIf",d.isLoading)},dependencies:[g.bT,t.n3,T.HM]})}return r})();var P=o(2418),A=o(4714),O=o(2221),p=o(4460);let f=(()=>{class r{constructor(){}getCurrentLocation(){return new Promise((c,n)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(d=>{d&&c({lat:d.coords.latitude,lng:d.coords.longitude})},d=>console.log(d)):n("Geolocation is not supported by this browser.")})}static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275prov=s.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const m=["openmodal"],S=[{path:"",component:D,children:[{path:"list",component:P.n,data:{title:"Attendance Board"}},{path:"punch",component:(()=>{class r{constructor(c,n,d,e,i,a){this.service=c,this.sharedService=n,this.attendanceService=d,this.modalService=e,this.route=i,this.locationService=a,this.location={lat:26.85358663613167,lng:75.7707510358477},this.isPunchIn=!1,this.isPunchOut=!0}ngOnInit(){this.getLocation(),this.checkAttendanceStatus()}getLocation(){this.locationService.getCurrentLocation().then(c=>{this.location=c}).catch(c=>{this.locationError=c.message})}punchIn(){this.sharedService.isLoading=!0,this.location?this.attendanceService.markAttendance({punchIn:!0,lat:this.location.lat,long:this.location.lng}).subscribe(n=>{n.success&&this.checkAttendanceStatus()},n=>{n&&n.error&&400!==n.status&&this.sharedService.displayServerMessage(n.error.message,"error"),this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1}):this.sharedService.displayServerMessage(this.locationError,"error")}punchOut(){this.sharedService.isLoading=!0,this.location?this.attendanceService.markAttendance({punchOut:!0,lat:this.location.lat,long:this.location.lng}).subscribe(n=>{n.success&&this.checkAttendanceStatus()},n=>{n&&n.error&&400!==n.status&&this.sharedService.displayServerMessage(n.error.message,"error"),this.sharedService.isLoading=!1},()=>{this.sharedService.isLoading=!1}):this.sharedService.displayServerMessage(this.locationError,"error")}checkAttendanceStatus(){const c=localStorage.getItem("userId")||"";this.attendanceService.checkAttendanceStatus(c).subscribe(n=>{n.success&&(this.isPunchIn=n.data.checkTodayAtt.punchIn,this.isPunchOut=n.data.checkTodayAtt.punchOut,this.punchInTime=this.convertTimeFormat(n.data.checkTodayAtt.punchInTime.toString()),this.punchOutTime=this.convertTimeFormat(n.data.checkTodayAtt.punchOutTime.toString()))},n=>{"Unauthorized access."===n.error.message&&this.sharedService.logOut()})}convertTimeFormat(c){if("0"===c)return"";const[n,d]=c.length>5?[c.slice(0,2),c.slice(2,4)]:[c.slice(0,1),c.slice(1,3)],e=parseInt(n,10),i=e<12?"AM":"PM";return`${(e%12||12).toString().padStart(2,"0")}:${d} ${i}`}static#t=this.\u0275fac=function(n){return new(n||r)(s.rXU(O.a),s.rXU(_.d),s.rXU(p.$),s.rXU(v.Bq),s.rXU(t.nX),s.rXU(f))};static#e=this.\u0275cmp=s.VBU({type:r,selectors:[["app-attendance-punch-in-out"]],viewQuery:function(n,d){if(1&n&&(s.GBs(m,5),s.GBs(A.f,5)),2&n){let e;s.mGM(e=s.lsd())&&(d.openModalTemplateRef=e.first),s.mGM(e=s.lsd())&&(d.headers=e)}},features:[s.Jv_([O.a,g.QX])],decls:14,vars:4,consts:[[1,"card"],[1,"card-body","card-height"],[1,"justify-content-center","mb-2",2,"min-height","10rem"],[1,"row",2,"display","flex","align-items","center"],[1,"d-flex","flex-column","align-items-center","mb-5"],["type","button",1,"btn","btn-primary","mb-2",3,"click","disabled"],[1,"d-flex","flex-column","align-items-center","ml-md-3"]],template:function(n,d){1&n&&(s.j41(0,"div",0)(1,"div",1),s.nrm(2,"div",2),s.j41(3,"div",3)(4,"div",4)(5,"button",5),s.bIt("click",function(){return d.punchIn()}),s.EFF(6,"Punch In"),s.k0s(),s.j41(7,"p"),s.EFF(8),s.k0s()(),s.j41(9,"div",6)(10,"button",5),s.bIt("click",function(){return d.punchOut()}),s.EFF(11,"Punch Out"),s.k0s(),s.j41(12,"p"),s.EFF(13),s.k0s()()()()()),2&n&&(s.R7$(5),s.Y8G("disabled",d.isPunchIn),s.R7$(3),s.SpI("Punch in Time: ",d.punchInTime,""),s.R7$(2),s.Y8G("disabled",d.isPunchOut),s.R7$(3),s.SpI("Punch Out Time: ",d.punchOutTime,""))},styles:[".card-height[_ngcontent-%COMP%]{min-height:30rem}"]})}return r})(),data:{title:"Mark Attendance"}}]}];let E=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=s.$C({type:r});static#n=this.\u0275inj=s.G2t({imports:[t.iI.forChild(S),t.iI]})}return r})(),k=(()=>{class r{static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275mod=s.$C({type:r});static#n=this.\u0275inj=s.G2t({imports:[g.MD,E,u.G,v.c9,v.h_,b.YN,b.X1,v.UN,C.fS,y.MQ]})}return r})()},4460:(F,M,o)=>{o.d(M,{$:()=>y});var g=o(5312),b=o(4438),C=o(2616),v=o(1626);let y=(()=>{class u{constructor(s,_){this.sharedService=s,this.http=_,this.teamsUrl=g.c.adminUrl+"/Employees"}getAttendance(s,_){return this.sharedService.getRequest(this.teamsUrl+"/attendanceList"+(_??""),s)}getDownloadData(s){return this.http.get(this.teamsUrl+"/attendanceExport",{params:s,responseType:"blob"})}getEmpoyeeList(){return this.sharedService.getRequest(g.c.adminUrl+"/Projects/employeeList")}markAttendance(s){return this.sharedService.postRequest(this.teamsUrl+"/attendance",s)}checkAttendanceStatus(s){return this.sharedService.getRequest(this.teamsUrl+"/checkDayAttendance/"+s)}static#t=this.\u0275fac=function(_){return new(_||u)(b.KVO(C.d),b.KVO(v.Qq))};static#e=this.\u0275prov=b.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},4714:(F,M,o)=>{o.d(M,{f:()=>C});var g=o(4438);const b={asc:"desc",desc:"","":"asc"};let C=(()=>{class v{constructor(){this.sortable="",this.direction="",this.sort=new g.bkB}rotate(){this.direction=b[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}static#t=this.\u0275fac=function(t){return new(t||v)};static#e=this.\u0275dir=g.FsC({type:v,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(t,s){1&t&&g.bIt("click",function(){return s.rotate()}),2&t&&g.AVh("asc","asc"===s.direction)("desc","desc"===s.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}})}return v})()},2221:(F,M,o)=>{o.d(M,{a:()=>O});var g=o(4412),b=o(1413),C=o(7673);const v=[];var y=o(8141),u=o(152),t=o(5558),s=o(1986),_=o(5312),T=o(4438),L=o(177);let O=(()=>{class p{constructor(m){this.pipe=m,this._loading$=new g.t(!0),this._search$=new b.B,this._data$=new g.t([]),this._total$=new g.t(0),this._state={page:_.k.page,pageSize:_.k.pageSize,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,y.M)(()=>this._loading$.next(!0)),(0,u.B)(200),(0,t.n)(()=>this._search()),(0,s.c)(200),(0,y.M)(()=>this._loading$.next(!1))).subscribe(I=>{this._data$.next(I.Details),this._total$.next(I.total)}),this._search$.next()}get supportdata$(){return this._data$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(m){this._set({page:m})}set pageSize(m){this._set({pageSize:m})}set searchTerm(m){this._set({searchTerm:m})}set sortColumn(m){this._set({sortColumn:m})}set sortDirection(m){this._set({sortDirection:m})}_set(m){Object.assign(this._state,m),this._search$.next()}_search(){const{sortColumn:m,sortDirection:I,pageSize:S,page:E,searchTerm:k}=this._state;let r=function P(p,f,m){return""===m||""===f?p:[...p].sort((I,S)=>{const E=((p,f)=>p<f?-1:p>f?1:0)(I[f],S[f]);return"asc"===m?E:-E})}(v,m,I);r=r.filter(c=>function A(p,f,m){return p.name.toLowerCase().includes(f.toLowerCase())||p.position.toLowerCase().includes(f.toLowerCase())||m.transform(p.salary).includes(f)||p.office.toLowerCase().includes(f.toLowerCase())||m.transform(p.extn).includes(f)||p.email.toLowerCase().includes(f.toLowerCase())}(c,k,this.pipe));const j=r.length;return r=r.slice((E-1)*S,(E-1)*S+S),(0,C.of)({Details:r,total:j})}static#t=this.\u0275fac=function(I){return new(I||p)(T.KVO(L.QX))};static#e=this.\u0275prov=T.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);