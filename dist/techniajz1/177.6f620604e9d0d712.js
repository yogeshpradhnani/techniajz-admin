"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[177],{5177:(_,b,l)=>{l.d(b,{o:()=>A});var m=l(6536),s=l(9417);class v{constructor(u){this.formBuilder=u,this.formGroup=this.formBuilder.group({name:[null,[s.k0.required,s.k0.pattern("^[a-zA-Z '-]+$")]],mobile:[null,[s.k0.pattern("^[0-9]{10}$"),s.k0.required]],gender:[null,[s.k0.required]],email:[null,[s.k0.email,s.k0.required]],designationId:[null],dob:[null],alternate_number:["",[s.k0.pattern("^[0-9]{10}$")]],isWhatsappNumber:[!1],emergencyNumber:["",[s.k0.pattern("^[0-9]{10}$")]],responsibilities:[""],highest_qualification:[""],communicationSkill:[""],address:[""],permanentAddress:[""],blood_group:[null],current_salary:[""],image:[""]})}}var e=l(4438),f=l(7062),p=l(2616),C=l(5576),i=l(5794),c=l(177),T=l(9818);const w=a=>({hidediv:a}),S=a=>({show:a}),j=a=>({"was-validated":a});function P(a,u){if(1&a&&(e.j41(0,"div"),e.nrm(1,"img",54),e.k0s()),2&a){const o=e.XpG();e.R7$(),e.Y8G("src",o.selectedFiles.previewUrl,e.B4B)}}function x(a,u){1&a&&(e.j41(0,"div",55),e.EFF(1," Name is required. "),e.k0s())}function D(a,u){1&a&&(e.j41(0,"div",56),e.EFF(1," Please enter a valid Name. "),e.k0s())}function R(a,u){1&a&&(e.j41(0,"div",56),e.EFF(1," Enter valid mobile number. "),e.k0s())}function M(a,u){1&a&&(e.j41(0,"div",55),e.EFF(1," Mobile is required. "),e.k0s())}function G(a,u){1&a&&(e.j41(0,"div",55),e.EFF(1," Date Of Birth is required. "),e.k0s())}function I(a,u){1&a&&(e.j41(0,"div",56),e.EFF(1," Gender is required. "),e.k0s())}function U(a,u){1&a&&(e.j41(0,"div",55),e.EFF(1," Email is required. "),e.k0s())}function N(a,u){1&a&&(e.j41(0,"div",56),e.EFF(1," Please enter a valid email address. "),e.k0s())}let A=(()=>{class a{constructor(o,r,t,n,d,h,g){this.formBuilder=o,this.route=r,this.router=t,this.sharedService=n,this.teamsService=d,this.toastrService=h,this.location=g,this.isError=!1,this.selectedFiles={},this.isEditMode=!1,this.isDetail=!0,this.isPermission=!0,this.isProfile=!1,this.maxDate=new Date,this.show=!1,this.validate=!1,this.active=1}ngOnInit(){this.genderTypeList=m.Hf,this.bloodGroupList=m.Nx,this.maxDate=this.sharedService.maxDate,this.addEditTeamForm=new v(this.formBuilder),this.getDesignationList(),this.route.params.subscribe(o=>{o.id?(this.teamId=o.id,this.isEditMode=!0,this.route.data.subscribe(r=>{"Edit Team"===r.title?(this.isDetail=!0,this.isPermission=!0,this.onEditMode(this.teamId)):"Edit Profile"===r.title&&(this.isProfile=!0,this.isDetail=!0,this.isPermission=!1,this.onEditMode(this.teamId))})):(this.isEditMode=!1,this.isDetail=!0,this.isPermission=!1)})}errorMsgShowed(o){const r=this.addEditTeamForm.formGroup?.get(o);return{"error-icon":r?.hasError("required")&&this.validate,"success-icon":!r?.hasError("required")&&this.validate,"error-shadow":r?.hasError("required")&&this.validate,"success-shadow":!r?.hasError("required")&&this.validate}}onEditMode(o){this.teamsService.getEmployeeDetail(o).subscribe(t=>{let n=t.data.employee,d=this.changeResponseDateFormat(n.dob);t.data&&(this.addEditTeamForm.formGroup.patchValue(n),this.addEditTeamForm.formGroup.get("dob")?.setValue(d),this.addEditTeamForm.formGroup.get("designationId")?.setValue(n.designationId?._id),this.teamName=n.name,this.employeeId=n.id,this.employeePermission=n.permission)})}showPassword(){this.show=!this.show}changeResponseDateFormat(o){return`${o.slice(6,10)}-${o.slice(3,5)}-${o.slice(0,2)}`}changePayloadDateFormat(o){const r=o.slice(0,4),t=o.slice(5,7);return`${o.slice(8,10)}-${t}-${r}`}onSubmit(){if(this.validate=!0,this.addEditTeamForm.formGroup.valid){this.validate=!1;let o=this.addEditTeamForm.formGroup.value;o.dob=this.changePayloadDateFormat(o.dob);const r=new FormData;Object.keys(this.addEditTeamForm.formGroup.controls).forEach(d=>{r.append(d,o[d])}),this.sharedService.isError=!1,this.sharedService.isLoading=!0;const t=d=>{this.errorMessage=d?.error?.message,this.isError=!0,this.sharedService.isError=!0,this.sharedService.isLoading=!1},n=()=>{this.sharedService.isLoading=!1};this.isEditMode?this.teamsService.editEmployee(r,this.teamId).subscribe(d=>{d.success&&this.sharedService.goBack()},t,n):this.teamsService.addEmployee(r).subscribe(d=>{if(d.success){this.sharedService.goBack();const h=d.data.newEmployee;this.teamId=h._id,this.employeeId=h.id,this.isDetail=!1,this.isPermission=!0}},t,n)}}setPermission(){const o={};for(let r of this.permissionList)o[r.slug]=!!r.status&&r.status;this.teamsService.updateEmployeePermission(o,this.employeeId).subscribe(r=>{r.data&&this.router.navigate(["admin/team/list"])},r=>{this.errorMessage=r?.error?.message,this.isError=!0,this.sharedService.isError=!0},()=>this.sharedService.isLoading=!1)}onFileSelected(o){const r=o.target.files[0];if(r){const t=new FileReader;t.onload=()=>{this.selectedFiles={name:r.name,previewUrl:t.result}},t.readAsDataURL(r),this.addEditTeamForm.formGroup.get("image")?.setValue(r)}}close(){this.isError=!1}goBack(){this.sharedService.goBack()}getDesignationList(){this.teamsService.getAllDesignation().subscribe(o=>{o.success&&(this.designationList=o.data.designation)})}static#e=this.\u0275fac=function(r){return new(r||a)(e.rXU(s.ok),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(p.d),e.rXU(C.O),e.rXU(i.tw),e.rXU(c.aZ))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-add-team"]],decls:102,vars:27,consts:[[1,"container-fluid"],[1,"card"],[1,"row","justify-content-between","m-3"],[1,"col-md-4","d-flex","justify-content-start"],[1,"col-md-2","btn-group","text-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"icofont","icofont-arrow-left"],[1,"card-body"],[1,"card-body","toast-rtl",3,"ngClass"],[1,"toast","default-show-toast","align-items-center","text-light","bg-danger","border-0","fade",3,"ngClass"],[1,"d-flex","justify-content-between"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],["id","bottom-home",1,"tab-pane","fade","show"],["novalidate","",1,"row","g-3","needs-validation","custom-input",3,"formGroup","ngClass"],[4,"ngIf"],[1,"col-md-6"],["for","imgpicker",1,"form-label"],["type","file","accept",".jpg, .jpeg, .png",1,"form-control",3,"change"],["for","name",1,"form-label"],[1,"text-danger"],["id","name","placeholder","Name","type","text","formControlName","name","required","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["class","error-msg",4,"ngIf"],["for","mobile",1,"form-label"],["type","number","id","mobile","placeholder","Mobile","autocomplete","off","formControlName","mobile","required","","pattern","[0-9]{10}$",1,"form-control"],[1,"show-hide"],[1,"icofont","icofont-social-whatsapp","icon","mx-1"],["type","checkbox","formControlName","isWhatsappNumber"],["for","dob",1,"form-label"],["id","dob","placeholder","Date Of Birth","type","date","formControlName","dob","required","",1,"form-control",3,"max"],["for","gender",1,"form-label"],["id","gender","bindLabel","description","bindValue","value","formControlName","gender","placeholder","Select Gender","required","",3,"items","ngClass"],["for","email",1,"form-label"],["id","email","placeholder","Email","type","text","formControlName","email","required","",1,"form-control"],["for","responsbilities",1,"form-label"],["type","text","placeholder","responsbilities","autocomplete","off","formControlName","responsibilities","id","responsbilities",1,"form-control"],["for","emergencyNumber",1,"form-label"],["type","number","placeholder","Emergency Number","id","emergencyNumber","autocomplete","off","formControlName","emergencyNumber",1,"form-control"],["for","blood_group",1,"form-label"],["id","blood_group","bindLabel","description","bindValue","value","formControlName","blood_group","placeholder","Select Blood Group",3,"items","ngClass"],["for","Salary",1,"form-label"],["id","Salary","type","text","placeholder","Monthly Salary","autocomplete","off","formControlName","current_salary",1,"form-control"],["for","playerName","id","highest_qualification",1,"form-label"],["type","text","placeholder","Highest Qualification","autocomplete","off","formControlName","highest_qualification","for","highest_qualification",1,"form-control"],["for","communicationSkill",1,"form-label"],["type","text","placeholder","Communication Skill","autocomplete","off","formControlName","communicationSkill","id","communicationSkill",1,"form-control"],["for","address",1,"form-label"],["type","text","placeholder","Local Address","autocomplete","off","id","address","formControlName","address",1,"form-control"],["for","playerName",1,"form-label"],["type","text","placeholder","Permanent Address","autocomplete","off","formControlName","permanentAddress",1,"form-control"],[1,"mt-3","d-flex","justify-content-end"],[1,"col-md-1","mx-1","text-end"],["type","submit",1,"btn","btn-primary",3,"click"],["alt","Preview","width","150",1,"img-100","img-h-100","me-2","rounded-circle",3,"src"],[1,"invalid-feedback"],[1,"error-msg"]],template:function(r,t){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e.EFF(5),e.k0s()(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return t.goBack()}),e.EFF(8,"Back "),e.nrm(9,"i",6),e.k0s()()(),e.nrm(10,"hr"),e.j41(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),e.EFF(16),e.k0s(),e.j41(17,"button",12),e.bIt("click",function(){return t.close()}),e.k0s()()()(),e.j41(18,"div",13)(19,"form",14),e.DNE(20,P,2,1,"div",15),e.j41(21,"div",16)(22,"label",17),e.EFF(23,"Profile Image"),e.k0s(),e.j41(24,"input",18),e.bIt("change",function(d){return t.onFileSelected(d)}),e.k0s()(),e.j41(25,"div",16)(26,"label",19),e.EFF(27,"Name"),e.j41(28,"a",20),e.EFF(29,"*"),e.k0s()(),e.nrm(30,"input",21),e.DNE(31,x,2,0,"div",22)(32,D,2,0,"div",23),e.k0s(),e.j41(33,"div",16)(34,"label",24),e.EFF(35,"Mobile"),e.j41(36,"a",20),e.EFF(37,"*"),e.k0s()(),e.nrm(38,"input",25),e.j41(39,"div",26),e.nrm(40,"i",27)(41,"input",28),e.k0s(),e.DNE(42,R,2,0,"div",23)(43,M,2,0,"div",22),e.k0s(),e.j41(44,"div",16)(45,"label",29),e.EFF(46,"Date Of Birth"),e.j41(47,"a",20),e.EFF(48,"*"),e.k0s()(),e.nrm(49,"input",30),e.DNE(50,G,2,0,"div",22),e.k0s(),e.j41(51,"div",16)(52,"label",31),e.EFF(53,"Gender"),e.j41(54,"a",20),e.EFF(55,"*"),e.k0s()(),e.nrm(56,"ng-select",32),e.DNE(57,I,2,0,"div",23),e.k0s(),e.j41(58,"div",16)(59,"label",33),e.EFF(60,"Email"),e.j41(61,"a",20),e.EFF(62,"*"),e.k0s()(),e.nrm(63,"input",34),e.DNE(64,U,2,0,"div",22)(65,N,2,0,"div",23),e.k0s(),e.j41(66,"div",16)(67,"label",35),e.EFF(68,"Responsbilities"),e.k0s(),e.nrm(69,"input",36),e.k0s(),e.j41(70,"div",16)(71,"label",37),e.EFF(72,"Emergency Number"),e.k0s(),e.nrm(73,"input",38),e.k0s(),e.j41(74,"div",16)(75,"label",39),e.EFF(76,"Blood Group"),e.k0s(),e.nrm(77,"ng-select",40),e.k0s(),e.j41(78,"div",16)(79,"label",41),e.EFF(80,"Monthly Salary"),e.k0s(),e.nrm(81,"input",42),e.k0s(),e.j41(82,"div",16)(83,"label",43),e.EFF(84,"Highest Qualification"),e.k0s(),e.nrm(85,"input",44),e.k0s(),e.j41(86,"div",16)(87,"label",45),e.EFF(88,"Communication Skill"),e.k0s(),e.nrm(89,"input",46),e.k0s(),e.j41(90,"div",16)(91,"label",47),e.EFF(92,"Local Address"),e.k0s(),e.nrm(93,"input",48),e.k0s(),e.j41(94,"div",16)(95,"label",49),e.EFF(96,"Permanent Address"),e.k0s(),e.nrm(97,"input",50),e.k0s(),e.j41(98,"div",51)(99,"div",52)(100,"button",53),e.bIt("click",function(){return t.onSubmit()}),e.EFF(101),e.k0s()()()()()()()()),2&r){let n,d,h,g,E,y,k,F;e.R7$(5),e.SpI(" ",t.teamName," "),e.R7$(7),e.Y8G("ngClass",e.eq3(21,w,!t.isError)),e.R7$(),e.Y8G("ngClass",e.eq3(23,S,t.isError)),e.R7$(3),e.JRh(t.errorMessage),e.R7$(3),e.Y8G("formGroup",t.addEditTeamForm.formGroup)("ngClass",e.eq3(25,j,t.validate)),e.R7$(),e.Y8G("ngIf",t.selectedFiles.previewUrl),e.R7$(11),e.Y8G("ngIf",null==(n=t.addEditTeamForm.formGroup.get("name"))?null:n.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(d=t.addEditTeamForm.formGroup.get("name"))?null:d.hasError("pattern")),e.R7$(10),e.Y8G("ngIf",null==(h=t.addEditTeamForm.formGroup.get("mobile"))?null:h.hasError("pattern")),e.R7$(),e.Y8G("ngIf",null==(g=t.addEditTeamForm.formGroup.get("mobile"))?null:g.hasError("required")),e.R7$(6),e.Y8G("max",t.maxDate),e.R7$(),e.Y8G("ngIf",null==(E=t.addEditTeamForm.formGroup.get("dob"))?null:E.hasError("required")),e.R7$(6),e.Y8G("items",t.genderTypeList)("ngClass",t.errorMsgShowed("gender")),e.R7$(),e.Y8G("ngIf",(null==(y=t.addEditTeamForm.formGroup.get("gender"))?null:y.hasError("required"))&&t.validate),e.R7$(7),e.Y8G("ngIf",null==(k=t.addEditTeamForm.formGroup.get("email"))?null:k.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(F=t.addEditTeamForm.formGroup.get("email"))?null:F.hasError("email")),e.R7$(12),e.Y8G("items",t.bloodGroupList)("ngClass",t.errorMsgShowed("blood_group")),e.R7$(24),e.JRh(t.isEditMode?"Update":"Submit")}},dependencies:[c.YU,c.bT,s.qT,s.me,s.Q0,s.Zm,s.BC,s.cb,s.YS,s.R_,s.j4,s.JD,T.vr],styles:[".cdk-overlay-container{position:fixed;z-index:1060!important}  .mat-datepicker-content .mat-calendar{background-color:#fff!important}  .mat-mdc-form-field-flex{background-color:#fff!important;height:39px!important}.input-width[_ngcontent-%COMP%]{width:100%!important}  .mat-from-field{height:64px!important}  .mat-mdc-form-field-infix{padding-top:5px!important}  .mat-mdc-text-field-wrapper.mdc-text-field{border-radius:var(--bs-border-radius)!important;border:var(--bs-border-width) solid var(--bs-border-color)!important;background-color:#fff!important}  .mdc-line-ripple{display:none}  .mdc-text-field--focused{border:none;box-shadow:0 0 0 .25rem #0d6efd40!important;border-radius:var(--bs-border-radius)!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out!important;background-color:transparent!important}  .mat-calendar-controls button,   mat-datepicker-toggle{color:var(--theme-default)!important}  .success-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-icon .ng-select-container{padding-right:calc(1.5em + .75rem)!important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\")!important;background-repeat:no-repeat!important;background-position:right calc(.375em + .1875rem) center!important;background-size:calc(.75em + .375rem) calc(.75em + .375rem)!important}  .error-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25)!important}  .success-shadow .ng-select-container{box-shadow:0 0 0 .25rem rgba(var(--bs-success-rgb),.25)!important}  .custom-select .ng-select-container,   input .list-input,   .list-input{border:solid 1px #33bfbf!important;border-color:#33bfbf!important}.error-msg[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#f1523d!important}.mt-custom[_ngcontent-%COMP%]{margin-top:-16px!important}[_nghost-%COMP%]     select.form-select:focus{border-color:#33bfbf;box-shadow:0 0 0 .25rem #33bfbf80}.active-sort[_ngcontent-%COMP%]{color:#fffc!important}  .ng-select-container{max-height:40px!important;overflow-y:auto!important}  .ng-dropdown-panel{max-height:auto!important}.icon[_ngcontent-%COMP%]{font-size:large;color:green}.form-check-input[type=radio][_ngcontent-%COMP%]{width:20px;height:20px}.form-check-input[type=radio][_ngcontent-%COMP%]:before{width:16px;height:16px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.form_lable[_ngcontent-%COMP%]{margin-top:0;width:50%;height:100%;margin-left:1px;margin-right:1px;background-color:transparent;top:0}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-sizing:border-box;outline:0;padding:.75rem;position:relative;width:100%}.hidediv[_ngcontent-%COMP%]{display:none}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;color:transparent;cursor:pointer;height:auto;inset:0;position:absolute;width:auto}"]})}return a})()},5576:(_,b,l)=>{l.d(b,{O:()=>f});var m=l(5312),s=l(4438),v=l(2616),e=l(1626);let f=(()=>{class p{constructor(i,c){this.sharedService=i,this.http=c,this.teamsUrl=m.c.adminUrl+"/Employees"}getTeamsList(i){return this.sharedService.getRequest(this.teamsUrl+"/allEmployee",i)}updateTeamStatus(i){const c=i?.teamId;return this.sharedService.postRequest(this.teamsUrl+"/employeeStatus/"+c)}deleteEmployee(i){return this.http.delete(this.teamsUrl+"/deleteEmployee/"+i)}getEmployeeDetail(i){return this.sharedService.getRequest(this.teamsUrl+"/employeeDetails/"+i)}addEmployee(i){return this.sharedService.postRequest(this.teamsUrl+"/addEmployee",i)}editEmployee(i,c){return this.sharedService.postRequest(this.teamsUrl+"/editEmployee/"+c,i)}getPermissionsList(i){return this.sharedService.getRequest(m.c.adminUrl+"/PermissionModule/fetchEmployeePermission/"+i)}updateEmployeePermission(i,c){return this.sharedService.putRequest(this.teamsUrl+"/updatePermission/"+c,i)}getAssignedProjects(i){return this.sharedService.getRequest(m.c.adminUrl+"/project/projectAssignedToEmployee/"+i)}getProjectsList(){return this.sharedService.getRequest(m.c.adminUrl+"/Lead/projectList")}assignProjectToEmployee(i){return this.sharedService.postRequest(m.c.adminUrl+"/project/assignProject",i)}deleteAssignedProject(i){return this.http.delete(m.c.adminUrl+"/project/deleteAssignedEmployee/"+i)}getEmployeeActivity(i){return this.sharedService.getRequest(this.teamsUrl+"/TimelineActivity",i)}getLeadSummary(i){return this.sharedService.getRequest(m.c.adminUrl+"/Lead/summeryReport",i)}getLeaveHistory(i){return this.sharedService.getRequest(this.teamsUrl+"/leaveList",i)}getSalaryHistory(i){return this.sharedService.getRequest(m.c.adminUrl+"/salary/salaryList",i)}getDownloadData(i){return this.http.get(m.c.adminUrl+"/salary/salarySlip",{params:i,responseType:"blob"})}getAllDesignation(){return this.sharedService.getRequest(m.c.adminUrl+"/Designation/designationList")}static#e=this.\u0275fac=function(c){return new(c||p)(s.KVO(v.d),s.KVO(e.Qq))};static#t=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);