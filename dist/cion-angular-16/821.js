"use strict";(self.webpackChunkcion_angular_16=self.webpackChunkcion_angular_16||[]).push([[821],{9821:(M,p,a)=>{a.r(p),a.d(p,{SettingModule:()=>I});var m=a(177),g=a(9213),u=a(2015),f=a(5596),r=a(9417),h=a(9818),d=a(1626),c=a(2791),t=a(4438),b=a(4656),v=a(7575);function C(n,l){1&n&&t.nrm(0,"mat-progress-bar",1)}let y=(()=>{class n{constructor(o,e){this.sharedService=o,this.cdref=e}get isLoading(){return this.sharedService.isLoading}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||n)(t.rXU(b.d),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-setting"]],decls:2,vars:1,consts:[["mode","indeterminate","class","mb-3",4,"ngIf"],["mode","indeterminate",1,"mb-3"]],template:function(e,i){1&e&&(t.DNE(0,C,1,0,"mat-progress-bar",0),t.nrm(1,"router-outlet")),2&e&&t.Y8G("ngIf",i.isLoading)},dependencies:[m.bT,c.n3,v.HM]})}return n})();class F{constructor(l){this.formBuilder=l,this.formGroup=this.formBuilder.group({siteName:["",[r.k0.required,r.k0.minLength(6)]],mobile:["",[r.k0.required]],email:["",[r.k0.required]],description:["",[r.k0.required]],copyRight:["",[r.k0.required]]})}}function x(n,l){if(1&n&&(t.qex(0),t.nrm(1,"img",26),t.bVm()),2&n){const o=t.XpG();t.R7$(),t.Y8G("src",o.selectedImages.previewUrl,t.B4B)}}function k(n,l){if(1&n&&t.nrm(0,"img",28),2&n){const o=t.XpG(2);t.Mz_("src","http://localhost:3001/",o.data.logo,"",t.B4B)}}function G(n,l){if(1&n&&t.DNE(0,k,1,2,"img",27),2&n){const o=t.XpG();t.Y8G("ngIf",o.data.logo)}}const S=[{path:"",component:y,data:{breadcrumb:"setting "},children:[{path:"update",component:(()=>{class n{constructor(o,e,i){this.formBuilder=o,this.router=e,this.http=i,this.selectedImages={},this.data={logo:"",siteName:"",email:"",mobile:"",description:"",copyRight:""}}ngOnInit(){this.settingForm=new F(this.formBuilder);const o=localStorage.getItem("jwt");if(console.log("token =",o),!o)return void this.router.navigate(["/login"]).then(()=>{window.history.replaceState({},"","/login")});const e=new d.Lr({Authorization:o});this.http.get("http://localhost:3001/user/getWebData",{headers:e}).subscribe(s=>{console.log("data =",s.Data),this.data=s.Data},s=>{console.log("data is not found")})}onFileSelected(o){const e=o.target.files[0];if(console.log("file =",e),e){const i=new FileReader;i.onload=()=>{this.selectedImages={name:e.name,previewUrl:i.result,file:e}},i.readAsDataURL(e)}}onSubmit(){const e=new FormData;e.append("siteName",this.settingForm.formGroup.value.siteName),e.append("mobile",this.settingForm.formGroup.value.mobile),e.append("email",this.settingForm.formGroup.value.email),e.append("description",this.settingForm.formGroup.value.description),e.append("copyRight",this.settingForm.formGroup.value.copyRight),this.selectedImages?.file&&e.append("logo",this.selectedImages.file),console.log("data= ",e),this.http.put("http://localhost:3001/user/updateSetting",e).subscribe(i=>{this.data=i.Data},i=>{console.error("Error while submitting data:",i),alert(i)})}static#t=this.\u0275fac=function(e){return new(e||n)(t.rXU(r.ok),t.rXU(c.Ix),t.rXU(d.Qq))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-setting-update"]],decls:40,vars:8,consts:[["logoTemplate",""],[1,"settings-container"],[1,"settings-content"],["novalidate","",1,"row","g-3","needs-validation","custom-input",3,"formGroup"],[1,"row","mb-3"],[1,"col-md-6","d-flex","align-items-center"],[1,"image-preview"],[4,"ngIf","ngIfElse"],[1,"col-md-6"],["for","imgpicker",1,"form-label"],["id","imgpicker","type","file","accept",".jpg, .jpeg, .png","aria-describedby","imgpickerHelp",1,"form-control",3,"change"],["id","imgpickerHelp",1,"form-text","text-muted"],[1,"col-md-12"],["for","siteName",1,"form-label"],["id","siteName","type","text","formControlName","siteName","placeholder","Enter site name",1,"form-control",3,"value"],["for","mobile",1,"form-label"],["id","mobile","type","text","formControlName","mobile","placeholder","Enter Mobile Number",1,"form-control",3,"value"],["for","email",1,"form-label"],["id","email","type","text","formControlName","email","placeholder","Enter Email",1,"form-control",3,"value"],["for","description",1,"form-label"],["id","description","type","text","formControlName","description","placeholder","Enter Description",1,"form-control",3,"value"],["for","copyRight",1,"form-label"],["id","copyRight","type","text","formControlName","copyRight","placeholder","Enter copyRight",1,"form-control",3,"value"],[1,"row"],[1,"col-md-12","text-end"],["type","submit",1,"btn","btn-primary",3,"click"],["alt","Preview Image","width","100",1,"img-fluid",3,"src"],["alt","Logo Preview","class","img-fluid","width","100",3,"src",4,"ngIf"],["alt","Logo Preview","width","100",1,"img-fluid",3,"src"]],template:function(e,i){if(1&e){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"form",3)(3,"div",4)(4,"div",5)(5,"div",6),t.DNE(6,x,2,1,"ng-container",7)(7,G,1,1,"ng-template",null,0,t.C5r),t.k0s()(),t.j41(9,"div",8)(10,"label",9),t.EFF(11,"Logo"),t.k0s(),t.j41(12,"input",10),t.bIt("change",function(E){return t.eBV(s),t.Njj(i.onFileSelected(E))}),t.k0s(),t.j41(13,"small",11),t.EFF(14,"Upload a .jpg, .jpeg, or .png file."),t.k0s()()(),t.j41(15,"div",4)(16,"div",12)(17,"label",13),t.EFF(18,"Name"),t.k0s(),t.nrm(19,"input",14),t.k0s(),t.j41(20,"div",12)(21,"label",15),t.EFF(22,"Mobile"),t.k0s(),t.nrm(23,"input",16),t.k0s(),t.j41(24,"div",12)(25,"label",17),t.EFF(26,"Email"),t.k0s(),t.nrm(27,"input",18),t.k0s(),t.j41(28,"div",12)(29,"label",19),t.EFF(30,"Description"),t.k0s(),t.nrm(31,"input",20),t.k0s(),t.j41(32,"div",12)(33,"label",21),t.EFF(34,"CopyRight"),t.k0s(),t.nrm(35,"input",22),t.k0s()(),t.j41(36,"div",23)(37,"div",24)(38,"button",25),t.bIt("click",function(){return t.eBV(s),t.Njj(i.onSubmit())}),t.EFF(39,"Update"),t.k0s()()()()()()}if(2&e){const s=t.sdS(8);t.R7$(2),t.Y8G("formGroup",i.settingForm.formGroup),t.R7$(4),t.Y8G("ngIf",i.selectedImages.previewUrl)("ngIfElse",s),t.R7$(13),t.Y8G("value",i.data.siteName),t.R7$(4),t.Y8G("value",i.data.mobile),t.R7$(4),t.Y8G("value",i.data.email),t.R7$(4),t.Y8G("value",i.data.description),t.R7$(4),t.Y8G("value",i.data.copyRight)}},dependencies:[m.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],styles:[".settings-container[_ngcontent-%COMP%]{padding:20px;background:#f9f9f9}.settings-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.settings-content[_ngcontent-%COMP%]{justify-content:center;display:flex;gap:20px}.profile-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.profile-pic[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;margin-bottom:10px}.upload-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer}.settings-details[_ngcontent-%COMP%]{flex:1}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding:10px;background:#fff;border:1px solid #ddd;border-radius:5px}.label[_ngcontent-%COMP%]{font-weight:700}.value[_ngcontent-%COMP%]{flex:1;text-align:left;margin-left:10px;color:#555}button[_ngcontent-%COMP%]{background:none;border:none;color:#007bff;cursor:pointer;font-weight:700}"]})}return n})(),data:{title:"setting update"}}]}];let j=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[c.iI.forChild(S),c.iI]})}return n})(),I=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[m.MD,j,g.m_,u.G,f.Hu,r.X1,h.MQ,d.q1]})}return n})()}}]);